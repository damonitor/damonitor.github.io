

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ETMv4 sysfs linux driver programming reference. &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>ETMv4 sysfs linux driver programming reference.</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/trace/coresight/coresight-etm4x-reference.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="etmv4-sysfs-linux-driver-programming-reference">
<h1>ETMv4 sysfs linux driver programming reference.<a class="headerlink" href="#etmv4-sysfs-linux-driver-programming-reference" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Mike Leach &lt;<a class="reference external" href="mailto:mike&#46;leach&#37;&#52;&#48;linaro&#46;org">mike<span>&#46;</span>leach<span>&#64;</span>linaro<span>&#46;</span>org</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">October 11th, 2019</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Supplement to existing ETMv4 driver documentation.</p>
<div class="section" id="sysfs-files-and-directories">
<h2>Sysfs files and directories<a class="headerlink" href="#sysfs-files-and-directories" title="Permalink to this headline">¶</a></h2>
<p>Root: <code class="docutils literal notranslate"><span class="pre">/sys/bus/coresight/devices/etm&lt;N&gt;</span></code></p>
<p>The following paragraphs explain the association between sysfs files and the
ETMv4 registers that they effect. Note the register names are given without
the ‘TRC’ prefix.</p>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">mode</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">{CONFIGR + others}</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Bit select trace features. See ‘mode’ section below. Bits
in this will cause equivalent programming of trace config and
other registers to enable the features requested.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax &amp; eg:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">bitfield</span> <span class="pre">&gt;</span> <span class="pre">mode</span></code></p>
<p>bitfield up to 32 bits setting trace features.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">echo</span> <span class="pre">0x012</span> <span class="pre">&gt;</span> <span class="pre">mode</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">reset</span></code> (wo)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">All</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Reset all programming to trace nothing / no logic programmed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">1</span> <span class="pre">&gt;</span> <span class="pre">reset</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">enable_source</span></code> (wo)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">PRGCTLR, All hardware regs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><ul class="first simple">
<li>&gt; 0 : Programs up the hardware with the current values held in the driver
and enables trace.</li>
<li>= 0 : disable trace hardware.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">1</span> <span class="pre">&gt;</span> <span class="pre">enable_source</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cpu</span></code> (ro)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">CPU ID that this ETM is attached to.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">cat</span> <span class="pre">cpu</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">0</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Virtual register to index address comparator and range
features. Set index for first of the pair in a range.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">addr_idx</span></code></p>
<p class="last">Where idx &lt; nr_addr_cmp x 2</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_range</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ACVR[idx, idx+1], VIIECTLR</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Pair of addresses for a range selected by addr_idx. Include
/ exclude according to the optional parameter, or if omitted
uses the current ‘mode’ setting. Select comparator range in
control register. Error if index is odd value.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">mode,</span> <span class="pre">addr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">addr1</span> <span class="pre">addr2</span> <span class="pre">[exclude]</span> <span class="pre">&gt;</span> <span class="pre">addr_range</span></code></p>
<p>Where addr1 and addr2 define the range and addr1 &lt; addr2.</p>
<p>Optional exclude value:-</p>
<ul class="simple">
<li>0 for include</li>
<li>1 for exclude.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">echo</span> <span class="pre">0x0000</span> <span class="pre">0x2000</span> <span class="pre">0</span> <span class="pre">&gt;</span> <span class="pre">addr_range</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_single</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">ACVR[idx]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set a single address comparator according to addr_idx. This
is used if the address comparator is used as part of event
generation logic etc.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">addr1</span> <span class="pre">&gt;</span> <span class="pre">addr_single</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_start</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">ACVR[idx], VISSCTLR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set a trace start address comparator according to addr_idx.
Select comparator in control register.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">addr1</span> <span class="pre">&gt;</span> <span class="pre">addr_start</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_stop</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">ACVR[idx], VISSCTLR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set a trace stop address comparator according to addr_idx.
Select comparator in control register.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">addr1</span> <span class="pre">&gt;</span> <span class="pre">addr_stop</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_context</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ACATR[idx,{6:4}]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Link context ID comparator to address comparator addr_idx</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">ctxt_idx</span> <span class="pre">&gt;</span> <span class="pre">addr_context</span></code></p>
<p class="last">Where ctxt_idx is the index of the linked context id / vmid
comparator.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_ctxtype</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ACATR[idx,{3:2}]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Input value string. Set type for linked context ID comparator</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">type</span> <span class="pre">&gt;</span> <span class="pre">addr_ctxtype</span></code></p>
<p>Type one of {all, vmid, ctxid, none}</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">echo</span> <span class="pre">ctxid</span> <span class="pre">&gt;</span> <span class="pre">addr_ctxtype</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_exlevel_s_ns</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ACATR[idx,{14:8}]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set the ELx secure and non-secure matching bits for the
selected address comparator</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">addr_exlevel_s_ns</span></code></p>
<p>val is a 7 bit value for exception levels to exclude. Input
value shifted to correct bits in register.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">echo</span> <span class="pre">0x4F</span> <span class="pre">&gt;</span> <span class="pre">addr_exlevel_s_ns</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_instdatatype</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">ACATR[idx,{1:0}]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set the comparator address type for matching. Driver only
supports setting instruction address type.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_cmp_view</span></code> (ro)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">ACVR[idx, idx+1], ACATR[idx], VIIECTLR</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Read the currently selected address comparator. If part of
address range then display both addresses.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">addr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">addr_cmp_view</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><blockquote class="first">
<div><p><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">cat</span> <span class="pre">addr_cmp_view</span></code></p>
</div></blockquote>
<p class="last"><code class="docutils literal notranslate"><span class="pre">addr_cmp[0]</span> <span class="pre">range</span> <span class="pre">0x0</span> <span class="pre">0xffffffffffffffff</span> <span class="pre">include</span> <span class="pre">ctrl(0x4b00)</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_addr_cmp</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of address comparator pairs</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">sshot_idx</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">None</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Select single shot register set.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_ctrl</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">SSCCR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Access a single shot comparator control register.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">sshot_ctrl</span></code></p>
<p class="last">Writes val into the selected control register.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_status</span></code> (ro)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">SSCSR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Read a single shot comparator status register</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">sshot_status</span></code></p>
<p>Read status.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">$&gt;</span> <span class="pre">cat</span> <span class="pre">sshot_status</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">0x1</span></code></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_pe_ctrl</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">SSPCICR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Access a single shot PE comparator input control register.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">sshot_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">sshot_pe_ctrl</span></code></p>
<p class="last">Writes val into the selected control register.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">ns_exlevel_vinst</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">VICTLR{23:20}</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Program non-secure exception level filters. Set / clear NS
exception filter bits. Setting ‘1’ excludes trace from the
exception level.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">bitfield</span> <span class="pre">&gt;</span> <span class="pre">ns_exlevel_viinst</span></code></p>
<p>Where bitfield contains bits to set clear for EL0 to EL2</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">%&gt;</span> <span class="pre">echo</span> <span class="pre">0x4</span> <span class="pre">&gt;</span> <span class="pre">ns_exlevel_viinst</span></code></p>
<p class="last">Excludes EL2 NS trace.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">vinst_pe_cmp_start_stop</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">VIPCSSCTLR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Access PE start stop comparator input control registers</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">bb_ctrl</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">BBCTLR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Define ranges that Branch Broadcast will operate in.
Default (0x0) is all addresses.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body">BB enabled.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">cyc_threshold</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">CCCTLR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set the threshold for which cycle counts will be emitted.
Error if attempt to set below minimum defined in IDR3, masked
to width of valid bits.</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body">CC enabled.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">syncfreq</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">SYNCPR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set trace synchronisation period. Power of 2 value, 0 (off)
or 8-20. Driver defaults to 12 (every 4096 bytes).</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cntr_idx</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">none</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Select the counter to access</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">cntr_idx</span></code></p>
<p class="last">Where idx &lt; nr_cntr</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cntr_ctrl</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">CNTCTLR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set counter control value.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cntr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">cntr_ctrl</span></code></p>
<p class="last">Where val is per ETMv4 spec.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cntrldvr</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">CNTRLDVR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set counter reload value.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">cntr_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">cntrldvr</span></code></p>
<p class="last">Where val is per ETMv4 spec.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_cntr</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR5</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of counters implemented.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">ctxid_idx</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Select the context ID comparator to access</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">ctxid_idx</span></code></p>
<p class="last">Where idx &lt; numcidc</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">ctxid_pid</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">CIDCVR[idx]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set the context ID comparator value</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">ctxid_idx</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">ctxid_masks</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">CIDCCTLR0, CIDCCTLR1, CIDCVR&lt;0-7&gt;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Pair of values to set the byte masks for 1-8 context ID
comparators. Automatically clears masked bytes to 0 in CID
value registers.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">m3m2m1m0</span> <span class="pre">[m7m6m5m4]</span> <span class="pre">&gt;</span> <span class="pre">ctxid_masks</span></code></p>
<p>32 bit values made up of mask bytes, where mN represents a
byte mask value for Context ID comparator N.</p>
<p class="last">Second value not required on systems that have fewer than 4
context ID comparators</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">numcidc</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of Context ID comparators</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">vmid_idx</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Select the VM ID comparator to access.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">vmid_idx</span></code></p>
<p class="last">Where idx &lt;&nbsp; numvmidc</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">vmid_val</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">VMIDCVR[idx]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Set the VM ID comparator value</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">vmid_idx</span></code></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">vmid_masks</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">VMIDCCTLR0, VMIDCCTLR1, VMIDCVR&lt;0-7&gt;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Pair of values to set the byte masks for 1-8 VM ID comparators.
Automatically clears masked bytes to 0 in VMID value registers.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">m3m2m1m0</span> <span class="pre">[m7m6m5m4]</span> <span class="pre">&gt;</span> <span class="pre">vmid_masks</span></code></p>
<p class="last">Where mN represents a byte mask value for VMID comparator N.
Second value not required on systems that have fewer than 4
VMID comparators.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">numvmidc</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of VMID comparators</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">res_idx</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Select the resource selector control to access. Must be 2 or
higher as selectors 0 and 1 are hardwired.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">idx</span> <span class="pre">&gt;</span> <span class="pre">res_idx</span></code></p>
<p class="last">Where 2 &lt;= idx &lt; nr_resource x 2</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">res_ctrl</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">RSCTLR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set resource selector control value. Value per ETMv4 spec.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">res_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">val</span> <span class="pre">&gt;</span> <span class="pre">res_cntr</span></code></p>
<p class="last">Where val is per ETMv4 spec.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_resource</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of resource selector pairs</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">event</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">EVENTCTRL0R</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set up to 4 implemented event fields.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">ev3ev2ev1ev0</span> <span class="pre">&gt;</span> <span class="pre">event</span></code></p>
<p class="last">Where evN is an 8 bit event field. Up to 4 event fields make up the
32-bit input value. Number of valid fields is implementation dependent,
defined in IDR0.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">event_instren</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">EVENTCTRL1R</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Choose events which insert event packets into trace stream.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first">EVENTCTRL0R</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">bitfield</span> <span class="pre">&gt;</span> <span class="pre">event_instren</span></code></p>
<p class="last">Where bitfield is up to 4 bits according to number of event fields.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">event_ts</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">TSCTLR</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Set the event that will generate timestamp requests.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">TS</span> <span class="pre">activated</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">evfield</span> <span class="pre">&gt;</span> <span class="pre">event_ts</span></code></p>
<p class="last">Where evfield is an 8 bit event selector.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">seq_idx</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">None</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Sequencer event register select - 0 to 2</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">seq_state</span></code> (rw)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">SEQSTR</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Sequencer current state - 0 to 3.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">seq_event</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">SEQEVR[idx]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">State transition event registers</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Depends:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">seq_idx</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">evBevF</span> <span class="pre">&gt;</span> <span class="pre">seq_event</span></code></p>
<p>Where evBevF is a 16 bit value made up of two event selectors,</p>
<ul class="last simple">
<li>evB : back</li>
<li>evF : forwards.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">seq_reset_event</span></code> (rw)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">SEQRSTEVR</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body"><p class="first">Sequencer reset event</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">evfield</span> <span class="pre">&gt;</span> <span class="pre">seq_reset_event</span></code></p>
<p class="last">Where evfield is an 8 bit event selector.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nrseqstate</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR5</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of sequencer states (0 or 4)</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_pe_cmp</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of PE comparator inputs</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_ext_inp</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR5</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of external inputs</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">File:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">nr_ss_cmp</span></code> (ro)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Trace Registers:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">From IDR4</td>
</tr>
<tr class="field-odd field"><th class="field-name">Notes:</th><td class="field-body">Number of Single Shot control registers</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><em>Note:</em> When programming any address comparator the driver will tag the
comparator with a type used - i.e. RANGE, SINGLE, START, STOP. Once this tag
is set, then only the values can be changed using the same sysfs file / type
used to program it.</p>
<p>Thus:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>% echo 0 &gt; addr_idx           ; select address comparator 0
% echo 0x1000 0x5000 0 &gt; addr_range ; set address range on comparators 0, 1.
% echo 0x2000 &gt; addr_start    ; error as comparator 0 is a range comparator
% echo 2 &gt; addr_idx           ; select address comparator 2
% echo 0x2000 &gt; addr_start    ; this is OK as comparator 2 is unused.
% echo 0x3000 &gt; addr_stop     ; error as comparator 2 set as start address.
% echo 2 &gt; addr_idx           ; select address comparator 3
% echo 0x3000 &gt; addr_stop     ; this is OK
</pre></div>
</div>
<p>To remove programming on all the comparators (and all the other hardware) use
the reset parameter:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>% echo 1 &gt; reset
</pre></div>
</div>
</div>
<div class="section" id="the-mode-sysfs-parameter">
<h2>The ‘mode’ sysfs parameter.<a class="headerlink" href="#the-mode-sysfs-parameter" title="Permalink to this headline">¶</a></h2>
<p>This is a bitfield selection parameter that sets the overall trace mode for the
ETM. The table below describes the bits, using the defines from the driver
source file, along with a description of the feature these represent. Many
features are optional and therefore dependent on implementation in the
hardware.</p>
<p>Bit assignments shown below:-</p>
<hr class="docutils" />
<dl class="docutils">
<dt><strong>bit (0):</strong></dt>
<dd>ETM_MODE_EXCLUDE</dd>
<dt><strong>description:</strong></dt>
<dd>This is the default value for the include / exclude function when
setting address ranges. Set 1 for exclude range. When the mode
parameter is set this value is applied to the currently indexed
address range.</dd>
<dt><strong>bit (4):</strong></dt>
<dd>ETM_MODE_BB</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable branch broadcast if supported in hardware [IDR0].</dd>
<dt><strong>bit (5):</strong></dt>
<dd>ETMv4_MODE_CYCACC</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable cycle accurate trace if supported [IDR0].</dd>
<dt><strong>bit (6):</strong></dt>
<dd>ETMv4_MODE_CTXID</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable context ID tracing if supported in hardware [IDR2].</dd>
<dt><strong>bit (7):</strong></dt>
<dd>ETM_MODE_VMID</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable virtual machine ID tracing if supported [IDR2].</dd>
<dt><strong>bit (11):</strong></dt>
<dd>ETMv4_MODE_TIMESTAMP</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable timestamp generation if supported [IDR0].</dd>
<dt><strong>bit (12):</strong></dt>
<dd>ETM_MODE_RETURNSTACK</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable trace return stack use if supported [IDR0].</dd>
<dt><strong>bit (13-14):</strong></dt>
<dd>ETM_MODE_QELEM(val)</dd>
<dt><strong>description:</strong></dt>
<dd>‘val’ determines level of Q element support enabled if
implemented by the ETM [IDR0]</dd>
<dt><strong>bit (19):</strong></dt>
<dd>ETM_MODE_ATB_TRIGGER</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the ATBTRIGGER bit in the event control register
[EVENTCTLR1] if supported [IDR5].</dd>
<dt><strong>bit (20):</strong></dt>
<dd>ETM_MODE_LPOVERRIDE</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the LPOVERRIDE bit in the event control register
[EVENTCTLR1], if supported [IDR5].</dd>
<dt><strong>bit (21):</strong></dt>
<dd>ETM_MODE_ISTALL_EN</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the ISTALL bit in the stall control register
[STALLCTLR]</dd>
<dt><strong>bit (23):</strong></dt>
<dd>ETM_MODE_INSTPRIO</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the INSTPRIORITY bit in the stall control register
[STALLCTLR] , if supported [IDR0].</dd>
<dt><strong>bit (24):</strong></dt>
<dd>ETM_MODE_NOOVERFLOW</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the NOOVERFLOW bit in the stall control register
[STALLCTLR], if supported [IDR3].</dd>
<dt><strong>bit (25):</strong></dt>
<dd>ETM_MODE_TRACE_RESET</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the TRCRESET bit in the viewinst control register
[VICTLR] , if supported [IDR3].</dd>
<dt><strong>bit (26):</strong></dt>
<dd>ETM_MODE_TRACE_ERR</dd>
<dt><strong>description:</strong></dt>
<dd>Set to enable the TRCCTRL bit in the viewinst control register
[VICTLR].</dd>
<dt><strong>bit (27):</strong></dt>
<dd>ETM_MODE_VIEWINST_STARTSTOP</dd>
<dt><strong>description:</strong></dt>
<dd>Set the initial state value of the ViewInst start / stop logic
in the viewinst control register [VICTLR]</dd>
<dt><strong>bit (30):</strong></dt>
<dd>ETM_MODE_EXCL_KERN</dd>
<dt><strong>description:</strong></dt>
<dd>Set default trace setup to exclude kernel mode trace (see note a)</dd>
<dt><strong>bit (31):</strong></dt>
<dd>ETM_MODE_EXCL_USER</dd>
<dt><strong>description:</strong></dt>
<dd>Set default trace setup to exclude user space trace (see note a)</dd>
</dl>
<hr class="docutils" />
<p><em>Note a)</em> On startup the ETM is programmed to trace the complete address space
using address range comparator 0. ‘mode’ bits 30 / 31 modify this setting to
set EL exclude bits for NS state in either user space (EL0) or kernel space
(EL1) in the address range comparator. (the default setting excludes all
secure EL, and NS EL2)</p>
<p>Once the reset parameter has been used, and/or custom programming has been
implemented - using these bits will result in the EL bits for address
comparator 0 being set in the same way.</p>
<p><em>Note b)</em> Bits 2-3, 8-10, 15-16, 18, 22, control features that only work with
data trace. As A-profile data trace is architecturally prohibited in ETMv4,
these have been omitted here. Possible uses could be where a kernel has
support for control of R or M profile infrastructure as part of a heterogeneous
system.</p>
<p>Bits 17, 28-29 are unused.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>