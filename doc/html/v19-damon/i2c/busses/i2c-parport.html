

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel driver i2c-parport &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Kernel driver i2c-parport</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/i2c/busses/i2c-parport.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-driver-i2c-parport">
<h1>Kernel driver i2c-parport<a class="headerlink" href="#kernel-driver-i2c-parport" title="Permalink to this headline">¶</a></h1>
<p>Author: Jean Delvare &lt;<a class="reference external" href="mailto:jdelvare&#37;&#52;&#48;suse&#46;de">jdelvare<span>&#64;</span>suse<span>&#46;</span>de</a>&gt;</p>
<p>This is a unified driver for several i2c-over-parallel-port adapters,
such as the ones made by Philips, Velleman or ELV. This driver is
meant as a replacement for the older, individual drivers:</p>
<blockquote>
<div><ul class="simple">
<li>i2c-philips-par</li>
<li>i2c-elv</li>
<li>i2c-velleman</li>
<li>video/i2c-parport
(NOT the same as this one, dedicated to home brew teletext adapters)</li>
</ul>
</div></blockquote>
<p>It currently supports the following devices:</p>
<blockquote>
<div><ul class="simple">
<li>(type=0) Philips adapter</li>
<li>(type=1) home brew teletext adapter</li>
<li>(type=2) Velleman K8000 adapter</li>
<li>(type=3) ELV adapter</li>
<li>(type=4) Analog Devices ADM1032 evaluation board</li>
<li>(type=5) Analog Devices evaluation boards: ADM1025, ADM1030, ADM1031</li>
<li>(type=6) Barco LPT-&gt;DVI (K5800236) adapter</li>
<li>(type=7) One For All JP1 parallel port adapter</li>
<li>(type=8) VCT-jig</li>
</ul>
</div></blockquote>
<p>These devices use different pinout configurations, so you have to tell
the driver what you have, using the type module parameter. There is no
way to autodetect the devices. Support for different pinout configurations
can be easily added when needed.</p>
<p>Earlier kernels defaulted to type=0 (Philips).  But now, if the type
parameter is missing, the driver will simply fail to initialize.</p>
<p>SMBus alert support is available on adapters which have this line properly
connected to the parallel port’s interrupt pin.</p>
<div class="section" id="building-your-own-adapter">
<h2>Building your own adapter<a class="headerlink" href="#building-your-own-adapter" title="Permalink to this headline">¶</a></h2>
<p>If you want to build you own i2c-over-parallel-port adapter, here is
a sample electronics schema (credits go to Sylvain Munaut):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Device                                                      PC
Side          ___________________Vdd (+)                    Side
               |    |         |
              ---  ---       ---
              | |  | |       | |
              |R|  |R|       |R|
              | |  | |       | |
              ---  ---       ---
               |    |         |
               |    |    /|   |
SCL  ----------x--------o |-----------x-------------------  pin 2
                    |    \|   |       |
                    |         |       |
                    |   |\    |       |
SDA  ----------x----x---| o---x---------------------------  pin 13
               |        |/            |
               |                      |
               |         /|           |
               ---------o |----------------x--------------  pin 3
                         \|           |    |
                                      |    |
                                     ---  ---
                                     | |  | |
                                     |R|  |R|
                                     | |  | |
                                     ---  ---
                                      |    |
                                     ###  ###
                                     GND  GND
</pre></div>
</div>
<dl class="docutils">
<dt>Remarks:</dt>
<dd><ul class="first last">
<li><p class="first">This is the exact pinout and electronics used on the Analog Devices
evaluation boards.</p>
</li>
<li><p class="first">All inverters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  /|
-o |-
  \|
</pre></div>
</div>
<p>must be 74HC05, they must be open collector output.</p>
</li>
<li><p class="first">All resitors are 10k.</p>
</li>
<li><p class="first">Pins 18-25 of the parallel port connected to GND.</p>
</li>
<li><p class="first">Pins 4-9 (D2-D7) could be used as VDD is the driver drives them high.
The ADM1032 evaluation board uses D4-D7. Beware that the amount of
current you can draw from the parallel port is limited. Also note that
all connected lines MUST BE driven at the same state, else you’ll short
circuit the output buffers! So plugging the I2C adapter after loading
the i2c-parport module might be a good safety since data line state
prior to init may be unknown.</p>
</li>
<li><p class="first">This is 5V!</p>
</li>
<li><p class="first">Obviously you cannot read SCL (so it’s not really standard-compliant).
Pretty easy to add, just copy the SDA part and use another input pin.
That would give (ELV compatible pinout):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Device                                                      PC
Side          ______________________________Vdd (+)         Side
               |    |            |    |
              ---  ---          ---  ---
              | |  | |          | |  | |
              |R|  |R|          |R|  |R|
              | |  | |          | |  | |
              ---  ---          ---  ---
               |    |            |    |
               |    |      |\    |    |
SCL  ----------x--------x--| o---x------------------------  pin 15
                    |   |  |/         |
                    |   |             |
                    |   |   /|        |
                    |   ---o |-------------x--------------  pin 2
                    |       \|        |    |
                    |                 |    |
                    |                 |    |
                    |      |\         |    |
SDA  ---------------x---x--| o--------x-------------------  pin 10
                        |  |/              |
                        |                  |
                        |   /|             |
                        ---o |------------------x---------  pin 3
                            \|             |    |
                                           |    |
                                          ---  ---
                                          | |  | |
                                          |R|  |R|
                                          | |  | |
                                          ---  ---
                                           |    |
                                          ###  ###
                                          GND  GND
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<p>If possible, you should use the same pinout configuration as existing
adapters do, so you won’t even have to change the code.</p>
</div>
<div class="section" id="similar-but-different-drivers">
<h2>Similar (but different) drivers<a class="headerlink" href="#similar-but-different-drivers" title="Permalink to this headline">¶</a></h2>
<p>This driver is NOT the same as the i2c-pport driver found in the i2c
package. The i2c-pport driver makes use of modern parallel port features so
that you don’t need additional electronics. It has other restrictions
however, and was not ported to Linux 2.6 (yet).</p>
<p>This driver is also NOT the same as the i2c-pcf-epp driver found in the
lm_sensors package. The i2c-pcf-epp driver doesn’t use the parallel port as
an I2C bus directly. Instead, it uses it to control an external I2C bus
master. That driver was not ported to Linux 2.6 (yet) either.</p>
</div>
<div class="section" id="legacy-documentation-for-velleman-adapter">
<h2>Legacy documentation for Velleman adapter<a class="headerlink" href="#legacy-documentation-for-velleman-adapter" title="Permalink to this headline">¶</a></h2>
<p>Useful links:</p>
<ul class="simple">
<li>Velleman                <a class="reference external" href="http://www.velleman.be/">http://www.velleman.be/</a></li>
<li>Velleman K8000 Howto    <a class="reference external" href="http://howto.htlw16.ac.at/k8000-howto.html">http://howto.htlw16.ac.at/k8000-howto.html</a></li>
</ul>
<p>The project has lead to new libs for the Velleman K8000 and K8005:</p>
<blockquote>
<div>LIBK8000 v1.99.1 and LIBK8005 v0.21</div></blockquote>
<p>With these libs, you can control the K8000 interface card and the K8005
stepper motor card with the simple commands which are in the original
Velleman software, like SetIOchannel, ReadADchannel, SendStepCCWFull and
many more, using /dev/velleman.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://home.wanadoo.nl/hihihi/libk8000.htm">http://home.wanadoo.nl/hihihi/libk8000.htm</a></li>
<li><a class="reference external" href="http://home.wanadoo.nl/hihihi/libk8005.htm">http://home.wanadoo.nl/hihihi/libk8005.htm</a></li>
<li><a class="reference external" href="http://struyve.mine.nu:8080/index.php?block=k8000">http://struyve.mine.nu:8080/index.php?block=k8000</a></li>
<li><a class="reference external" href="http://sourceforge.net/projects/libk8005/">http://sourceforge.net/projects/libk8005/</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="one-for-all-jp1-parallel-port-adapter">
<h2>One For All JP1 parallel port adapter<a class="headerlink" href="#one-for-all-jp1-parallel-port-adapter" title="Permalink to this headline">¶</a></h2>
<p>The JP1 project revolves around a set of remote controls which expose
the I2C bus their internal configuration EEPROM lives on via a 6 pin
jumper in the battery compartment. More details can be found at:</p>
<p><a class="reference external" href="http://www.hifi-remote.com/jp1/">http://www.hifi-remote.com/jp1/</a></p>
<p>Details of the simple parallel port hardware can be found at:</p>
<p><a class="reference external" href="http://www.hifi-remote.com/jp1/hardware.shtml">http://www.hifi-remote.com/jp1/hardware.shtml</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>