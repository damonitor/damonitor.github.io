

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Intel Assabet (SA-1110 evaluation) board &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CerfBoard/Cube" href="cerf.html" />
    <link rel="prev" title="Intel StrongARM 1100" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ARM Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../arm.html">ARM Linux 2.6 and upper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../booting.html">Booting ARM Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster-pm-race-avoidance.html">Cluster-wide Power-up/power-down race avoidance algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html">Interface for registering and calling firmware-specific operations for ARM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interrupts.html">Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel_mode_neon.html">Kernel mode NEON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel_user_helpers.html">Kernel-provided User Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory.html">Kernel Memory Layout on ARM Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mem_alignment.html">Memory alignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tcm.html">ARM TCM (Tightly-Coupled Memory) handling in Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Kernel initialisation parameters on ARM Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swp_emulation.html">Software emulation of deprecated SWP instruction (CONFIG_SWP_EMULATE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uefi.html">The Unified Extensible Firmware Interface (UEFI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vlocks.html">vlocks for Bare-Metal Mutual Exclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting.html">Porting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#soc-specific-documents">SoC-specific documents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ixp4xx.html">Release Notes for Linux on Intel’s IXP4xx Network Processor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../marvel.html">ARM Marvell SoCs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../microchip.html">ARM Microchip SoCs (aka AT91)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../netwinder.html">NetWinder specific documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nwfpe/index.html">NetWinder’s floating point emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../keystone/overview.html">TI Keystone Linux Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../keystone/knav-qmss.html">Texas Instruments Keystone Navigator Queue Management SubSystem driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../omap/index.html">TI OMAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pxa/mfp.html">MFP Configuration for PXA2xx/PXA3xx Processors</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Intel StrongARM 1100</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">The Intel Assabet (SA-1110 evaluation) board</a></li>
<li class="toctree-l4"><a class="reference internal" href="cerf.html">CerfBoard/Cube</a></li>
<li class="toctree-l4"><a class="reference internal" href="lart.html">Linux Advanced Radio Terminal (LART)</a></li>
<li class="toctree-l4"><a class="reference internal" href="serial_uart.html">SA1100 serial port</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/stm32f746-overview.html">STM32F746 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/overview.html">STM32 ARM Linux Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/stm32h743-overview.html">STM32H743 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/stm32f769-overview.html">STM32F769 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/stm32f429-overview.html">STM32F429 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/stm32mp157-overview.html">STM32MP157 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sunxi.html">ARM Allwinner SoCs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samsung/index.html">Samsung SoC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samsung-s3c24xx/index.html">Samsung S3C24XX SoC Family</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sunxi/clocks.html">Frequently asked questions about the sunxi clock system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spear/overview.html">SPEAr ARM Linux Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sti/stih416-overview.html">STiH416 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sti/stih407-overview.html">STiH407 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sti/stih418-overview.html">STiH418 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sti/overview.html">STi ARM Linux Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sti/stih415-overview.html">STiH415 Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vfp/release-notes.html">Release notes for Linux Kernel VFP support code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">ARM Architecture</a> &raquo;</li>
        
          <li><a href="index.html">Intel StrongARM 1100</a> &raquo;</li>
        
      <li>The Intel Assabet (SA-1110 evaluation) board</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/arm/sa1100/assabet.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-intel-assabet-sa-1110-evaluation-board">
<h1>The Intel Assabet (SA-1110 evaluation) board<a class="headerlink" href="#the-intel-assabet-sa-1110-evaluation-board" title="Permalink to this headline">¶</a></h1>
<p>Please see:
<a class="reference external" href="http://developer.intel.com">http://developer.intel.com</a></p>
<p>Also some notes from John G Dorsey &lt;<a class="reference external" href="mailto:jd5q&#37;&#52;&#48;andrew&#46;cmu&#46;edu">jd5q<span>&#64;</span>andrew<span>&#46;</span>cmu<span>&#46;</span>edu</a>&gt;:
<a class="reference external" href="http://www.cs.cmu.edu/~wearable/software/assabet.html">http://www.cs.cmu.edu/~wearable/software/assabet.html</a></p>
<div class="section" id="building-the-kernel">
<h2>Building the kernel<a class="headerlink" href="#building-the-kernel" title="Permalink to this headline">¶</a></h2>
<p>To build the kernel with current defaults:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make assabet_defconfig
make oldconfig
make zImage
</pre></div>
</div>
<p>The resulting kernel image should be available in linux/arch/arm/boot/zImage.</p>
</div>
<div class="section" id="installing-a-bootloader">
<h2>Installing a bootloader<a class="headerlink" href="#installing-a-bootloader" title="Permalink to this headline">¶</a></h2>
<p>A couple of bootloaders able to boot Linux on Assabet are available:</p>
<p>BLOB (<a class="reference external" href="http://www.lartmaker.nl/lartware/blob/">http://www.lartmaker.nl/lartware/blob/</a>)</p>
<blockquote>
<div>BLOB is a bootloader used within the LART project.  Some contributed
patches were merged into BLOB to add support for Assabet.</div></blockquote>
<p>Compaq’s Bootldr + John Dorsey’s patch for Assabet support
(<a class="reference external" href="http://www.handhelds.org/Compaq/bootldr.html">http://www.handhelds.org/Compaq/bootldr.html</a>)
(<a class="reference external" href="http://www.wearablegroup.org/software/bootldr/">http://www.wearablegroup.org/software/bootldr/</a>)</p>
<blockquote>
<div>Bootldr is the bootloader developed by Compaq for the iPAQ Pocket PC.
John Dorsey has produced add-on patches to add support for Assabet and
the JFFS filesystem.</div></blockquote>
<p>RedBoot (<a class="reference external" href="http://sources.redhat.com/redboot/">http://sources.redhat.com/redboot/</a>)</p>
<blockquote>
<div>RedBoot is a bootloader developed by Red Hat based on the eCos RTOS
hardware abstraction layer.  It supports Assabet amongst many other
hardware platforms.</div></blockquote>
<p>RedBoot is currently the recommended choice since it’s the only one to have
networking support, and is the most actively maintained.</p>
<p>Brief examples on how to boot Linux with RedBoot are shown below.  But first
you need to have RedBoot installed in your flash memory.  A known to work
precompiled RedBoot binary is available from the following location:</p>
<ul class="simple">
<li><a class="reference external" href="ftp://ftp.netwinder.org/users/n/nico/">ftp://ftp.netwinder.org/users/n/nico/</a></li>
<li><a class="reference external" href="ftp://ftp.arm.linux.org.uk/pub/linux/arm/people/nico/">ftp://ftp.arm.linux.org.uk/pub/linux/arm/people/nico/</a></li>
<li><a class="reference external" href="ftp://ftp.handhelds.org/pub/linux/arm/sa-1100-patches/">ftp://ftp.handhelds.org/pub/linux/arm/sa-1100-patches/</a></li>
</ul>
<p>Look for redboot-assabet*.tgz.  Some installation infos are provided in
redboot-assabet*.txt.</p>
</div>
<div class="section" id="initial-redboot-configuration">
<h2>Initial RedBoot configuration<a class="headerlink" href="#initial-redboot-configuration" title="Permalink to this headline">¶</a></h2>
<p>The commands used here are explained in The RedBoot User’s Guide available
on-line at <a class="reference external" href="http://sources.redhat.com/ecos/docs.html">http://sources.redhat.com/ecos/docs.html</a>.
Please refer to it for explanations.</p>
<p>If you have a CF network card (my Assabet kit contained a CF+ LP-E from
Socket Communications Inc.), you should strongly consider using it for TFTP
file transfers.  You must insert it before RedBoot runs since it can’t detect
it dynamically.</p>
<p>To initialize the flash directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis init -f
</pre></div>
</div>
<p>To initialize the non-volatile settings, like whether you want to use BOOTP or
a static IP address, etc, use this command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fconfig -i
</pre></div>
</div>
</div>
<div class="section" id="writing-a-kernel-image-into-flash">
<h2>Writing a kernel image into flash<a class="headerlink" href="#writing-a-kernel-image-into-flash" title="Permalink to this headline">¶</a></h2>
<p>First, the kernel image must be loaded into RAM.  If you have the zImage file
available on a TFTP server:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load zImage -r -b 0x100000
</pre></div>
</div>
<p>If you rather want to use Y-Modem upload over the serial port:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load -m ymodem -r -b 0x100000
</pre></div>
</div>
<p>To write it to flash:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis create &quot;Linux kernel&quot; -b 0x100000 -l 0xc0000
</pre></div>
</div>
</div>
<div class="section" id="booting-the-kernel">
<h2>Booting the kernel<a class="headerlink" href="#booting-the-kernel" title="Permalink to this headline">¶</a></h2>
<p>The kernel still requires a filesystem to boot.  A ramdisk image can be loaded
as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load ramdisk_image.gz -r -b 0x800000
</pre></div>
</div>
<p>Again, Y-Modem upload can be used instead of TFTP by replacing the file name
by ‘-y ymodem’.</p>
<p>Now the kernel can be retrieved from flash like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis load &quot;Linux kernel&quot;
</pre></div>
</div>
<p>or loaded as described previously.  To boot the kernel:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>exec -b 0x100000 -l 0xc0000
</pre></div>
</div>
<p>The ramdisk image could be stored into flash as well, but there are better
solutions for on-flash filesystems as mentioned below.</p>
</div>
<div class="section" id="using-jffs2">
<h2>Using JFFS2<a class="headerlink" href="#using-jffs2" title="Permalink to this headline">¶</a></h2>
<p>Using JFFS2 (the Second Journalling Flash File System) is probably the most
convenient way to store a writable filesystem into flash.  JFFS2 is used in
conjunction with the MTD layer which is responsible for low-level flash
management.  More information on the Linux MTD can be found on-line at:
<a class="reference external" href="http://www.linux-mtd.infradead.org/">http://www.linux-mtd.infradead.org/</a>.  A JFFS howto with some infos about
creating JFFS/JFFS2 images is available from the same site.</p>
<p>For instance, a sample JFFS2 image can be retrieved from the same FTP sites
mentioned below for the precompiled RedBoot image.</p>
<p>To load this file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load sample_img.jffs2 -r -b 0x100000
</pre></div>
</div>
<p>The result should look like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; load sample_img.jffs2 -r -b 0x100000
Raw file loaded 0x00100000-0x00377424
</pre></div>
</div>
<p>Now we must know the size of the unallocated flash:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis free
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fis free
  0x500E0000 .. 0x503C0000
</pre></div>
</div>
<p>The values above may be different depending on the size of the filesystem and
the type of flash.  See their usage below as an example and take care of
substituting yours appropriately.</p>
<p>We must determine some values:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>size of unallocated flash:      0x503c0000 - 0x500e0000 = 0x2e0000
size of the filesystem image:   0x00377424 - 0x00100000 = 0x277424
</pre></div>
</div>
<p>We want to fit the filesystem image of course, but we also want to give it all
the remaining flash space as well.  To write it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis unlock -f 0x500E0000 -l 0x2e0000
fis erase -f 0x500E0000 -l 0x2e0000
fis write -b 0x100000 -l 0x277424 -f 0x500E0000
fis create &quot;JFFS2&quot; -n -f 0x500E0000 -l 0x2e0000
</pre></div>
</div>
<p>Now the filesystem is associated to a MTD “partition” once Linux has discovered
what they are in the boot process.  From Redboot, the ‘fis list’ command
displays them:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fis list
Name              FLASH addr  Mem addr    Length      Entry point
RedBoot           0x50000000  0x50000000  0x00020000  0x00000000
RedBoot config    0x503C0000  0x503C0000  0x00020000  0x00000000
FIS directory     0x503E0000  0x503E0000  0x00020000  0x00000000
Linux kernel      0x50020000  0x00100000  0x000C0000  0x00000000
JFFS2             0x500E0000  0x500E0000  0x002E0000  0x00000000
</pre></div>
</div>
<p>However Linux should display something like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SA1100 flash: probing 32-bit flash bus
SA1100 flash: Found 2 x16 devices at 0x0 in 32-bit mode
Using RedBoot partition definition
Creating 5 MTD partitions on &quot;SA1100 flash&quot;:
0x00000000-0x00020000 : &quot;RedBoot&quot;
0x00020000-0x000e0000 : &quot;Linux kernel&quot;
0x000e0000-0x003c0000 : &quot;JFFS2&quot;
0x003c0000-0x003e0000 : &quot;RedBoot config&quot;
0x003e0000-0x00400000 : &quot;FIS directory&quot;
</pre></div>
</div>
<p>What’s important here is the position of the partition we are interested in,
which is the third one.  Within Linux, this correspond to /dev/mtdblock2.
Therefore to boot Linux with the kernel and its root filesystem in flash, we
need this RedBoot command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis load &quot;Linux kernel&quot;
exec -b 0x100000 -l 0xc0000 -c &quot;root=/dev/mtdblock2&quot;
</pre></div>
</div>
<p>Of course other filesystems than JFFS might be used, like cramfs for example.
You might want to boot with a root filesystem over NFS, etc.  It is also
possible, and sometimes more convenient, to flash a filesystem directly from
within Linux while booted from a ramdisk or NFS.  The Linux MTD repository has
many tools to deal with flash memory as well, to erase it for example.  JFFS2
can then be mounted directly on a freshly erased partition and files can be
copied over directly.  Etc…</p>
</div>
<div class="section" id="redboot-scripting">
<h2>RedBoot scripting<a class="headerlink" href="#redboot-scripting" title="Permalink to this headline">¶</a></h2>
<p>All the commands above aren’t so useful if they have to be typed in every
time the Assabet is rebooted.  Therefore it’s possible to automate the boot
process using RedBoot’s scripting capability.</p>
<p>For example, I use this to boot Linux with both the kernel and the ramdisk
images retrieved from a TFTP server on the network:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fconfig
Run script at boot: false true
Boot script:
Enter script, terminate with empty line
&gt;&gt; load zImage -r -b 0x100000
&gt;&gt; load ramdisk_ks.gz -r -b 0x800000
&gt;&gt; exec -b 0x100000 -l 0xc0000
&gt;&gt;
Boot script timeout (1000ms resolution): 3
Use BOOTP for network configuration: true
GDB connection port: 9000
Network debug at boot time: false
Update RedBoot non-volatile configuration - are you sure (y/n)? y
</pre></div>
</div>
<p>Then, rebooting the Assabet is just a matter of waiting for the login prompt.</p>
<p>Nicolas Pitre
<a class="reference external" href="mailto:nico&#37;&#52;&#48;fluxnic&#46;net">nico<span>&#64;</span>fluxnic<span>&#46;</span>net</a></p>
<p>June 12, 2001</p>
</div>
<div class="section" id="status-of-peripherals-in-rmk-tree-updated-14-10-2001">
<h2>Status of peripherals in -rmk tree (updated 14/10/2001)<a class="headerlink" href="#status-of-peripherals-in-rmk-tree-updated-14-10-2001" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Assabet:</dt>
<dd><dl class="first last docutils">
<dt>Serial ports:</dt>
<dd><dl class="first last docutils">
<dt>Radio:                TX, RX, CTS, DSR, DCD, RI</dt>
<dd><ul class="first last simple">
<li>PM:                Not tested.</li>
<li>COM:               TX, RX, CTS, DSR, DCD, RTS, DTR, PM</li>
<li>PM:                Not tested.</li>
<li>I2C:               Implemented, not fully tested.</li>
<li>L3:                Fully tested, pass.</li>
<li>PM:                Not tested.</li>
</ul>
</dd>
</dl>
</dd>
<dt>Video:</dt>
<dd><ul class="first simple">
<li>LCD:                Fully tested.  PM</li>
</ul>
<blockquote>
<div>(LCD doesn’t like being blanked with neponset connected)</div></blockquote>
<ul class="last simple">
<li>Video out:          Not fully</li>
</ul>
</dd>
<dt>Audio:</dt>
<dd><p class="first">UDA1341:
-  Playback:          Fully tested, pass.
-  Record:            Implemented, not tested.
-  PM:                        Not tested.</p>
<p class="last">UCB1200:
-  Audio play:        Implemented, not heavily tested.
-  Audio rec:         Implemented, not heavily tested.
-  Telco audio play:  Implemented, not heavily tested.
-  Telco audio rec:   Implemented, not heavily tested.
-  POTS control:      No
-  Touchscreen:       Yes
-  PM:                Not tested.</p>
</dd>
<dt>Other:</dt>
<dd><ul class="first last simple">
<li>PCMCIA:</li>
<li>LPE:                Fully tested, pass.</li>
<li>USB:                No</li>
<li>IRDA:</li>
<li>SIR:                Fully tested, pass.</li>
<li>FIR:                Fully tested, pass.</li>
<li>PM:                 Not tested.</li>
</ul>
</dd>
</dl>
</dd>
<dt>Neponset:</dt>
<dd><dl class="first last docutils">
<dt>Serial ports:</dt>
<dd><ul class="first last simple">
<li>COM1,2:             TX, RX, CTS, DSR, DCD, RTS, DTR</li>
<li>PM:                 Not tested.</li>
<li>USB:                Implemented, not heavily tested.</li>
<li>PCMCIA:             Implemented, not heavily tested.</li>
<li>CF:                 Implemented, not heavily tested.</li>
<li>PM:                 Not tested.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p>More stuff can be found in the -np (Nicolas Pitre’s) tree.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cerf.html" class="btn btn-neutral float-right" title="CerfBoard/Cube" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Intel StrongARM 1100" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>