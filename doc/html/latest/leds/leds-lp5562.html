

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel driver for lp5562 &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LP5521/LP5523/LP55231/LP5562/LP8501 Common Driver" href="leds-lp55xx.html" />
    <link rel="prev" title="Kernel driver for lp5523" href="leds-lp5523.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">LEDs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="leds-class.html">LED handling under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-class-flash.html">Flash LED handling under Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledtrig-oneshot.html">One-shot LED Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledtrig-transient.html">LED Transient Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledtrig-usbport.html">USB port LED trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="uleds.html">Userspace LEDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-blinkm.html">Leds BlinkM driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-lm3556.html">Kernel driver for lm3556</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-lp3944.html">Kernel driver lp3944</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-lp5521.html">Kernel driver for lp5521</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-lp5523.html">Kernel driver for lp5523</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Kernel driver for lp5562</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#device-attribute">Device attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-load-the-program-data-using-engine-mux">How to load the program data using engine_mux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-load-the-predefined-patterns">How to load the predefined patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-current-of-each-channel">Setting Current of Each Channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-of-platform-data">Example of Platform data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="leds-lp55xx.html">LP5521/LP5523/LP55231/LP5562/LP8501 Common Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="leds-mlxcpld.html">Kernel driver for Mellanox systems LEDs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">LEDs</a> &raquo;</li>
        
      <li>Kernel driver for lp5562</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/leds/leds-lp5562.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-driver-for-lp5562">
<h1>Kernel driver for lp5562<a class="headerlink" href="#kernel-driver-for-lp5562" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>TI LP5562 LED Driver</li>
</ul>
<p>Author: Milo(Woogyom) Kim &lt;<a class="reference external" href="mailto:milo&#46;kim&#37;&#52;&#48;ti&#46;com">milo<span>&#46;</span>kim<span>&#64;</span>ti<span>&#46;</span>com</a>&gt;</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>LP5562 can drive up to 4 channels. R/G/B and White.
LEDs can be controlled directly via the led class control interface.</p>
<p>All four channels can be also controlled using the engine micro programs.
LP5562 has the internal program memory for running various LED patterns.
For the details, please refer to ‘firmware’ section in leds-lp55xx.txt</p>
</div></blockquote>
</div>
<div class="section" id="device-attribute">
<h2>Device attribute<a class="headerlink" href="#device-attribute" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>engine_mux</dt>
<dd><p class="first">3 Engines are allocated in LP5562, but the number of channel is 4.
Therefore each channel should be mapped to the engine number.</p>
<p>Value: RGB or W</p>
<p>This attribute is used for programming LED data with the firmware interface.
Unlike the LP5521/LP5523/55231, LP5562 has unique feature for the engine mux,
so additional sysfs is required</p>
<p>LED Map</p>
<table border="1" class="last docutils">
<colgroup>
<col width="13%" />
<col width="8%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Red</td>
<td>…</td>
<td>Engine 1 (fixed)</td>
</tr>
<tr class="row-even"><td>Green</td>
<td>…</td>
<td>Engine 2 (fixed)</td>
</tr>
<tr class="row-odd"><td>Blue</td>
<td>…</td>
<td>Engine 3 (fixed)</td>
</tr>
<tr class="row-even"><td>White</td>
<td>…</td>
<td>Engine 1 or 2 or 3 (selective)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="how-to-load-the-program-data-using-engine-mux">
<h2>How to load the program data using engine_mux<a class="headerlink" href="#how-to-load-the-program-data-using-engine-mux" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Before loading the LP5562 program data, engine_mux should be written between
the engine selection and loading the firmware.
Engine mux has two different mode, RGB and W.
RGB is used for loading RGB program data, W is used for W program data.</p>
<p>For example, run blinking green channel pattern:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 2 &gt; /sys/bus/i2c/devices/xxxx/select_engine     # 2 is for green channel
echo &quot;RGB&quot; &gt; /sys/bus/i2c/devices/xxxx/engine_mux    # engine mux for RGB
echo 1 &gt; /sys/class/firmware/lp5562/loading
echo &quot;4000600040FF6000&quot; &gt; /sys/class/firmware/lp5562/data
echo 0 &gt; /sys/class/firmware/lp5562/loading
echo 1 &gt; /sys/bus/i2c/devices/xxxx/run_engine
</pre></div>
</div>
<p>To run a blinking white pattern:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 1 or 2 or 3 &gt; /sys/bus/i2c/devices/xxxx/select_engine
echo &quot;W&quot; &gt; /sys/bus/i2c/devices/xxxx/engine_mux
echo 1 &gt; /sys/class/firmware/lp5562/loading
echo &quot;4000600040FF6000&quot; &gt; /sys/class/firmware/lp5562/data
echo 0 &gt; /sys/class/firmware/lp5562/loading
echo 1 &gt; /sys/bus/i2c/devices/xxxx/run_engine
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-load-the-predefined-patterns">
<h2>How to load the predefined patterns<a class="headerlink" href="#how-to-load-the-predefined-patterns" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Please refer to ‘leds-lp55xx.txt”</div></blockquote>
</div>
<div class="section" id="setting-current-of-each-channel">
<h2>Setting Current of Each Channel<a class="headerlink" href="#setting-current-of-each-channel" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Like LP5521 and LP5523/55231, LP5562 provides LED current settings.
The ‘led_current’ and ‘max_current’ are used.</div></blockquote>
</div>
<div class="section" id="example-of-platform-data">
<h2>Example of Platform data<a class="headerlink" href="#example-of-platform-data" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static struct lp55xx_led_config lp5562_led_config[] = {
        {
                .name           = &quot;R&quot;,
                .chan_nr        = 0,
                .led_current    = 20,
                .max_current    = 40,
        },
        {
                .name           = &quot;G&quot;,
                .chan_nr        = 1,
                .led_current    = 20,
                .max_current    = 40,
        },
        {
                .name           = &quot;B&quot;,
                .chan_nr        = 2,
                .led_current    = 20,
                .max_current    = 40,
        },
        {
                .name           = &quot;W&quot;,
                .chan_nr        = 3,
                .led_current    = 20,
                .max_current    = 40,
        },
};

static int lp5562_setup(void)
{
        /* setup HW resources */
}

static void lp5562_release(void)
{
        /* Release HW resources */
}

static void lp5562_enable(bool state)
{
        /* Control of chip enable signal */
}

static struct lp55xx_platform_data lp5562_platform_data = {
        .led_config     = lp5562_led_config,
        .num_channels   = ARRAY_SIZE(lp5562_led_config),
        .setup_resources   = lp5562_setup,
        .release_resources = lp5562_release,
        .enable            = lp5562_enable,
};
</pre></div>
</div>
<p>To configure the platform specific data, lp55xx_platform_data structure is used</p>
<p>If the current is set to 0 in the platform data, that channel is
disabled and it is not visible in the sysfs.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="leds-lp55xx.html" class="btn btn-neutral float-right" title="LP5521/LP5523/LP55231/LP5562/LP8501 Common Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="leds-lp5523.html" class="btn btn-neutral float-left" title="Kernel driver for lp5523" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>