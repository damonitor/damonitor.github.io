

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Naming and data format standards for sysfs files &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Userspace tools" href="userspace-tools.html" />
    <link rel="prev" title="How to Get Your Patch Accepted Into the Hwmon Subsystem" href="submitting-patches.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linux Hardware Monitoring</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hwmon-kernel-api.html">The Linux Hardware Monitoring kernel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pmbus-core.html">PMBus core driver and internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspur-ipsps1.html">Kernel driver inspur-ipsps1</a></li>
<li class="toctree-l2"><a class="reference internal" href="submitting-patches.html">How to Get Your Patch Accepted Into the Hwmon Subsystem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Naming and data format standards for sysfs files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-attributes">Global attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#voltages">Voltages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fans">Fans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pwm">PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temperatures">Temperatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#currents">Currents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#power">Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="#energy">Energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#humidity">Humidity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alarms">Alarms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#intrusion-detection">Intrusion detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#average-sample-configuration">Average sample configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sysfs-attribute-writes-interpretation">sysfs attribute writes interpretation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="userspace-tools.html">Userspace tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hardware-monitoring-kernel-drivers">Hardware Monitoring Kernel Drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Linux Hardware Monitoring</a> &raquo;</li>
        
      <li>Naming and data format standards for sysfs files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/hwmon/sysfs-interface.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="naming-and-data-format-standards-for-sysfs-files">
<h1>Naming and data format standards for sysfs files<a class="headerlink" href="#naming-and-data-format-standards-for-sysfs-files" title="Permalink to this headline">¶</a></h1>
<p>The libsensors library offers an interface to the raw sensors data
through the sysfs interface. Since lm-sensors 3.0.0, libsensors is
completely chip-independent. It assumes that all the kernel drivers
implement the standard sysfs interface described in this document.
This makes adding or updating support for any given chip very easy, as
libsensors, and applications using it, do not need to be modified.
This is a major improvement compared to lm-sensors 2.</p>
<p>Note that motherboards vary widely in the connections to sensor chips.
There is no standard that ensures, for example, that the second
temperature sensor is connected to the CPU, or that the second fan is on
the CPU. Also, some values reported by the chips need some computation
before they make full sense. For example, most chips can only measure
voltages between 0 and +4V. Other voltages are scaled back into that
range using external resistors. Since the values of these resistors
can change from motherboard to motherboard, the conversions cannot be
hard coded into the driver and have to be done in user space.</p>
<p>For this reason, even if we aim at a chip-independent libsensors, it will
still require a configuration file (e.g. /etc/sensors.conf) for proper
values conversion, labeling of inputs and hiding of unused inputs.</p>
<p>An alternative method that some programs use is to access the sysfs
files directly. This document briefly describes the standards that the
drivers follow, so that an application program can scan for entries and
access this data in a simple and consistent way. That said, such programs
will have to implement conversion, labeling and hiding of inputs. For
this reason, it is still not recommended to bypass the library.</p>
<p>Each chip gets its own directory in the sysfs /sys/devices tree.  To
find all sensor chips, it is easier to follow the device symlinks from
<cite>/sys/class/hwmon/hwmon*</cite>.</p>
<p>Up to lm-sensors 3.0.0, libsensors looks for hardware monitoring attributes
in the “physical” device directory. Since lm-sensors 3.0.1, attributes found
in the hwmon “class” device directory are also supported. Complex drivers
(e.g. drivers for multifunction chips) may want to use this possibility to
avoid namespace pollution. The only drawback will be that older versions of
libsensors won’t support the driver in question.</p>
<p>All sysfs values are fixed point numbers.</p>
<p>There is only one value per file, unlike the older /proc specification.
The common scheme for files naming is: &lt;type&gt;&lt;number&gt;_&lt;item&gt;. Usual
types for sensor chips are “in” (voltage), “temp” (temperature) and
“fan” (fan). Usual items are “input” (measured value), “max” (high
threshold, “min” (low threshold). Numbering usually starts from 1,
except for voltages which start from 0 (because most data sheets use
this). A number is always used for elements that can be present more
than once, even if there is a single element of the given type on the
specific chip. Other files do not refer to a specific element, so
they have a simple name, and no number.</p>
<p>Alarms are direct indications read from the chips. The drivers do NOT
make comparisons of readings to thresholds. This allows violations
between readings to be caught and alarmed. The exact definition of an
alarm (for example, whether a threshold must be met or must be exceeded
to cause an alarm) is chip-dependent.</p>
<p>When setting values of hwmon sysfs attributes, the string representation of
the desired value must be written, note that strings which are not a number
are interpreted as 0! For more on how written strings are interpreted see the
“sysfs attribute writes interpretation” section at the end of this file.</p>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><cite>[0-*]</cite></td>
<td>denotes any positive number starting from 0</td>
</tr>
<tr class="row-even"><td><cite>[1-*]</cite></td>
<td>denotes any positive number starting from 1</td>
</tr>
<tr class="row-odd"><td>RO</td>
<td>read only value</td>
</tr>
<tr class="row-even"><td>WO</td>
<td>write only value</td>
</tr>
<tr class="row-odd"><td>RW</td>
<td>read/write value</td>
</tr>
</tbody>
</table>
<p>Read/write values may be read-only for some chips, depending on the
hardware implementation.</p>
<p>All entries (except name) are optional, and should only be created in a
given driver if the chip has the feature.</p>
<div class="section" id="global-attributes">
<h2>Global attributes<a class="headerlink" href="#global-attributes" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>name</cite></dt>
<dd><p class="first">The chip name.
This should be a short, lowercase string, not containing
whitespace, dashes, or the wildcard character ‘*’.
This attribute represents the chip name. It is the only
mandatory attribute.
I2C devices get this attribute created automatically.</p>
<p class="last">RO</p>
</dd>
<dt><cite>update_interval</cite></dt>
<dd><p class="first">The interval at which the chip will update readings.
Unit: millisecond</p>
<p>RW</p>
<p class="last">Some devices have a variable update rate or interval.
This attribute can be used to change it to the desired value.</p>
</dd>
</dl>
</div>
<div class="section" id="voltages">
<h2>Voltages<a class="headerlink" href="#voltages" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>in[0-*]_min</cite></dt>
<dd><p class="first">Voltage min value.</p>
<p>Unit: millivolt</p>
<p class="last">RW</p>
</dd>
<dt><cite>in[0-*]_lcrit</cite></dt>
<dd><p class="first">Voltage critical min value.</p>
<p>Unit: millivolt</p>
<p>RW</p>
<p class="last">If voltage drops to or below this limit, the system may
take drastic action such as power down or reset. At the very
least, it should report a fault.</p>
</dd>
<dt><cite>in[0-*]_max</cite></dt>
<dd><p class="first">Voltage max value.</p>
<p>Unit: millivolt</p>
<p class="last">RW</p>
</dd>
<dt><cite>in[0-*]_crit</cite></dt>
<dd><p class="first">Voltage critical max value.</p>
<p>Unit: millivolt</p>
<p>RW</p>
<p class="last">If voltage reaches or exceeds this limit, the system may
take drastic action such as power down or reset. At the very
least, it should report a fault.</p>
</dd>
<dt><cite>in[0-*]_input</cite></dt>
<dd><p class="first">Voltage input value.</p>
<p>Unit: millivolt</p>
<p>RO</p>
<p>Voltage measured on the chip pin.</p>
<p>Actual voltage depends on the scaling resistors on the
motherboard, as recommended in the chip datasheet.</p>
<p class="last">This varies by chip and by motherboard.
Because of this variation, values are generally NOT scaled
by the chip driver, and must be done by the application.
However, some drivers (notably lm87 and via686a)
do scale, because of internal resistors built into a chip.
These drivers will output the actual voltage. Rule of
thumb: drivers should report the voltage values at the
“pins” of the chip.</p>
</dd>
<dt><cite>in[0-*]_average</cite></dt>
<dd><p class="first">Average voltage</p>
<p>Unit: millivolt</p>
<p class="last">RO</p>
</dd>
<dt><cite>in[0-*]_lowest</cite></dt>
<dd><p class="first">Historical minimum voltage</p>
<p>Unit: millivolt</p>
<p class="last">RO</p>
</dd>
<dt><cite>in[0-*]_highest</cite></dt>
<dd><p class="first">Historical maximum voltage</p>
<p>Unit: millivolt</p>
<p class="last">RO</p>
</dd>
<dt><cite>in[0-*]_reset_history</cite></dt>
<dd><p class="first">Reset inX_lowest and inX_highest</p>
<p class="last">WO</p>
</dd>
<dt><cite>in_reset_history</cite></dt>
<dd><p class="first">Reset inX_lowest and inX_highest for all sensors</p>
<p class="last">WO</p>
</dd>
<dt><cite>in[0-*]_label</cite></dt>
<dd><p class="first">Suggested voltage channel label.</p>
<p>Text string</p>
<p>Should only be created if the driver has hints about what
this voltage channel is being used for, and user-space
doesn’t. In all other cases, the label is provided by
user-space.</p>
<p class="last">RO</p>
</dd>
<dt><cite>in[0-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return -ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
<dt><cite>cpu[0-*]_vid</cite></dt>
<dd><p class="first">CPU core reference voltage.</p>
<p>Unit: millivolt</p>
<p>RO</p>
<p class="last">Not always correct.</p>
</dd>
<dt><cite>vrm</cite></dt>
<dd><p class="first">Voltage Regulator Module version number.</p>
<p>RW (but changing it should no more be necessary)</p>
<p>Originally the VRM standard version multiplied by 10, but now
an arbitrary number, as not all standards have a version
number.</p>
<p class="last">Affects the way the driver calculates the CPU core reference
voltage from the vid pins.</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with voltages.</p>
</div>
<div class="section" id="fans">
<h2>Fans<a class="headerlink" href="#fans" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>fan[1-*]_min</cite></dt>
<dd><p class="first">Fan minimum value</p>
<p>Unit: revolution/min (RPM)</p>
<p class="last">RW</p>
</dd>
<dt><cite>fan[1-*]_max</cite></dt>
<dd><p class="first">Fan maximum value</p>
<p>Unit: revolution/min (RPM)</p>
<p class="last">Only rarely supported by the hardware.
RW</p>
</dd>
<dt><cite>fan[1-*]_input</cite></dt>
<dd><p class="first">Fan input value.</p>
<p>Unit: revolution/min (RPM)</p>
<p class="last">RO</p>
</dd>
<dt><cite>fan[1-*]_div</cite></dt>
<dd><p class="first">Fan divisor.</p>
<p>Integer value in powers of two (1, 2, 4, 8, 16, 32, 64, 128).</p>
<p>RW</p>
<p class="last">Some chips only support values 1, 2, 4 and 8.
Note that this is actually an internal clock divisor, which
affects the measurable speed range, not the read value.</p>
</dd>
<dt><cite>fan[1-*]_pulses</cite></dt>
<dd><p class="first">Number of tachometer pulses per fan revolution.</p>
<p>Integer value, typically between 1 and 4.</p>
<p>RW</p>
<p>This value is a characteristic of the fan connected to the
device’s input, so it has to be set in accordance with the fan
model.</p>
<p class="last">Should only be created if the chip has a register to configure
the number of pulses. In the absence of such a register (and
thus attribute) the value assumed by all devices is 2 pulses
per fan revolution.</p>
</dd>
<dt><cite>fan[1-*]_target</cite></dt>
<dd><p class="first">Desired fan speed</p>
<p>Unit: revolution/min (RPM)</p>
<p>RW</p>
<p class="last">Only makes sense if the chip supports closed-loop fan speed
control based on the measured fan speed.</p>
</dd>
<dt><cite>fan[1-*]_label</cite></dt>
<dd><p class="first">Suggested fan channel label.</p>
<p>Text string</p>
<p>Should only be created if the driver has hints about what
this fan channel is being used for, and user-space doesn’t.
In all other cases, the label is provided by user-space.</p>
<p class="last">RO</p>
</dd>
<dt><cite>fan[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return -ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with fans.</p>
</div>
<div class="section" id="pwm">
<h2>PWM<a class="headerlink" href="#pwm" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>pwm[1-*]</cite></dt>
<dd><p class="first">Pulse width modulation fan control.</p>
<p>Integer value in the range 0 to 255</p>
<p>RW</p>
<p class="last">255 is max or 100%.</p>
</dd>
<dt><cite>pwm[1-*]_enable</cite></dt>
<dd><p class="first">Fan speed control method:</p>
<ul class="simple">
<li>0: no fan speed control (i.e. fan at full speed)</li>
<li>1: manual fan speed control enabled (using <cite>pwm[1-*]</cite>)</li>
<li>2+: automatic fan speed control enabled</li>
</ul>
<p>Check individual chip documentation files for automatic mode
details.</p>
<p class="last">RW</p>
</dd>
<dt><cite>pwm[1-*]_mode</cite></dt>
<dd><ul class="first simple">
<li>0: DC mode (direct current)</li>
<li>1: PWM mode (pulse-width modulation)</li>
</ul>
<p class="last">RW</p>
</dd>
<dt><cite>pwm[1-*]_freq</cite></dt>
<dd><p class="first">Base PWM frequency in Hz.</p>
<p>Only possibly available when pwmN_mode is PWM, but not always
present even then.</p>
<p class="last">RW</p>
</dd>
<dt><cite>pwm[1-*]_auto_channels_temp</cite></dt>
<dd><p class="first">Select which temperature channels affect this PWM output in
auto mode.</p>
<p>Bitfield, 1 is temp1, 2 is temp2, 4 is temp3 etc…
Which values are possible depend on the chip used.</p>
<p class="last">RW</p>
</dd>
<dt><cite>pwm[1-*]_auto_point[1-*]_pwm</cite> / <cite>pwm[1-*]_auto_point[1-*]_temp</cite> / <cite>pwm[1-*]_auto_point[1-*]_temp_hyst</cite></dt>
<dd><p class="first">Define the PWM vs temperature curve.</p>
<p>Number of trip points is chip-dependent. Use this for chips
which associate trip points to PWM output channels.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_auto_point[1-*]_pwm</cite> / <cite>temp[1-*]_auto_point[1-*]_temp</cite> / <cite>temp[1-*]_auto_point[1-*]_temp_hyst</cite></dt>
<dd><p class="first">Define the PWM vs temperature curve.</p>
<p>Number of trip points is chip-dependent. Use this for chips
which associate trip points to temperature channels.</p>
<p class="last">RW</p>
</dd>
</dl>
<p>There is a third case where trip points are associated to both PWM output
channels and temperature channels: the PWM values are associated to PWM
output channels while the temperature values are associated to temperature
channels. In that case, the result is determined by the mapping between
temperature inputs and PWM outputs. When several temperature inputs are
mapped to a given PWM output, this leads to several candidate PWM values.
The actual result is up to the chip, but in general the highest candidate
value (fastest fan speed) wins.</p>
</div>
<div class="section" id="temperatures">
<h2>Temperatures<a class="headerlink" href="#temperatures" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>temp[1-*]_type</cite></dt>
<dd><p class="first">Sensor type selection.</p>
<p>Integers 1 to 6</p>
<p>RW</p>
<ul class="simple">
<li>1: CPU embedded diode</li>
<li>2: 3904 transistor</li>
<li>3: thermal diode</li>
<li>4: thermistor</li>
<li>5: AMD AMDSI</li>
<li>6: Intel PECI</li>
</ul>
<p class="last">Not all types are supported by all chips</p>
</dd>
<dt><cite>temp[1-*]_max</cite></dt>
<dd><p class="first">Temperature max value.</p>
<p>Unit: millidegree Celsius (or millivolt, see below)</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_min</cite></dt>
<dd><p class="first">Temperature min value.</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_max_hyst</cite></dt>
<dd><p class="first">Temperature hysteresis value for max limit.</p>
<p>Unit: millidegree Celsius</p>
<p>Must be reported as an absolute temperature, NOT a delta
from the max value.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_min_hyst</cite></dt>
<dd><p class="first">Temperature hysteresis value for min limit.
Unit: millidegree Celsius</p>
<p>Must be reported as an absolute temperature, NOT a delta
from the min value.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_input</cite></dt>
<dd><p class="first">Temperature input value.</p>
<blockquote class="last">
<div><p>Unit: millidegree Celsius</p>
<p>RO</p>
</div></blockquote>
</dd>
<dt><cite>temp[1-*]_crit</cite></dt>
<dd><p class="first">Temperature critical max value, typically greater than
corresponding temp_max values.</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_crit_hyst</cite></dt>
<dd><p class="first">Temperature hysteresis value for critical limit.</p>
<p>Unit: millidegree Celsius</p>
<p>Must be reported as an absolute temperature, NOT a delta
from the critical value.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_emergency</cite></dt>
<dd><p class="first">Temperature emergency max value, for chips supporting more than
two upper temperature limits. Must be equal or greater than
corresponding temp_crit values.</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_emergency_hyst</cite></dt>
<dd><p class="first">Temperature hysteresis value for emergency limit.</p>
<p>Unit: millidegree Celsius</p>
<p>Must be reported as an absolute temperature, NOT a delta
from the emergency value.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_lcrit</cite></dt>
<dd><p class="first">Temperature critical min value, typically lower than
corresponding temp_min values.</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_lcrit_hyst</cite></dt>
<dd><p class="first">Temperature hysteresis value for critical min limit.</p>
<p>Unit: millidegree Celsius</p>
<p>Must be reported as an absolute temperature, NOT a delta
from the critical min value.</p>
<p class="last">RW</p>
</dd>
<dt><cite>temp[1-*]_offset</cite></dt>
<dd><p class="first">Temperature offset which is added to the temperature reading
by the chip.</p>
<p>Unit: millidegree Celsius</p>
<p class="last">Read/Write value.</p>
</dd>
<dt><cite>temp[1-*]_label</cite></dt>
<dd><p class="first">Suggested temperature channel label.</p>
<p>Text string</p>
<p>Should only be created if the driver has hints about what
this temperature channel is being used for, and user-space
doesn’t. In all other cases, the label is provided by
user-space.</p>
<p class="last">RO</p>
</dd>
<dt><cite>temp[1-*]_lowest</cite></dt>
<dd><p class="first">Historical minimum temperature</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RO</p>
</dd>
<dt><cite>temp[1-*]_highest</cite></dt>
<dd><p class="first">Historical maximum temperature</p>
<p>Unit: millidegree Celsius</p>
<p class="last">RO</p>
</dd>
<dt><cite>temp[1-*]_reset_history</cite></dt>
<dd><p class="first">Reset temp_lowest and temp_highest</p>
<p class="last">WO</p>
</dd>
<dt><cite>temp_reset_history</cite></dt>
<dd><p class="first">Reset temp_lowest and temp_highest for all sensors</p>
<p class="last">WO</p>
</dd>
<dt><cite>temp[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return -ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
<p>Some chips measure temperature using external thermistors and an ADC, and
report the temperature measurement as a voltage. Converting this voltage
back to a temperature (or the other way around for limits) requires
mathematical functions not available in the kernel, so the conversion
must occur in user space. For these chips, all temp* files described
above should contain values expressed in millivolt instead of millidegree
Celsius. In other words, such temperature channels are handled as voltage
channels by the driver.</p>
<p>Also see the Alarms section for status flags associated with temperatures.</p>
</div>
<div class="section" id="currents">
<h2>Currents<a class="headerlink" href="#currents" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>curr[1-*]_max</cite></dt>
<dd><p class="first">Current max value</p>
<p>Unit: milliampere</p>
<p class="last">RW</p>
</dd>
<dt><cite>curr[1-*]_min</cite></dt>
<dd><p class="first">Current min value.</p>
<p>Unit: milliampere</p>
<p class="last">RW</p>
</dd>
<dt><cite>curr[1-*]_lcrit</cite></dt>
<dd><p class="first">Current critical low value</p>
<p>Unit: milliampere</p>
<p class="last">RW</p>
</dd>
<dt><cite>curr[1-*]_crit</cite></dt>
<dd><p class="first">Current critical high value.</p>
<p>Unit: milliampere</p>
<p class="last">RW</p>
</dd>
<dt><cite>curr[1-*]_input</cite></dt>
<dd><p class="first">Current input value</p>
<p>Unit: milliampere</p>
<p class="last">RO</p>
</dd>
<dt><cite>curr[1-*]_average</cite></dt>
<dd><p class="first">Average current use</p>
<p>Unit: milliampere</p>
<p class="last">RO</p>
</dd>
<dt><cite>curr[1-*]_lowest</cite></dt>
<dd><p class="first">Historical minimum current</p>
<p>Unit: milliampere</p>
<p class="last">RO</p>
</dd>
<dt><cite>curr[1-*]_highest</cite></dt>
<dd>Historical maximum current
Unit: milliampere
RO</dd>
<dt><cite>curr[1-*]_reset_history</cite></dt>
<dd><p class="first">Reset currX_lowest and currX_highest</p>
<p class="last">WO</p>
</dd>
<dt><cite>curr_reset_history</cite></dt>
<dd><p class="first">Reset currX_lowest and currX_highest for all sensors</p>
<p class="last">WO</p>
</dd>
<dt><cite>curr[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return -ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with currents.</p>
</div>
<div class="section" id="power">
<h2>Power<a class="headerlink" href="#power" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>power[1-*]_average</cite></dt>
<dd><p class="first">Average power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_average_interval</cite></dt>
<dd><p class="first">Power use averaging interval.  A poll
notification is sent to this file if the
hardware changes the averaging interval.</p>
<p>Unit: milliseconds</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_average_interval_max</cite></dt>
<dd><p class="first">Maximum power use averaging interval</p>
<p>Unit: milliseconds</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_average_interval_min</cite></dt>
<dd><p class="first">Minimum power use averaging interval</p>
<p>Unit: milliseconds</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_average_highest</cite></dt>
<dd><p class="first">Historical average maximum power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_average_lowest</cite></dt>
<dd><p class="first">Historical average minimum power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_average_max</cite></dt>
<dd><p class="first">A poll notification is sent to
<cite>power[1-*]_average</cite> when power use
rises above this value.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_average_min</cite></dt>
<dd><p class="first">A poll notification is sent to
<cite>power[1-*]_average</cite> when power use
sinks below this value.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_input</cite></dt>
<dd><p class="first">Instantaneous power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_input_highest</cite></dt>
<dd><p class="first">Historical maximum power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_input_lowest</cite></dt>
<dd><p class="first">Historical minimum power use</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_reset_history</cite></dt>
<dd><p class="first">Reset input_highest, input_lowest,
average_highest and average_lowest.</p>
<p class="last">WO</p>
</dd>
<dt><cite>power[1-*]_accuracy</cite></dt>
<dd><p class="first">Accuracy of the power meter.</p>
<p>Unit: Percent</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_cap</cite></dt>
<dd><p class="first">If power use rises above this limit, the
system should take action to reduce power use.
A poll notification is sent to this file if the
cap is changed by the hardware.  The <cite>*_cap</cite>
files only appear if the cap is known to be
enforced by hardware.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_cap_hyst</cite></dt>
<dd><p class="first">Margin of hysteresis built around capping and
notification.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_cap_max</cite></dt>
<dd><p class="first">Maximum cap that can be set.</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_cap_min</cite></dt>
<dd><p class="first">Minimum cap that can be set.</p>
<p>Unit: microWatt</p>
<p class="last">RO</p>
</dd>
<dt><cite>power[1-*]_max</cite></dt>
<dd><p class="first">Maximum power.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_crit</cite></dt>
<dd><p class="first">Critical maximum power.</p>
<p>If power rises to or above this limit, the
system is expected take drastic action to reduce
power consumption, such as a system shutdown or
a forced powerdown of some devices.</p>
<p>Unit: microWatt</p>
<p class="last">RW</p>
</dd>
<dt><cite>power[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return
-ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with power readings.</p>
</div>
<div class="section" id="energy">
<h2>Energy<a class="headerlink" href="#energy" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>energy[1-*]_input</cite></dt>
<dd><p class="first">Cumulative energy use</p>
<p>Unit: microJoule</p>
<p class="last">RO</p>
</dd>
<dt><cite>energy[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors.</p>
<p>When disabled the sensor read will return
-ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
</div>
<div class="section" id="humidity">
<h2>Humidity<a class="headerlink" href="#humidity" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>humidity[1-*]_input</cite></dt>
<dd><p class="first">Humidity</p>
<p>Unit: milli-percent (per cent mille, pcm)</p>
<p class="last">RO</p>
</dd>
<dt><cite>humidity[1-*]_enable</cite></dt>
<dd><p class="first">Enable or disable the sensors</p>
<p>When disabled the sensor read will return
-ENODATA.</p>
<ul class="simple">
<li>1: Enable</li>
<li>0: Disable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
</div>
<div class="section" id="alarms">
<h2>Alarms<a class="headerlink" href="#alarms" title="Permalink to this headline">¶</a></h2>
<p>Each channel or limit may have an associated alarm file, containing a
boolean value. 1 means than an alarm condition exists, 0 means no alarm.</p>
<p>Usually a given chip will either use channel-related alarms, or
limit-related alarms, not both. The driver should just reflect the hardware
implementation.</p>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>`in[0-*]_alarm`,
`curr[1-*]_alarm`,
`power[1-*]_alarm`,
`fan[1-*]_alarm`,
`temp[1-*]_alarm`</strong></td>
<td><p class="first">Channel alarm</p>
<blockquote class="last">
<div><ul class="simple">
<li>0: no alarm</li>
<li>1: alarm</li>
</ul>
<p>RO</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p><strong>OR</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>`in[0-*]_min_alarm`,
`in[0-*]_max_alarm`,
`in[0-*]_lcrit_alarm`,
`in[0-*]_crit_alarm`,
`curr[1-*]_min_alarm`,
`curr[1-*]_max_alarm`,
`curr[1-*]_lcrit_alarm`,
`curr[1-*]_crit_alarm`,
`power[1-*]_cap_alarm`,
`power[1-*]_max_alarm`,
`power[1-*]_crit_alarm`,
`fan[1-*]_min_alarm`,
`fan[1-*]_max_alarm`,
`temp[1-*]_min_alarm`,
`temp[1-*]_max_alarm`,
`temp[1-*]_lcrit_alarm`,
`temp[1-*]_crit_alarm`,
`temp[1-*]_emergency_alarm`</strong></td>
<td><p class="first">Limit alarm</p>
<blockquote>
<div><ul class="simple">
<li>0: no alarm</li>
<li>1: alarm</li>
</ul>
</div></blockquote>
<p class="last">RO</p>
</td>
</tr>
</tbody>
</table>
<p>Each input channel may have an associated fault file. This can be used
to notify open diodes, unconnected fans etc. where the hardware
supports it. When this boolean has value 1, the measurement for that
channel should not be trusted.</p>
<dl class="docutils">
<dt><cite>fan[1-*]_fault</cite> / <cite>temp[1-*]_fault</cite></dt>
<dd><p class="first">Input fault condition</p>
<ul class="simple">
<li>0: no fault occurred</li>
<li>1: fault condition</li>
</ul>
<p class="last">RO</p>
</dd>
</dl>
<p>Some chips also offer the possibility to get beeped when an alarm occurs:</p>
<dl class="docutils">
<dt><cite>beep_enable</cite></dt>
<dd><p class="first">Master beep enable</p>
<ul class="simple">
<li>0: no beeps</li>
<li>1: beeps</li>
</ul>
<p class="last">RW</p>
</dd>
<dt><cite>in[0-*]_beep</cite>, <cite>curr[1-*]_beep</cite>, <cite>fan[1-*]_beep</cite>, <cite>temp[1-*]_beep</cite>,</dt>
<dd><p class="first">Channel beep</p>
<ul class="simple">
<li>0: disable</li>
<li>1: enable</li>
</ul>
<p class="last">RW</p>
</dd>
</dl>
<p>In theory, a chip could provide per-limit beep masking, but no such chip
was seen so far.</p>
<p>Old drivers provided a different, non-standard interface to alarms and
beeps. These interface files are deprecated, but will be kept around
for compatibility reasons:</p>
<dl class="docutils">
<dt><cite>alarms</cite></dt>
<dd><p class="first">Alarm bitmask.</p>
<p>RO</p>
<p>Integer representation of one to four bytes.</p>
<p>A ‘1’ bit means an alarm.</p>
<p>Chips should be programmed for ‘comparator’ mode so that
the alarm will ‘come back’ after you read the register
if it is still valid.</p>
<p class="last">Generally a direct representation of a chip’s internal
alarm registers; there is no standard for the position
of individual bits. For this reason, the use of this
interface file for new drivers is discouraged. Use
<cite>individual *_alarm</cite> and <cite>*_fault</cite> files instead.
Bits are defined in kernel/include/sensors.h.</p>
</dd>
<dt><cite>beep_mask</cite></dt>
<dd>Bitmask for beep.
Same format as ‘alarms’ with the same bit locations,
use discouraged for the same reason. Use individual
<cite>*_beep</cite> files instead.
RW</dd>
</dl>
</div>
<div class="section" id="intrusion-detection">
<h2>Intrusion detection<a class="headerlink" href="#intrusion-detection" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><cite>intrusion[0-*]_alarm</cite></dt>
<dd><p class="first">Chassis intrusion detection</p>
<ul class="simple">
<li>0: OK</li>
<li>1: intrusion detected</li>
</ul>
<p>RW</p>
<p class="last">Contrary to regular alarm flags which clear themselves
automatically when read, this one sticks until cleared by
the user. This is done by writing 0 to the file. Writing
other values is unsupported.</p>
</dd>
<dt><cite>intrusion[0-*]_beep</cite></dt>
<dd><p class="first">Chassis intrusion beep</p>
<p>0: disable
1: enable</p>
<p class="last">RW</p>
</dd>
</dl>
</div>
<div class="section" id="average-sample-configuration">
<h2>Average sample configuration<a class="headerlink" href="#average-sample-configuration" title="Permalink to this headline">¶</a></h2>
<p>Devices allowing for reading {in,power,curr,temp}_average values may export
attributes for controlling number of samples used to compute average.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>samples</td>
<td><p class="first">Sets number of average samples for all types of measurements.</p>
<p class="last">RW</p>
</td>
</tr>
<tr class="row-even"><td>in_samples
power_samples
curr_samples
temp_samples</td>
<td><p class="first">Sets number of average samples for specific type of
measurements.</p>
<p>Note that on some devices it won’t be possible to set all of
them to different values so changing one might also change
some others.</p>
<p class="last">RW</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="sysfs-attribute-writes-interpretation">
<h3>sysfs attribute writes interpretation<a class="headerlink" href="#sysfs-attribute-writes-interpretation" title="Permalink to this headline">¶</a></h3>
<p>hwmon sysfs attributes always contain numbers, so the first thing to do is to
convert the input to a number, there are 2 ways todo this depending whether
the number can be negative or not:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unsigned long u = simple_strtoul(buf, NULL, 10);
long s = simple_strtol(buf, NULL, 10);
</pre></div>
</div>
<p>With buf being the buffer with the user input being passed by the kernel.
Notice that we do not use the second argument of strto[u]l, and thus cannot
tell when 0 is returned, if this was really 0 or is caused by invalid input.
This is done deliberately as checking this everywhere would add a lot of
code to the kernel.</p>
<p>Notice that it is important to always store the converted value in an
unsigned long or long, so that no wrap around can happen before any further
checking.</p>
<p>After the input string is converted to an (unsigned) long, the value should be
checked if its acceptable. Be careful with further conversions on the value
before checking it for validity, as these conversions could still cause a wrap
around before the check. For example do not multiply the result, and only
add/subtract if it has been divided before the add/subtract.</p>
<p>What to do if a value is found to be invalid, depends on the type of the
sysfs attribute that is being set. If it is a continuous setting like a
tempX_max or inX_max attribute, then the value should be clamped to its
limits using clamp_val(value, min_limit, max_limit). If it is not continuous
like for example a tempX_type, then when an invalid value is written,
-EINVAL should be returned.</p>
<p>Example1, temp1_max, register is a signed 8 bit value (-128 - 127 degrees):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>long v = simple_strtol(buf, NULL, 10) / 1000;
v = clamp_val(v, -128, 127);
/* write v to register */
</pre></div>
</div>
<p>Example2, fan divider setting, valid values 2, 4 and 8:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unsigned long v = simple_strtoul(buf, NULL, 10);

switch (v) {
case 2: v = 1; break;
case 4: v = 2; break;
case 8: v = 3; break;
default:
        return -EINVAL;
}
/* write v to register */
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="userspace-tools.html" class="btn btn-neutral float-right" title="Userspace tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="submitting-patches.html" class="btn btn-neutral float-left" title="How to Get Your Patch Accepted Into the Hwmon Subsystem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>