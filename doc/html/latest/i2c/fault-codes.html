

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>I2C/SMBUS Fault Codes &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="I2C/SMBus Functionality" href="functionality.html" />
    <link rel="prev" title="Linux I2C and DMA" href="dma-considerations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">I2C/SMBus Subsystem</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#writing-device-drivers">Writing device drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="writing-clients.html">Implementing I2C device drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="dev-interface.html">Implementing I2C device drivers in userspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="dma-considerations.html">Linux I2C and DMA</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">I2C/SMBUS Fault Codes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-fault-is-not-always-an-error">A “Fault” is not always an “Error”</a></li>
<li class="toctree-l4"><a class="reference internal" href="#i2c-and-smbus-fault-codes">I2C and SMBus fault codes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="functionality.html">I2C/SMBus Functionality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#debugging">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#slave-i2c">Slave I2C</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#advanced-topics">Advanced topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#legacy-documentation">Legacy documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mic/index.html">Intel Many Integrated Core (MIC) architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">I2C/SMBus Subsystem</a> &raquo;</li>
        
      <li>I2C/SMBUS Fault Codes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/i2c/fault-codes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="i2c-smbus-fault-codes">
<h1>I2C/SMBUS Fault Codes<a class="headerlink" href="#i2c-smbus-fault-codes" title="Permalink to this headline">¶</a></h1>
<p>This is a summary of the most important conventions for use of fault
codes in the I2C/SMBus stack.</p>
<div class="section" id="a-fault-is-not-always-an-error">
<h2>A “Fault” is not always an “Error”<a class="headerlink" href="#a-fault-is-not-always-an-error" title="Permalink to this headline">¶</a></h2>
<p>Not all fault reports imply errors; “page faults” should be a familiar
example.  Software often retries idempotent operations after transient
faults.  There may be fancier recovery schemes that are appropriate in
some cases, such as re-initializing (and maybe resetting).  After such
recovery, triggered by a fault report, there is no error.</p>
<p>In a similar way, sometimes a “fault” code just reports one defined
result for an operation … it doesn’t indicate that anything is wrong
at all, just that the outcome wasn’t on the “golden path”.</p>
<p>In short, your I2C driver code may need to know these codes in order
to respond correctly.  Other code may need to rely on YOUR code reporting
the right fault code, so that it can (in turn) behave correctly.</p>
</div>
<div class="section" id="i2c-and-smbus-fault-codes">
<h2>I2C and SMBus fault codes<a class="headerlink" href="#i2c-and-smbus-fault-codes" title="Permalink to this headline">¶</a></h2>
<p>These are returned as negative numbers from most calls, with zero or
some positive number indicating a non-fault return.  The specific
numbers associated with these symbols differ between architectures,
though most Linux systems use &lt;asm-generic/errno*.h&gt; numbering.</p>
<p>Note that the descriptions here are not exhaustive.  There are other
codes that may be returned, and other cases where these codes should
be returned.  However, drivers should not return other codes for these
cases (unless the hardware doesn’t provide unique fault reports).</p>
<p>Also, codes returned by adapter probe methods follow rules which are
specific to their host bus (such as PCI, or the platform bus).</p>
<dl class="docutils">
<dt>EAGAIN</dt>
<dd><p class="first">Returned by I2C adapters when they lose arbitration in master
transmit mode:  some other master was transmitting different
data at the same time.</p>
<p class="last">Also returned when trying to invoke an I2C operation in an
atomic context, when some task is already using that I2C bus
to execute some other operation.</p>
</dd>
<dt>EBADMSG</dt>
<dd>Returned by SMBus logic when an invalid Packet Error Code byte
is received.  This code is a CRC covering all bytes in the
transaction, and is sent before the terminating STOP.  This
fault is only reported on read transactions; the SMBus slave
may have a way to report PEC mismatches on writes from the
host.  Note that even if PECs are in use, you should not rely
on these as the only way to detect incorrect data transfers.</dd>
<dt>EBUSY</dt>
<dd>Returned by SMBus adapters when the bus was busy for longer
than allowed.  This usually indicates some device (maybe the
SMBus adapter) needs some fault recovery (such as resetting),
or that the reset was attempted but failed.</dd>
<dt>EINVAL</dt>
<dd>This rather vague error means an invalid parameter has been
detected before any I/O operation was started.  Use a more
specific fault code when you can.</dd>
<dt>EIO</dt>
<dd>This rather vague error means something went wrong when
performing an I/O operation.  Use a more specific fault
code when you can.</dd>
<dt>ENODEV</dt>
<dd>Returned by driver probe() methods.  This is a bit more
specific than ENXIO, implying the problem isn’t with the
address, but with the device found there.  Driver probes
may verify the device returns <em>correct</em> responses, and
return this as appropriate.  (The driver core will warn
about probe faults other than ENXIO and ENODEV.)</dd>
<dt>ENOMEM</dt>
<dd>Returned by any component that can’t allocate memory when
it needs to do so.</dd>
<dt>ENXIO</dt>
<dd><p class="first">Returned by I2C adapters to indicate that the address phase
of a transfer didn’t get an ACK.  While it might just mean
an I2C device was temporarily not responding, usually it
means there’s nothing listening at that address.</p>
<p class="last">Returned by driver probe() methods to indicate that they
found no device to bind to.  (ENODEV may also be used.)</p>
</dd>
<dt>EOPNOTSUPP</dt>
<dd><p class="first">Returned by an adapter when asked to perform an operation
that it doesn’t, or can’t, support.</p>
<p>For example, this would be returned when an adapter that
doesn’t support SMBus block transfers is asked to execute
one.  In that case, the driver making that request should
have verified that functionality was supported before it
made that block transfer request.</p>
<p class="last">Similarly, if an I2C adapter can’t execute all legal I2C
messages, it should return this when asked to perform a
transaction it can’t.  (These limitations can’t be seen in
the adapter’s functionality mask, since the assumption is
that if an adapter supports I2C it supports all of I2C.)</p>
</dd>
<dt>EPROTO</dt>
<dd>Returned when slave does not conform to the relevant I2C
or SMBus (or chip-specific) protocol specifications.  One
case is when the length of an SMBus block data response
(from the SMBus slave) is outside the range 1-32 bytes.</dd>
<dt>ESHUTDOWN</dt>
<dd>Returned when a transfer was requested using an adapter
which is already suspended.</dd>
<dt>ETIMEDOUT</dt>
<dd><p class="first">This is returned by drivers when an operation took too much
time, and was aborted before it completed.</p>
<p class="last">SMBus adapters may return it when an operation took more
time than allowed by the SMBus specification; for example,
when a slave stretches clocks too far.  I2C has no such
timeouts, but it’s normal for I2C adapters to impose some
arbitrary limits (much longer than SMBus!) too.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="functionality.html" class="btn btn-neutral float-right" title="I2C/SMBus Functionality" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dma-considerations.html" class="btn btn-neutral float-left" title="Linux I2C and DMA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>