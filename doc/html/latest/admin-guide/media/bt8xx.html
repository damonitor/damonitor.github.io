

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.2. How to get the bt8xx cards working &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>7.2. How to get the bt8xx cards working</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/admin-guide/media/bt8xx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-get-the-bt8xx-cards-working">
<h1>7.2. How to get the bt8xx cards working<a class="headerlink" href="#how-to-get-the-bt8xx-cards-working" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>Authors:</dt>
<dd>Richard Walker,
Jamie Honan,
Michael Hunold,
Manu Abraham,
Uwe Bugla,
Michael Krufky</dd>
</dl>
<div class="section" id="general-information">
<h2>7.2.1. General information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h2>
<p>This class of cards has a bt878a as the PCI interface, and require the bttv driver
for accessing the i2c bus and the gpio pins of the bt8xx chipset.</p>
<p>Please see <a class="reference internal" href="bttv-cardlist.html"><span class="doc">BTTV cards list</span></a> for a complete list of Cards based on the
Conexant Bt8xx PCI bridge supported by the Linux Kernel.</p>
<p>In order to be able to compile the kernel, some config options should be
enabled:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./scripts/config -e PCI
./scripts/config -e INPUT
./scripts/config -m I2C
./scripts/config -m MEDIA_SUPPORT
./scripts/config -e MEDIA_PCI_SUPPORT
./scripts/config -e MEDIA_ANALOG_TV_SUPPORT
./scripts/config -e MEDIA_DIGITAL_TV_SUPPORT
./scripts/config -e MEDIA_RADIO_SUPPORT
./scripts/config -e RC_CORE
./scripts/config -m VIDEO_BT848
./scripts/config -m DVB_BT8XX
</pre></div>
</div>
<p>If you want to automatically support all possible variants of the Bt8xx
cards, you should also do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./scripts/config -e MEDIA_SUBDRV_AUTOSELECT
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please use the following options with care as deselection of drivers which
are in fact necessary may result in DVB devices that cannot be tuned due
to lack of driver support.</p>
</div>
<p>If your goal is to just support an specific board, you may, instead,
disable MEDIA_SUBDRV_AUTOSELECT and manually select the frontend drivers
required by your board. With that, you can save some RAM.</p>
<p>You can do that by calling make xconfig/qconfig/menuconfig and look at
the options on those menu options (only enabled if
<code class="docutils literal notranslate"><span class="pre">Autoselect</span> <span class="pre">ancillary</span> <span class="pre">drivers</span></code> is disabled:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">Device</span> <span class="pre">drivers</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Multimedia</span> <span class="pre">support</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Customize</span> <span class="pre">TV</span> <span class="pre">tuners</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Device</span> <span class="pre">drivers</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Multimedia</span> <span class="pre">support</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Customize</span> <span class="pre">DVB</span> <span class="pre">frontends</span></code></li>
</ol>
<p>Then, on each of the above menu, please select your card-specific
frontend and tuner modules.</p>
</div>
<div class="section" id="loading-modules">
<h2>7.2.2. Loading Modules<a class="headerlink" href="#loading-modules" title="Permalink to this headline">¶</a></h2>
<p>Regular case: If the bttv driver detects a bt8xx-based DVB card, all
frontend and backend modules will be loaded automatically.</p>
<p>Exceptions are:</p>
<ul class="simple">
<li>Old TV cards without EEPROMs, sharing a common PCI subsystem ID;</li>
<li>Old TwinHan DST cards or clones with or without CA slot and not
containing an Eeprom.</li>
</ul>
<p>In the following cases overriding the PCI type detection for bttv and
for dvb-bt8xx drivers by passing modprobe parameters may be necessary.</p>
<div class="section" id="running-twinhan-and-clones">
<h3>7.2.2.1. Running TwinHan and Clones<a class="headerlink" href="#running-twinhan-and-clones" title="Permalink to this headline">¶</a></h3>
<p>As shown at <a class="reference internal" href="bttv-cardlist.html"><span class="doc">BTTV cards list</span></a>, TwinHan and
clones use <code class="docutils literal notranslate"><span class="pre">card=113</span></code> modprobe parameter. So, in order to properly
detect it for devices without EEPROM, you should use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ modprobe bttv card=113
$ modprobe dst
</pre></div>
</div>
<p>Useful parameters for verbosity level and debugging the dst module:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>verbose=0:              messages are disabled
        1:              only error messages are displayed
        2:              notifications are displayed
        3:              other useful messages are displayed
        4:              debug setting
dst_addons=0:           card is a free to air (FTA) card only
        0x20:   card has a conditional access slot for scrambled channels
dst_algo=0:             (default) Software tuning algorithm
         1:             Hardware tuning algorithm
</pre></div>
</div>
<p>The autodetected values are determined by the cards’ “response string”.</p>
<p>In your logs see f. ex.: dst_get_device_id: Recognize [DSTMCI].</p>
<p>For bug reports please send in a complete log with verbose=4 activated.
Please also see <a class="reference internal" href="ci.html"><span class="doc">Digital TV Conditional Access Interface</span></a>.</p>
</div>
<div class="section" id="running-multiple-cards">
<h3>7.2.2.2. Running multiple cards<a class="headerlink" href="#running-multiple-cards" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="bttv-cardlist.html"><span class="doc">BTTV cards list</span></a> for a complete list of
Card ID. Some examples:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="90%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Brand name</th>
<th class="head">ID</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Pinnacle PCTV Sat</td>
<td>94</td>
</tr>
<tr class="row-odd"><td>Nebula Electronics Digi TV</td>
<td>104</td>
</tr>
<tr class="row-even"><td>pcHDTV HD-2000 TV</td>
<td>112</td>
</tr>
<tr class="row-odd"><td>Twinhan DST and clones</td>
<td>113</td>
</tr>
<tr class="row-even"><td>Avermedia AverTV DVB-T 77:</td>
<td>123</td>
</tr>
<tr class="row-odd"><td>Avermedia AverTV DVB-T 761</td>
<td>124</td>
</tr>
<tr class="row-even"><td>DViCO FusionHDTV DVB-T Lite</td>
<td>128</td>
</tr>
<tr class="row-odd"><td>DViCO FusionHDTV 5 Lite</td>
<td>135</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When you have multiple cards, the order of the card ID should
match the order where they’re detected by the system. Please notice
that removing/inserting other PCI cards may change the detection
order.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ modprobe bttv card=113 card=135
</pre></div>
</div>
<p>In case of further problems please subscribe and send questions to
the mailing list: <a class="reference external" href="mailto:linux-media&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-media<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a>.</p>
</div>
<div class="section" id="probing-the-cards-with-broken-pci-subsystem-id">
<h3>7.2.2.3. Probing the cards with broken PCI subsystem ID<a class="headerlink" href="#probing-the-cards-with-broken-pci-subsystem-id" title="Permalink to this headline">¶</a></h3>
<p>There are some TwinHan cards whose EEPROM has become corrupted for some
reason. The cards do not have a correct PCI subsystem ID.
Still, it is possible to force probing the cards with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo 109e 0878 $subvendor $subdevice &gt; \
        /sys/bus/pci/drivers/bt878/new_id
</pre></div>
</div>
<p>The two numbers there are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>109e: PCI_VENDOR_ID_BROOKTREE
0878: PCI_DEVICE_ID_BROOKTREE_878
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>