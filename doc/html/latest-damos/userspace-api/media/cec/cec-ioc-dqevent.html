

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.9. ioctl CEC_DQEVENT &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>2.9. ioctl CEC_DQEVENT</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/userspace-api/media/cec/cec-ioc-dqevent.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ioctl-cec-dqevent">
<span id="cec-dqevent"></span><h1>2.9. ioctl CEC_DQEVENT<a class="headerlink" href="#ioctl-cec-dqevent" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>2.9.1. Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>CEC_DQEVENT - Dequeue a CEC event</p>
</div>
<div class="section" id="synopsis">
<h2>2.9.2. Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.CEC_DQEVENT">
int <code class="descname">ioctl</code><span class="sig-paren">(</span>int<em>&nbsp;fd</em>, <a class="reference internal" href="#c.CEC_DQEVENT" title="CEC_DQEVENT">CEC_DQEVENT</a>, struct <a class="reference internal" href="#c.cec_event" title="cec_event">cec_event</a><em>&nbsp;*argp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.CEC_DQEVENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="arguments">
<h2>2.9.3. Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">fd</span></code></dt>
<dd>File descriptor returned by <a class="reference internal" href="cec-func-open.html#c.cec-open" title="cec-open"><code class="xref c c-func docutils literal notranslate"><span class="pre">open()</span></code></a>.</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">argp</span></code></p>
</div>
<div class="section" id="description">
<h2>2.9.4. Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>CEC devices can send asynchronous events. These can be retrieved by
calling <a class="reference internal" href="#c.CEC_DQEVENT" title="CEC_DQEVENT"><code class="xref c c-func docutils literal notranslate"><span class="pre">CEC_DQEVENT()</span></code></a>. If the file descriptor is in
non-blocking mode and no event is pending, then it will return -1 and
set errno to the <code class="docutils literal notranslate"><span class="pre">EAGAIN</span></code> error code.</p>
<p>The internal event queues are per-filehandle and per-event type. If
there is no more room in a queue then the last event is overwritten with
the new one. This means that intermediate results can be thrown away but
that the latest event is always available. This also means that is it
possible to read two successive events that have the same value (e.g.
two <a class="reference internal" href="#cec-event-state-change"><span class="std std-ref">CEC_EVENT_STATE_CHANGE</span></a> events with
the same state). In that case the intermediate state changes were lost but
it is guaranteed that the state did change in between the two events.</p>
<dl class="type">
<dt id="c.cec_event_state_change">
<code class="descname">cec_event_state_change</code><a class="headerlink" href="#c.cec_event_state_change" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">struct cec_event_state_change</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>__u16</td>
<td><code class="docutils literal notranslate"><span class="pre">phys_addr</span></code></td>
<td>The current physical address. This is <code class="docutils literal notranslate"><span class="pre">CEC_PHYS_ADDR_INVALID</span></code> if no
valid physical address is set.</td>
</tr>
<tr class="row-even"><td>__u16</td>
<td><code class="docutils literal notranslate"><span class="pre">log_addr_mask</span></code></td>
<td>The current set of claimed logical addresses. This is 0 if no logical
addresses are claimed or if <code class="docutils literal notranslate"><span class="pre">phys_addr</span></code> is <code class="docutils literal notranslate"><span class="pre">CEC_PHYS_ADDR_INVALID</span></code>.
If bit 15 is set (<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;&lt;</span> <span class="pre">CEC_LOG_ADDR_UNREGISTERED</span></code>) then this device
has the unregistered logical address. In that case all other bits are 0.</td>
</tr>
<tr class="row-odd"><td>__u16</td>
<td><code class="docutils literal notranslate"><span class="pre">have_conn_info</span></code></td>
<td>If non-zero, then HDMI connector information is available.
This field is only valid if <code class="docutils literal notranslate"><span class="pre">CEC_CAP_CONNECTOR_INFO</span></code> is set. If that
capability is set and <code class="docutils literal notranslate"><span class="pre">have_conn_info</span></code> is zero, then that indicates
that the HDMI connector device is not instantiated, either because
the HDMI driver is still configuring the device or because the HDMI
device was unbound.</td>
</tr>
</tbody>
</table>
<dl class="type">
<dt id="c.cec_event_lost_msgs">
<code class="descname">cec_event_lost_msgs</code><a class="headerlink" href="#c.cec_event_lost_msgs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">struct cec_event_lost_msgs</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">lost_msgs</span></code></td>
<td>Set to the number of lost messages since the filehandle was opened
or since the last time this event was dequeued for this
filehandle. The messages lost are the oldest messages. So when a
new message arrives and there is no more room, then the oldest
message is discarded to make room for the new one. The internal
size of the message queue guarantees that all messages received in
the last two seconds will be stored. Since messages should be
replied to within a second according to the CEC specification,
this is more than enough.</td>
</tr>
</tbody>
</table>
<dl class="type">
<dt id="c.cec_event">
<code class="descname">cec_event</code><a class="headerlink" href="#c.cec_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table border="1" class="docutils" id="id3">
<caption><span class="caption-text">struct cec_event</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>__u64</td>
<td><code class="docutils literal notranslate"><span class="pre">ts</span></code></td>
<td><p class="first">Timestamp of the event in ns.</p>
<p>The timestamp has been taken from the <code class="docutils literal notranslate"><span class="pre">CLOCK_MONOTONIC</span></code> clock.</p>
<p class="last">To access the same clock from userspace use <code class="xref c c-func docutils literal notranslate"><span class="pre">clock_gettime()</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">event</span></code></td>
<td>The CEC event type, see <a class="reference internal" href="#cec-events"><span class="std std-ref">CEC Events Types</span></a>.</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">flags</span></code></td>
<td>Event flags, see <a class="reference internal" href="#cec-event-flags"><span class="std std-ref">CEC Event Flags</span></a>.</td>
</tr>
<tr class="row-even"><td>union {</td>
<td colspan="2">(anonymous)</td>
</tr>
<tr class="row-odd"><td>struct cec_event_state_change</td>
<td><code class="docutils literal notranslate"><span class="pre">state_change</span></code></td>
<td>The new adapter state as sent by the <a class="reference internal" href="#cec-event-state-change"><span class="std std-ref">CEC_EVENT_STATE_CHANGE</span></a>
event.</td>
</tr>
<tr class="row-even"><td>struct cec_event_lost_msgs</td>
<td><code class="docutils literal notranslate"><span class="pre">lost_msgs</span></code></td>
<td>The number of lost messages as sent by the <a class="reference internal" href="#cec-event-lost-msgs"><span class="std std-ref">CEC_EVENT_LOST_MSGS</span></a>
event.</td>
</tr>
<tr class="row-odd"><td>}</td>
<td colspan="2">&#160;</td>
</tr>
</tbody>
</table>
<span id="cec-events"></span><table border="1" class="docutils" id="id4">
<caption><span class="caption-text">CEC Events Types</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="5%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_STATE_CHANGE</span></code></td>
<td>1</td>
<td><p class="first last" id="cec-event-state-change">Generated when the CEC Adapter’s state changes. When open() is
called an initial event will be generated for that filehandle with
the CEC Adapter’s state at that time.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_LOST_MSGS</span></code></td>
<td>2</td>
<td><p class="first last" id="cec-event-lost-msgs">Generated if one or more CEC messages were lost because the
application didn’t dequeue CEC messages fast enough.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_CEC_LOW</span></code></td>
<td>3</td>
<td><p class="first last" id="cec-event-pin-cec-low">Generated if the CEC pin goes from a high voltage to a low voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_CEC_HIGH</span></code></td>
<td>4</td>
<td><p class="first last" id="cec-event-pin-cec-high">Generated if the CEC pin goes from a low voltage to a high voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_HPD_LOW</span></code></td>
<td>5</td>
<td><p class="first last" id="cec-event-pin-hpd-low">Generated if the HPD pin goes from a high voltage to a low voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set. When open() is called, the HPD pin can be read and
if the HPD is low, then an initial event will be generated for that
filehandle.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_HPD_HIGH</span></code></td>
<td>6</td>
<td><p class="first last" id="cec-event-pin-hpd-high">Generated if the HPD pin goes from a low voltage to a high voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set. When open() is called, the HPD pin can be read and
if the HPD is high, then an initial event will be generated for that
filehandle.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_5V_LOW</span></code></td>
<td>6</td>
<td><p class="first last" id="cec-event-pin-5v-low">Generated if the 5V pin goes from a high voltage to a low voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set. When open() is called, the 5V pin can be read and
if the 5V is low, then an initial event will be generated for that
filehandle.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_PIN_5V_HIGH</span></code></td>
<td>7</td>
<td><p class="first last" id="cec-event-pin-5v-high">Generated if the 5V pin goes from a low voltage to a high voltage.
Only applies to adapters that have the <code class="docutils literal notranslate"><span class="pre">CEC_CAP_MONITOR_PIN</span></code>
capability set. When open() is called, the 5V pin can be read and
if the 5V is high, then an initial event will be generated for that
filehandle.</p>
</td>
</tr>
</tbody>
</table>
<span id="cec-event-flags"></span><table border="1" class="docutils" id="id5">
<caption><span class="caption-text">CEC Event Flags</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="8%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_FL_INITIAL_STATE</span></code></td>
<td>1</td>
<td><p class="first last" id="cec-event-fl-initial-state">Set for the initial events that are generated when the device is
opened. See the table above for which events do this. This allows
applications to learn the initial state of the CEC adapter at
open() time.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">CEC_EVENT_FL_DROPPED_EVENTS</span></code></td>
<td>2</td>
<td><p class="first last" id="cec-event-fl-dropped-events">Set if one or more events of the given event type have been dropped.
This is an indication that the application cannot keep up.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="return-value">
<h2>2.9.5. Return Value<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
<p>The <a class="reference internal" href="#cec-dqevent"><span class="std std-ref">ioctl CEC_DQEVENT</span></a> can return the following
error codes:</p>
<dl class="docutils">
<dt>EAGAIN</dt>
<dd>This is returned when the filehandle is in non-blocking mode and there
are no pending events.</dd>
<dt>ERESTARTSYS</dt>
<dd>An interrupt (e.g. Ctrl-C) arrived while in blocking mode waiting for
events to arrive.</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>