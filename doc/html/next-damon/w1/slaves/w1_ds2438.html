

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel driver w1_ds2438 &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Kernel driver w1_ds2438</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/w1/slaves/w1_ds2438.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-driver-w1-ds2438">
<h1>Kernel driver w1_ds2438<a class="headerlink" href="#kernel-driver-w1-ds2438" title="Permalink to this headline">¶</a></h1>
<p>Supported chips:</p>
<blockquote>
<div><ul class="simple">
<li>Maxim DS2438 Smart Battery Monitor</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>supported family codes:</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="80%" />
<col width="20%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>W1_FAMILY_DS2438</td>
<td>0x26</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Author: Mariusz Bialonczyk &lt;<a class="reference external" href="mailto:manio&#37;&#52;&#48;skyboo&#46;net">manio<span>&#64;</span>skyboo<span>&#46;</span>net</a>&gt;</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The DS2438 chip provides several functions that are desirable to carry in
a battery pack. It also has a 40 bytes of nonvolatile EEPROM.
Because the ability of temperature, current and voltage measurement, the chip
is also often used in weather stations and applications such as: rain gauge,
wind speed/direction measuring, humidity sensing, etc.</p>
<p>Current support is provided through the following sysfs files (all files
except “iad” are readonly):</p>
</div>
<div class="section" id="iad">
<h2>“iad”<a class="headerlink" href="#iad" title="Permalink to this headline">¶</a></h2>
<p>This file controls the ‘Current A/D Control Bit’ (IAD) in the
Status/Configuration Register.
Writing a zero value will clear the IAD bit and disables the current
measurements.
Writing value “1” is setting the IAD bit (enables the measurements).
The IAD bit is enabled by default in the DS2438.</p>
<p>When writing to sysfs file bits 2-7 are ignored, so it’s safe to write ASCII.
An I/O error is returned when there is a problem setting the new value.</p>
</div>
<div class="section" id="page0">
<h2>“page0”<a class="headerlink" href="#page0" title="Permalink to this headline">¶</a></h2>
<p>This file provides full 8 bytes of the chip Page 0 (00h).
This page contains the most frequently accessed information of the DS2438.
Internally when this file is read, the additional CRC byte is also obtained
from the slave device. If it is correct, the 8 bytes page data are passed
to userspace, otherwise an I/O error is returned.</p>
</div>
<div class="section" id="temperature">
<h2>“temperature”<a class="headerlink" href="#temperature" title="Permalink to this headline">¶</a></h2>
<p>Opening and reading this file initiates the CONVERT_T (temperature conversion)
command of the chip, afterwards the temperature is read from the device
registers and provided as an ASCII decimal value.</p>
<p>Important: The returned value has to be divided by 256 to get a real
temperature in degrees Celsius.</p>
</div>
<div class="section" id="vad-vdd">
<h2>“vad”, “vdd”<a class="headerlink" href="#vad-vdd" title="Permalink to this headline">¶</a></h2>
<p>Opening and reading this file initiates the CONVERT_V (voltage conversion)
command of the chip.</p>
<p>Depending on a sysfs filename a different input for the A/D will be selected:</p>
<dl class="docutils">
<dt>vad:</dt>
<dd>general purpose A/D input (VAD)</dd>
<dt>vdd:</dt>
<dd>battery input (VDD)</dd>
</dl>
<p>After the voltage conversion the value is returned as decimal ASCII.
Note: To get a volts the value has to be divided by 100.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>