

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Marvell(Aquantia) AQtion Driver &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>Marvell(Aquantia) AQtion Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/networking/device_drivers/aquantia/atlantic.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="marvell-aquantia-aqtion-driver">
<h1>Marvell(Aquantia) AQtion Driver<a class="headerlink" href="#marvell-aquantia-aqtion-driver" title="Permalink to this headline">¶</a></h1>
<p>For the aQuantia Multi-Gigabit PCI Express Family of Ethernet Adapters</p>
<div class="section" id="identifying-your-adapter">
<h2>Identifying Your Adapter<a class="headerlink" href="#identifying-your-adapter" title="Permalink to this headline">¶</a></h2>
<p>The driver in this release is compatible with AQC-100, AQC-107, AQC-108
based ethernet adapters.</p>
<div class="section" id="sfp-devices-for-aqc-100-based-adapters">
<h3>SFP+ Devices (for AQC-100 based adapters)<a class="headerlink" href="#sfp-devices-for-aqc-100-based-adapters" title="Permalink to this headline">¶</a></h3>
<p>This release tested with passive Direct Attach Cables (DAC) and SFP+/LC
Optical Transceiver.</p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="viewing-link-messages">
<h3>Viewing Link Messages<a class="headerlink" href="#viewing-link-messages" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Link messages will not be displayed to the console if the distribution is
restricting system messages. In order to see network driver link messages on
your console, set dmesg to eight by entering the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dmesg -n 8
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This setting is not saved across reboots.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="jumbo-frames">
<h3>Jumbo Frames<a class="headerlink" href="#jumbo-frames" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The driver supports Jumbo Frames for all adapters. Jumbo Frames support is
enabled by changing the MTU to a value larger than the default of 1500.
The maximum value for the MTU is 16000.  Use the <cite>ip</cite> command to
increase the MTU size.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ip link set mtu 16000 dev enp1s0
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="ethtool">
<h3>ethtool<a class="headerlink" href="#ethtool" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The driver utilizes the ethtool interface for driver configuration and
diagnostics, as well as displaying statistical information. The latest
ethtool version is required for this functionality.</div></blockquote>
</div>
<div class="section" id="napi">
<h3>NAPI<a class="headerlink" href="#napi" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>NAPI (Rx polling mode) is supported in the atlantic driver.</div></blockquote>
</div>
</div>
<div class="section" id="supported-ethtool-options">
<h2>Supported ethtool options<a class="headerlink" href="#supported-ethtool-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="viewing-adapter-settings">
<h3>Viewing adapter settings<a class="headerlink" href="#viewing-adapter-settings" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool &lt;ethX&gt;
</pre></div>
</div>
<p>Output example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Settings for enp1s0:
  Supported ports: [ TP ]
  Supported link modes:   100baseT/Full
                          1000baseT/Full
                          10000baseT/Full
                          2500baseT/Full
                          5000baseT/Full
  Supported pause frame use: Symmetric
  Supports auto-negotiation: Yes
  Supported FEC modes: Not reported
  Advertised link modes:  100baseT/Full
                          1000baseT/Full
                          10000baseT/Full
                          2500baseT/Full
                          5000baseT/Full
  Advertised pause frame use: Symmetric
  Advertised auto-negotiation: Yes
  Advertised FEC modes: Not reported
  Speed: 10000Mb/s
  Duplex: Full
  Port: Twisted Pair
  PHYAD: 0
  Transceiver: internal
  Auto-negotiation: on
  MDI-X: Unknown
  Supports Wake-on: g
  Wake-on: d
  Link detected: yes
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>AQrate speeds (2.5/5 Gb/s) will be displayed only with linux kernels &gt; 4.10.
But you can still use these speeds:</p>
<div class="last highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s eth0 autoneg off speed 2500
</pre></div>
</div>
</div>
</div></blockquote>
</div>
<div class="section" id="viewing-adapter-information">
<h3>Viewing adapter information<a class="headerlink" href="#viewing-adapter-information" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -i &lt;ethX&gt;
</pre></div>
</div>
<p>Output example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>driver: atlantic
version: 5.2.0-050200rc5-generic-kern
firmware-version: 3.1.78
expansion-rom-version:
bus-info: 0000:01:00.0
supports-statistics: yes
supports-test: no
supports-eeprom-access: no
supports-register-dump: yes
supports-priv-flags: no
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="viewing-ethernet-adapter-statistics">
<h3>Viewing Ethernet adapter statistics<a class="headerlink" href="#viewing-ethernet-adapter-statistics" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -S &lt;ethX&gt;
</pre></div>
</div>
<p>Output example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NIC statistics:
   InPackets: 13238607
   InUCast: 13293852
   InMCast: 52
   InBCast: 3
   InErrors: 0
   OutPackets: 23703019
   OutUCast: 23704941
   OutMCast: 67
   OutBCast: 11
   InUCastOctects: 213182760
   OutUCastOctects: 22698443
   InMCastOctects: 6600
   OutMCastOctects: 8776
   InBCastOctects: 192
   OutBCastOctects: 704
   InOctects: 2131839552
   OutOctects: 226938073
   InPacketsDma: 95532300
   OutPacketsDma: 59503397
   InOctetsDma: 1137102462
   OutOctetsDma: 2394339518
   InDroppedDma: 0
   Queue[0] InPackets: 23567131
   Queue[0] OutPackets: 20070028
   Queue[0] InJumboPackets: 0
   Queue[0] InLroPackets: 0
   Queue[0] InErrors: 0
   Queue[1] InPackets: 45428967
   Queue[1] OutPackets: 11306178
   Queue[1] InJumboPackets: 0
   Queue[1] InLroPackets: 0
   Queue[1] InErrors: 0
   Queue[2] InPackets: 3187011
   Queue[2] OutPackets: 13080381
   Queue[2] InJumboPackets: 0
   Queue[2] InLroPackets: 0
   Queue[2] InErrors: 0
   Queue[3] InPackets: 23349136
   Queue[3] OutPackets: 15046810
   Queue[3] InJumboPackets: 0
   Queue[3] InLroPackets: 0
   Queue[3] InErrors: 0
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="interrupt-coalescing-support">
<h3>Interrupt coalescing support<a class="headerlink" href="#interrupt-coalescing-support" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>ITR mode, TX/RX coalescing timings could be viewed with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -c &lt;ethX&gt;
</pre></div>
</div>
<p>and changed with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -C &lt;ethX&gt; tx-usecs &lt;usecs&gt; rx-usecs &lt;usecs&gt;
</pre></div>
</div>
<p>To disable coalescing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -C &lt;ethX&gt; tx-usecs 0 rx-usecs 0 tx-max-frames 1 tx-max-frames 1
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="wake-on-lan-support">
<h3>Wake on LAN support<a class="headerlink" href="#wake-on-lan-support" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>WOL support by magic packet:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s &lt;ethX&gt; wol g
</pre></div>
</div>
<p>To disable WOL:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s &lt;ethX&gt; wol d
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="set-and-check-the-driver-message-level">
<h3>Set and check the driver message level<a class="headerlink" href="#set-and-check-the-driver-message-level" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Set message level</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s &lt;ethX&gt; msglvl &lt;level&gt;
</pre></div>
</div>
<p>Level values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0x0001</td>
<td>general driver status.</td>
</tr>
<tr class="row-even"><td>0x0002</td>
<td>hardware probing.</td>
</tr>
<tr class="row-odd"><td>0x0004</td>
<td>link state.</td>
</tr>
<tr class="row-even"><td>0x0008</td>
<td>periodic status check.</td>
</tr>
<tr class="row-odd"><td>0x0010</td>
<td>interface being brought down.</td>
</tr>
<tr class="row-even"><td>0x0020</td>
<td>interface being brought up.</td>
</tr>
<tr class="row-odd"><td>0x0040</td>
<td>receive error.</td>
</tr>
<tr class="row-even"><td>0x0080</td>
<td>transmit error.</td>
</tr>
<tr class="row-odd"><td>0x0200</td>
<td>interrupt handling.</td>
</tr>
<tr class="row-even"><td>0x0400</td>
<td>transmit completion.</td>
</tr>
<tr class="row-odd"><td>0x0800</td>
<td>receive completion.</td>
</tr>
<tr class="row-even"><td>0x1000</td>
<td>packet contents.</td>
</tr>
<tr class="row-odd"><td>0x2000</td>
<td>hardware status.</td>
</tr>
<tr class="row-even"><td>0x4000</td>
<td>Wake-on-LAN status.</td>
</tr>
</tbody>
</table>
<p>By default, the level of debugging messages is set 0x0001(general driver status).</p>
<p>Check message level</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool &lt;ethX&gt; | grep &quot;Current message level&quot;
</pre></div>
</div>
<p>If you want to disable the output of messages:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -s &lt;ethX&gt; msglvl 0
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="rx-flow-rules-ntuple-filters">
<h3>RX flow rules (ntuple filters)<a class="headerlink" href="#rx-flow-rules-ntuple-filters" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>There are separate rules supported, that applies in that order:</p>
<ol class="arabic simple">
<li>16 VLAN ID rules</li>
<li>16 L2 EtherType rules</li>
<li>8 L3/L4 5-Tuple rules</li>
</ol>
<p>The driver utilizes the ethtool interface for configuring ntuple filters,
via <code class="docutils literal notranslate"><span class="pre">ethtool</span> <span class="pre">-N</span> <span class="pre">&lt;device&gt;</span> <span class="pre">&lt;filter&gt;</span></code>.</p>
<p>To enable or disable the RX flow rules:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -K ethX ntuple &lt;on|off&gt;
</pre></div>
</div>
<p>When disabling ntuple filters, all the user programed filters are
flushed from the driver cache and hardware. All needed filters must
be re-added when ntuple is re-enabled.</p>
<p>Because of the fixed order of the rules, the location of filters is also fixed:</p>
<ul class="simple">
<li>Locations 0 - 15 for VLAN ID filters</li>
<li>Locations 16 - 31 for L2 EtherType filters</li>
<li>Locations 32 - 39 for L3/L4 5-tuple filters (locations 32, 36 for IPv6)</li>
</ul>
<p>The L3/L4 5-tuple (protocol, source and destination IP address, source and
destination TCP/UDP/SCTP port) is compared against 8 filters. For IPv4, up to
8 source and destination addresses can be matched. For IPv6, up to 2 pairs of
addresses can be supported. Source and destination ports are only compared for
TCP/UDP/SCTP packets.</p>
<p>To add a filter that directs packet to queue 5, use
<code class="docutils literal notranslate"><span class="pre">&lt;-N|-U|--config-nfc|--config-ntuple&gt;</span></code> switch:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -N &lt;ethX&gt; flow-type udp4 src-ip 10.0.0.1 dst-ip 10.0.0.2 src-port 2000 dst-port 2001 action 5 &lt;loc 32&gt;
</pre></div>
</div>
<ul class="simple">
<li>action is the queue number.</li>
<li>loc is the rule number.</li>
</ul>
<p>For <code class="docutils literal notranslate"><span class="pre">flow-type</span> <span class="pre">ip4|udp4|tcp4|sctp4|ip6|udp6|tcp6|sctp6</span></code> you must set the loc
number within 32 - 39.
For <code class="docutils literal notranslate"><span class="pre">flow-type</span> <span class="pre">ip4|udp4|tcp4|sctp4|ip6|udp6|tcp6|sctp6</span></code> you can set 8 rules
for traffic IPv4 or you can set 2 rules for traffic IPv6. Loc number traffic
IPv6 is 32 and 36.
At the moment you can not use IPv4 and IPv6 filters at the same time.</p>
<p>Example filter for IPv6 filter traffic:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo ethtool -N &lt;ethX&gt; flow-type tcp6 src-ip 2001:db8:0:f101::1 dst-ip 2001:db8:0:f101::2 action 1 loc 32
sudo ethtool -N &lt;ethX&gt; flow-type ip6 src-ip 2001:db8:0:f101::2 dst-ip 2001:db8:0:f101::5 action -1 loc 36
</pre></div>
</div>
<p>Example filter for IPv4 filter traffic:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo ethtool -N &lt;ethX&gt; flow-type udp4 src-ip 10.0.0.4 dst-ip 10.0.0.7 src-port 2000 dst-port 2001 loc 32
sudo ethtool -N &lt;ethX&gt; flow-type tcp4 src-ip 10.0.0.3 dst-ip 10.0.0.9 src-port 2000 dst-port 2001 loc 33
sudo ethtool -N &lt;ethX&gt; flow-type ip4 src-ip 10.0.0.6 dst-ip 10.0.0.4 loc 34
</pre></div>
</div>
<p>If you set action -1, then all traffic corresponding to the filter will be discarded.</p>
<p>The maximum value action is 31.</p>
<p>The VLAN filter (VLAN id) is compared against 16 filters.
VLAN id must be accompanied by mask 0xF000. That is to distinguish VLAN filter
from L2 Ethertype filter with UserPriority since both User Priority and VLAN ID
are passed in the same ‘vlan’ parameter.</p>
<p>To add a filter that directs packets from VLAN 2001 to queue 5:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -N &lt;ethX&gt; flow-type ip4 vlan 2001 m 0xF000 action 1 loc 0
</pre></div>
</div>
<p>L2 EtherType filters allows filter packet by EtherType field or both EtherType
and User Priority (PCP) field of 802.1Q.
UserPriority (vlan) parameter must be accompanied by mask 0x1FFF. That is to
distinguish VLAN filter from L2 Ethertype filter with UserPriority since both
User Priority and VLAN ID are passed in the same ‘vlan’ parameter.</p>
<p>To add a filter that directs IP4 packess of priority 3 to queue 3:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -N &lt;ethX&gt; flow-type ether proto 0x800 vlan 0x600 m 0x1FFF action 3 loc 16
</pre></div>
</div>
<p>To see the list of filters currently present:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool &lt;-u|-n|--show-nfc|--show-ntuple&gt; &lt;ethX&gt;
</pre></div>
</div>
<p>Rules may be deleted from the table itself. This is done using:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo ethtool &lt;-N|-U|--config-nfc|--config-ntuple&gt; &lt;ethX&gt; delete &lt;loc&gt;
</pre></div>
</div>
<ul class="simple">
<li>loc is the rule number to be deleted.</li>
</ul>
<p>Rx filters is an interface to load the filter table that funnels all flow
into queue 0 unless an alternative queue is specified using “action”. In that
case, any flow that matches the filter criteria will be directed to the
appropriate queue. RX filters is supported on all kernels 2.6.30 and later.</p>
</div></blockquote>
</div>
<div class="section" id="rss-for-udp">
<h3>RSS for UDP<a class="headerlink" href="#rss-for-udp" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Currently, NIC does not support RSS for fragmented IP packets, which leads to
incorrect working of RSS for fragmented UDP traffic. To disable RSS for UDP the
RX Flow L3/L4 rule may be used.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -N eth0 flow-type udp4 action 0 loc 32
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="udp-gso-hardware-offload">
<h3>UDP GSO hardware offload<a class="headerlink" href="#udp-gso-hardware-offload" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>UDP GSO allows to boost UDP tx rates by offloading UDP headers allocation
into hardware. A special userspace socket option is required for this,
could be validated with /kernel/tools/testing/selftests/net/:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>udpgso_bench_tx -u -4 -D 10.0.1.1 -s 6300 -S 100
</pre></div>
</div>
<p>Will cause sending out of 100 byte sized UDP packets formed from single
6300 bytes user buffer.</p>
<p>UDP GSO is configured by:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ethtool -K eth0 tx-udp-segmentation on
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="private-flags-testing">
<h3>Private flags (testing)<a class="headerlink" href="#private-flags-testing" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Atlantic driver supports private flags for hardware custom features:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ethtool --show-priv-flags ethX

Private flags for ethX:
DMASystemLoopback  : off
PKTSystemLoopback  : off
DMANetworkLoopback : off
PHYInternalLoopback: off
PHYExternalLoopback: off
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ethtool --set-priv-flags ethX DMASystemLoopback on
</pre></div>
</div>
<p>DMASystemLoopback:   DMA Host loopback.
PKTSystemLoopback:   Packet buffer host loopback.
DMANetworkLoopback:  Network side loopback on DMA block.
PHYInternalLoopback: Internal loopback on Phy.
PHYExternalLoopback: External loopback on Phy (with loopback ethernet cable).</p>
</div></blockquote>
</div>
</div>
<div class="section" id="command-line-parameters">
<h2>Command Line Parameters<a class="headerlink" href="#command-line-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following command line parameters are available on atlantic driver:</p>
<div class="section" id="aq-itr-interrupt-throttling-mode">
<h3>aq_itr -Interrupt throttling mode<a class="headerlink" href="#aq-itr-interrupt-throttling-mode" title="Permalink to this headline">¶</a></h3>
<p>Accepted values: 0, 1, 0xFFFF</p>
<p>Default value: 0xFFFF</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>Disable interrupt throttling.</td>
</tr>
<tr class="row-even"><td>1</td>
<td>Enable interrupt throttling and use specified tx and rx rates.</td>
</tr>
<tr class="row-odd"><td>0xFFFF</td>
<td>Auto throttling mode. Driver will choose the best RX and TX
interrupt throtting settings based on link speed.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aq-itr-tx-tx-interrupt-throttle-rate">
<h3>aq_itr_tx - TX interrupt throttle rate<a class="headerlink" href="#aq-itr-tx-tx-interrupt-throttle-rate" title="Permalink to this headline">¶</a></h3>
<p>Accepted values: 0 - 0x1FF</p>
<p>Default value: 0</p>
<p>TX side throttling in microseconds. Adapter will setup maximum interrupt delay
to this value. Minimum interrupt delay will be a half of this value</p>
</div>
<div class="section" id="aq-itr-rx-rx-interrupt-throttle-rate">
<h3>aq_itr_rx - RX interrupt throttle rate<a class="headerlink" href="#aq-itr-rx-rx-interrupt-throttle-rate" title="Permalink to this headline">¶</a></h3>
<p>Accepted values: 0 - 0x1FF</p>
<p>Default value: 0</p>
<p>RX side throttling in microseconds. Adapter will setup maximum interrupt delay
to this value. Minimum interrupt delay will be a half of this value</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ITR settings could be changed in runtime by ethtool -c means (see below)</p>
</div>
</div>
</div>
<div class="section" id="config-file-parameters">
<h2>Config file parameters<a class="headerlink" href="#config-file-parameters" title="Permalink to this headline">¶</a></h2>
<p>For some fine tuning and performance optimizations,
some parameters can be changed in the {source_dir}/aq_cfg.h file.</p>
<div class="section" id="aq-cfg-rx-pageorder">
<h3>AQ_CFG_RX_PAGEORDER<a class="headerlink" href="#aq-cfg-rx-pageorder" title="Permalink to this headline">¶</a></h3>
<p>Default value: 0</p>
<p>RX page order override. Thats a power of 2 number of RX pages allocated for
each descriptor. Received descriptor size is still limited by
AQ_CFG_RX_FRAME_MAX.</p>
<p>Increasing pageorder makes page reuse better (actual on iommu enabled systems).</p>
</div>
<div class="section" id="aq-cfg-rx-refill-thres">
<h3>AQ_CFG_RX_REFILL_THRES<a class="headerlink" href="#aq-cfg-rx-refill-thres" title="Permalink to this headline">¶</a></h3>
<p>Default value: 32</p>
<p>RX refill threshold. RX path will not refill freed descriptors until the
specified number of free descriptors is observed. Larger values may help
better page reuse but may lead to packet drops as well.</p>
</div>
<div class="section" id="aq-cfg-vecs-def">
<h3>AQ_CFG_VECS_DEF<a class="headerlink" href="#aq-cfg-vecs-def" title="Permalink to this headline">¶</a></h3>
<p>Number of queues</p>
<p>Valid Range: 0 - 8 (up to AQ_CFG_VECS_MAX)</p>
<p>Default value: 8</p>
<p>Notice this value will be capped by the number of cores available on the system.</p>
</div>
<div class="section" id="aq-cfg-is-rss-def">
<h3>AQ_CFG_IS_RSS_DEF<a class="headerlink" href="#aq-cfg-is-rss-def" title="Permalink to this headline">¶</a></h3>
<p>Enable/disable Receive Side Scaling</p>
<p>This feature allows the adapter to distribute receive processing
across multiple CPU-cores and to prevent from overloading a single CPU core.</p>
<p>Valid values</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>disabled</td>
</tr>
<tr class="row-even"><td>1</td>
<td>enabled</td>
</tr>
</tbody>
</table>
<p>Default value: 1</p>
</div>
<div class="section" id="aq-cfg-num-rss-queues-def">
<h3>AQ_CFG_NUM_RSS_QUEUES_DEF<a class="headerlink" href="#aq-cfg-num-rss-queues-def" title="Permalink to this headline">¶</a></h3>
<p>Number of queues for Receive Side Scaling</p>
<p>Valid Range: 0 - 8 (up to AQ_CFG_VECS_DEF)</p>
<p>Default value: AQ_CFG_VECS_DEF</p>
</div>
<div class="section" id="aq-cfg-is-lro-def">
<h3>AQ_CFG_IS_LRO_DEF<a class="headerlink" href="#aq-cfg-is-lro-def" title="Permalink to this headline">¶</a></h3>
<p>Enable/disable Large Receive Offload</p>
<p>This offload enables the adapter to coalesce multiple TCP segments and indicate
them as a single coalesced unit to the OS networking subsystem.</p>
<p>The system consumes less energy but it also introduces more latency in packets
processing.</p>
<p>Valid values</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>disabled</td>
</tr>
<tr class="row-even"><td>1</td>
<td>enabled</td>
</tr>
</tbody>
</table>
<p>Default value: 1</p>
</div>
<div class="section" id="aq-cfg-tx-clean-budget">
<h3>AQ_CFG_TX_CLEAN_BUDGET<a class="headerlink" href="#aq-cfg-tx-clean-budget" title="Permalink to this headline">¶</a></h3>
<p>Maximum descriptors to cleanup on TX at once.</p>
<p>Default value: 256</p>
<p>After the aq_cfg.h file changed the driver must be rebuilt to take effect.</p>
</div>
</div>
<div class="section" id="support">
<h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>If an issue is identified with the released source code on the supported
kernel with a supported adapter, email the specific information related
to the issue to <a class="reference external" href="mailto:aqn_support&#37;&#52;&#48;marvell&#46;com">aqn_support<span>&#64;</span>marvell<span>&#46;</span>com</a></p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>aQuantia Corporation Network Driver</p>
<p>Copyright © 2014 - 2019 aQuantia Corporation.</p>
<p>This program is free software; you can redistribute it and/or modify it
under the terms and conditions of the GNU General Public License,
version 2, as published by the Free Software Foundation.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>