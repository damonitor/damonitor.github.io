

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.23. Single- and multi-planar APIs &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>1.23. Single- and multi-planar APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/media/uapi/v4l/planar-apis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="single-and-multi-planar-apis">
<span id="planar-apis"></span><h1>1.23. Single- and multi-planar APIs<a class="headerlink" href="#single-and-multi-planar-apis" title="Permalink to this headline">¶</a></h1>
<p>Some devices require data for each input or output video frame to be
placed in discontiguous memory buffers. In such cases, one video frame
has to be addressed using more than one memory address, i.e. one pointer
per “plane”. A plane is a sub-buffer of the current frame. For examples
of such formats see <a class="reference internal" href="pixfmt.html#pixfmt"><span class="std std-ref">Image Formats</span></a>.</p>
<p>Initially, V4L2 API did not support multi-planar buffers and a set of
extensions has been introduced to handle them. Those extensions
constitute what is being referred to as the “multi-planar API”.</p>
<p>Some of the V4L2 API calls and structures are interpreted differently,
depending on whether single- or multi-planar API is being used. An
application can choose whether to use one or the other by passing a
corresponding buffer type to its ioctl calls. Multi-planar versions of
buffer types are suffixed with an <code class="docutils literal notranslate"><span class="pre">_MPLANE</span></code> string. For a list of
available multi-planar buffer types see enum
<a class="reference internal" href="buffer.html#c.v4l2_buf_type" title="v4l2_buf_type"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_buf_type</span></code></a>.</p>
<div class="section" id="multi-planar-formats">
<h2>1.23.1. Multi-planar formats<a class="headerlink" href="#multi-planar-formats" title="Permalink to this headline">¶</a></h2>
<p>Multi-planar API introduces new multi-planar formats. Those formats use
a separate set of FourCC codes. It is important to distinguish between
the multi-planar API and a multi-planar format. Multi-planar API calls
can handle all single-planar formats as well (as long as they are passed
in multi-planar API structures), while the single-planar API cannot
handle multi-planar formats.</p>
</div>
<div class="section" id="calls-that-distinguish-between-single-and-multi-planar-apis">
<h2>1.23.2. Calls that distinguish between single and multi-planar APIs<a class="headerlink" href="#calls-that-distinguish-between-single-and-multi-planar-apis" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><a class="reference internal" href="vidioc-querycap.html#vidioc-querycap"><span class="std std-ref">VIDIOC_QUERYCAP</span></a></dt>
<dd>Two additional multi-planar capabilities are added. They can be set
together with non-multi-planar ones for devices that handle both
single- and multi-planar formats.</dd>
<dt><a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span class="std std-ref">VIDIOC_G_FMT</span></a>, <a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span class="std std-ref">VIDIOC_S_FMT</span></a>, <a class="reference internal" href="vidioc-g-fmt.html#vidioc-g-fmt"><span class="std std-ref">VIDIOC_TRY_FMT</span></a></dt>
<dd>New structures for describing multi-planar formats are added: struct
<a class="reference internal" href="pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_pix_format_mplane</span></code></a> and
struct <a class="reference internal" href="pixfmt-v4l2-mplane.html#c.v4l2_plane_pix_format" title="v4l2_plane_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_plane_pix_format</span></code></a>.
Drivers may define new multi-planar formats, which have distinct
FourCC codes from the existing single-planar ones.</dd>
<dt><a class="reference internal" href="vidioc-qbuf.html#vidioc-qbuf"><span class="std std-ref">VIDIOC_QBUF</span></a>, <a class="reference internal" href="vidioc-qbuf.html#vidioc-qbuf"><span class="std std-ref">VIDIOC_DQBUF</span></a>, <a class="reference internal" href="vidioc-querybuf.html#vidioc-querybuf"><span class="std std-ref">VIDIOC_QUERYBUF</span></a></dt>
<dd>A new struct <a class="reference internal" href="buffer.html#c.v4l2_plane" title="v4l2_plane"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_plane</span></code></a> structure for
describing planes is added. Arrays of this structure are passed in
the new <code class="docutils literal notranslate"><span class="pre">m.planes</span></code> field of struct
<a class="reference internal" href="buffer.html#c.v4l2_buffer" title="v4l2_buffer"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_buffer</span></code></a>.</dd>
<dt><a class="reference internal" href="vidioc-reqbufs.html#vidioc-reqbufs"><span class="std std-ref">VIDIOC_REQBUFS</span></a></dt>
<dd>Will allocate multi-planar buffers as requested.</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>