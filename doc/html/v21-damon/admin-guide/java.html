

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Java(tm) Binary Kernel Support for Linux v1.03 &mdash; The Linux Kernel  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IBM’s Journaled File System (JFS) for Linux" href="jfs.html" />
    <link rel="prev" title="I/O statistics fields" href="iostats.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">The Linux kernel user’s and administrator’s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Linux kernel release 5.x &lt;http://kernel.org/&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-parameters.html">The kernel’s command-line parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="devices.html">Linux allocated devices (4.x+ version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sysctl/index.html">Documentation for /proc/sys</a></li>
<li class="toctree-l2"><a class="reference internal" href="hw-vuln/index.html">Hardware vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="reporting-bugs.html">Reporting bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-bugs.html">Security bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="bug-hunting.html">Bug hunting</a></li>
<li class="toctree-l2"><a class="reference internal" href="bug-bisect.html">Bisecting a bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="tainted-kernels.html">Tainted kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="ramoops.html">Ramoops oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="dynamic-debug-howto.html">Dynamic debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="init.html">Explaining the “No working init found.” boot hang message</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdump/index.html">Documentation for Kdump - The kexec-based Crash Dumping Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="perf/index.html">Performance monitor support</a></li>
<li class="toctree-l2"><a class="reference internal" href="sysfs-rules.html">Rules on how to access information in sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="aoe/index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="bcache.html">A block layer cache (bcache)</a></li>
<li class="toctree-l2"><a class="reference internal" href="binderfs.html">The Android binderfs Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="blockdev/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="bootconfig.html">Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="cifs/index.html">CIFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="clearing-warn-once.html">Clearing WARN_ONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu-load.html">CPU load</a></li>
<li class="toctree-l2"><a class="reference internal" href="cputopology.html">How CPU topology info is exported via sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-mapper/index.html">Device Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="efi-stub.html">The EFI Boot Stub</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext4.html">ext4 General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="nfs/index.html">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpio/index.html">gpio</a></li>
<li class="toctree-l2"><a class="reference internal" href="highuid.html">Notes on the change from 16-bit UIDs to 32-bit UIDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="hw_random.html">Linux support for random number generator in i8xx chipsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="initrd.html">Using the initial RAM disk (initrd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="iostats.html">I/O statistics fields</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="jfs.html">IBM’s Journaled File System (JFS) for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-per-CPU-kthreads.html">Reducing OS jitter due to per-cpu kthreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldm.html">LDM - Logical Disk Manager (Dynamic Disks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="lockup-watchdogs.html">Softlockup detector and hardlockup detector (aka nmi_watchdog)</a></li>
<li class="toctree-l2"><a class="reference internal" href="LSM/index.html">Linux Security Module Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="md.html">RAID arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="media/index.html">Media subsystem admin and user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="mm/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l2"><a class="reference internal" href="mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="namespaces/index.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="parport.html">Parport</a></li>
<li class="toctree-l2"><a class="reference internal" href="perf-security.html">Perf events and tool security</a></li>
<li class="toctree-l2"><a class="reference internal" href="pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="ras.html">Reliability, Availability and Serviceability</a></li>
<li class="toctree-l2"><a class="reference internal" href="rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="sysrq.html">Linux Magic System Request Key Hacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l2"><a class="reference internal" href="ufs.html">Using UFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.html">Unicode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="video-output.html">Video Output Switcher Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="wimax/index.html">WiMAX subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="xfs.html">The SGI XFS Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Device Tree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">The Linux kernel user’s and administrator’s guide</a> &raquo;</li>
        
      <li>Java(tm) Binary Kernel Support for Linux v1.03</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/admin-guide/java.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="java-tm-binary-kernel-support-for-linux-v1-03">
<h1>Java(tm) Binary Kernel Support for Linux v1.03<a class="headerlink" href="#java-tm-binary-kernel-support-for-linux-v1-03" title="Permalink to this headline">¶</a></h1>
<p>Linux beats them ALL! While all other OS’s are TALKING about direct
support of Java Binaries in the OS, Linux is doing it!</p>
<p>You can execute Java applications and Java Applets just like any
other program after you have done the following:</p>
<ol class="arabic">
<li><p>You MUST FIRST install the Java Developers Kit for Linux.
The Java on Linux HOWTO gives the details on getting and
installing this. This HOWTO can be found at:</p>
<blockquote>
<div><p><a class="reference external" href="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/Java-HOWTO">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/Java-HOWTO</a></p>
</div></blockquote>
<p>You should also set up a reasonable CLASSPATH environment
variable to use Java applications that make use of any
nonstandard classes (not included in the same directory
as the application itself).</p>
</li>
<li><p>You have to compile BINFMT_MISC either as a module or into
the kernel (<code class="docutils literal notranslate"><span class="pre">CONFIG_BINFMT_MISC</span></code>) and set it up properly.
If you choose to compile it as a module, you will have
to insert it manually with modprobe/insmod, as kmod
cannot easily be supported with binfmt_misc.
Read the file ‘binfmt_misc.txt’ in this directory to know
more about the configuration process.</p></li>
<li><p>Add the following configuration items to binfmt_misc
(you should really have read <code class="docutils literal notranslate"><span class="pre">binfmt_misc.txt</span></code> now):
support for Java applications:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;:Java:M::\xca\xfe\xba\xbe::/usr/local/bin/javawrapper:&#39;
</pre></div>
</div>
<p>support for executable Jar files:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;:ExecutableJAR:E::jar::/usr/local/bin/jarwrapper:&#39;
</pre></div>
</div>
<p>support for Java Applets:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;:Applet:E::html::/usr/bin/appletviewer:&#39;
</pre></div>
</div>
<p>or the following, if you want to be more selective:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;:Applet:M::&lt;!--applet::/usr/bin/appletviewer:&#39;
</pre></div>
</div>
<p>Of course you have to fix the path names. The path/file names given in this
document match the Debian 2.1 system. (i.e. jdk installed in <code class="docutils literal notranslate"><span class="pre">/usr</span></code>,
custom wrappers from this document in <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>)</p>
<p>Note, that for the more selective applet support you have to modify
existing html-files to contain <code class="docutils literal notranslate"><span class="pre">&lt;!--applet--&gt;</span></code> in the first line
(<code class="docutils literal notranslate"><span class="pre">&lt;</span></code> has to be the first character!) to let this work!</p>
<p>For the compiled Java programs you need a wrapper script like the
following (this is because Java is broken in case of the filename
handling), again fix the path names, both in the script and in the
above given configuration string.</p>
<p>You, too, need the little program after the script. Compile like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gcc -O2 -o javaclassname javaclassname.c
</pre></div>
</div>
<p>and stick it to <code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code>.</p>
<p>Both the javawrapper shellscript and the javaclassname program
were supplied by Colin J. Watson &lt;<a class="reference external" href="mailto:cjw44&#37;&#52;&#48;cam&#46;ac&#46;uk">cjw44<span>&#64;</span>cam<span>&#46;</span>ac<span>&#46;</span>uk</a>&gt;.</p>
</li>
</ol>
<p>Javawrapper shell script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># /usr/local/bin/javawrapper - the wrapper for binfmt_misc/java</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      <span class="nb">exec</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="nb">echo</span> Usage: <span class="nv">$0</span> class-file
      <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">CLASS</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">FQCLASS</span><span class="o">=</span><span class="sb">`</span>/usr/local/bin/javaclassname <span class="nv">$1</span><span class="sb">`</span>
<span class="nv">FQCLASSN</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$FQCLASS</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/^.*\.\([^.]*\)$/\1/&#39;</span><span class="sb">`</span>
<span class="nv">FQCLASSP</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$FQCLASS</span> <span class="p">|</span> sed -e <span class="s1">&#39;s-\.-/-g&#39;</span> -e <span class="s1">&#39;s-^[^/]*$--&#39;</span> -e <span class="s1">&#39;s-/[^/]*$--&#39;</span><span class="sb">`</span>

<span class="c1"># for example:</span>
<span class="c1"># CLASS=Test.class</span>
<span class="c1"># FQCLASS=foo.bar.Test</span>
<span class="c1"># FQCLASSN=Test</span>
<span class="c1"># FQCLASSP=foo/bar</span>

<span class="nb">unset</span> CLASSBASE

<span class="nb">declare</span> -i <span class="nv">LINKLEVEL</span><span class="o">=</span><span class="m">0</span>

<span class="k">while</span> :<span class="p">;</span> <span class="k">do</span>
      <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;`basename </span><span class="nv">$CLASS</span><span class="s2"> .class`&quot;</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="nv">$FQCLASSN</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
              <span class="c1"># See if this directory works straight off</span>
              <span class="nb">cd</span> -L <span class="sb">`</span>dirname <span class="nv">$CLASS</span><span class="sb">`</span>
              <span class="nv">CLASSDIR</span><span class="o">=</span><span class="nv">$PWD</span>
              <span class="nb">cd</span> <span class="nv">$OLDPWD</span>
              <span class="k">if</span> <span class="nb">echo</span> <span class="nv">$CLASSDIR</span> <span class="p">|</span> grep -q <span class="s2">&quot;</span><span class="nv">$FQCLASSP</span>$<span class="s2">&quot;</span><span class="p">;</span> <span class="k">then</span>
                      <span class="nv">CLASSBASE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$CLASSDIR</span> <span class="p">|</span> sed -e <span class="s2">&quot;s.</span><span class="nv">$FQCLASSP</span>$<span class="s2">..&quot;</span><span class="sb">`</span>
                      break<span class="p">;</span>
              <span class="k">fi</span>
              <span class="c1"># Try dereferencing the directory name</span>
              <span class="nb">cd</span> -P <span class="sb">`</span>dirname <span class="nv">$CLASS</span><span class="sb">`</span>
              <span class="nv">CLASSDIR</span><span class="o">=</span><span class="nv">$PWD</span>
              <span class="nb">cd</span> <span class="nv">$OLDPWD</span>
              <span class="k">if</span> <span class="nb">echo</span> <span class="nv">$CLASSDIR</span> <span class="p">|</span> grep -q <span class="s2">&quot;</span><span class="nv">$FQCLASSP</span>$<span class="s2">&quot;</span><span class="p">;</span> <span class="k">then</span>
                      <span class="nv">CLASSBASE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$CLASSDIR</span> <span class="p">|</span> sed -e <span class="s2">&quot;s.</span><span class="nv">$FQCLASSP</span>$<span class="s2">..&quot;</span><span class="sb">`</span>
                      break<span class="p">;</span>
              <span class="k">fi</span>
              <span class="c1"># If no other possible filename exists</span>
              <span class="k">if</span> <span class="o">[</span> ! -L <span class="nv">$CLASS</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                      <span class="nb">exec</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
                      <span class="nb">echo</span> <span class="nv">$0</span>:
                      <span class="nb">echo</span> <span class="s2">&quot;  </span><span class="nv">$CLASS</span><span class="s2"> should be in a&quot;</span> <span class="se">\</span>
                           <span class="s2">&quot;directory tree called </span><span class="nv">$FQCLASSP</span><span class="s2">&quot;</span>
                      <span class="nb">exit</span> <span class="m">1</span>
              <span class="k">fi</span>
      <span class="k">fi</span>
      <span class="k">if</span> <span class="o">[</span> ! -L <span class="nv">$CLASS</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> break<span class="p">;</span> <span class="k">fi</span>
      <span class="c1"># Go down one more level of symbolic links</span>
      <span class="nb">let</span> <span class="nv">LINKLEVEL</span><span class="o">+=</span><span class="m">1</span>
      <span class="k">if</span> <span class="o">[</span> <span class="nv">$LINKLEVEL</span> -gt <span class="m">5</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
              <span class="nb">exec</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
              <span class="nb">echo</span> <span class="nv">$0</span>:
              <span class="nb">echo</span> <span class="s2">&quot;  Too many symbolic links encountered&quot;</span>
              <span class="nb">exit</span> <span class="m">1</span>
      <span class="k">fi</span>
      <span class="nv">CLASS</span><span class="o">=</span><span class="sb">`</span>ls --color<span class="o">=</span>no -l <span class="nv">$CLASS</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/^.* \([^ ]*\)$/\1/&#39;</span><span class="sb">`</span>
<span class="k">done</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$CLASSBASE</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$FQCLASSP</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
              <span class="nv">GOODNAME</span><span class="o">=</span><span class="nv">$FQCLASSN</span>.class
      <span class="k">else</span>
              <span class="nv">GOODNAME</span><span class="o">=</span><span class="nv">$FQCLASSP</span>/<span class="nv">$FQCLASSN</span>.class
      <span class="k">fi</span>
      <span class="nb">exec</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="nb">echo</span> <span class="nv">$0</span>:
      <span class="nb">echo</span> <span class="s2">&quot;  </span><span class="nv">$FQCLASS</span><span class="s2"> should be in a file called </span><span class="nv">$GOODNAME</span><span class="s2">&quot;</span>
      <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="k">if</span> ! <span class="nb">echo</span> <span class="nv">$CLASSPATH</span> <span class="p">|</span> grep -q <span class="s2">&quot;^\(.*:\)*</span><span class="nv">$CLASSBASE</span><span class="s2">\(:.*\)*&quot;</span><span class="p">;</span> <span class="k">then</span>
      <span class="c1"># class is not in CLASSPATH, so prepend dir of class to CLASSPATH</span>
      <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="si">${</span><span class="nv">CLASSPATH</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
              <span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">$CLASSBASE</span>
      <span class="k">else</span>
              <span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">$CLASSBASE</span>:<span class="nv">$CLASSPATH</span>
      <span class="k">fi</span>
<span class="k">fi</span>

<span class="nb">shift</span>
/usr/bin/java <span class="nv">$FQCLASS</span> <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>javaclassname.c:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* javaclassname.c</span>
<span class="cm"> *</span>
<span class="cm"> * Extracts the class name from a Java class file; intended for use in a Java</span>
<span class="cm"> * wrapper of the type supported by the binfmt_misc option in the Linux kernel.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 1999 Colin J. Watson &lt;cjw44@cam.ac.uk&gt;.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdarg.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp"></span>

<span class="cm">/* From Sun&#39;s Java VM Specification, as tag entries in the constant pool. */</span>

<span class="cp">#define CP_UTF8 1</span>
<span class="cp">#define CP_INTEGER 3</span>
<span class="cp">#define CP_FLOAT 4</span>
<span class="cp">#define CP_LONG 5</span>
<span class="cp">#define CP_DOUBLE 6</span>
<span class="cp">#define CP_CLASS 7</span>
<span class="cp">#define CP_STRING 8</span>
<span class="cp">#define CP_FIELDREF 9</span>
<span class="cp">#define CP_METHODREF 10</span>
<span class="cp">#define CP_INTERFACEMETHODREF 11</span>
<span class="cp">#define CP_NAMEANDTYPE 12</span>
<span class="cp">#define CP_METHODHANDLE 15</span>
<span class="cp">#define CP_METHODTYPE 16</span>
<span class="cp">#define CP_INVOKEDYNAMIC 18</span>

<span class="cm">/* Define some commonly used error messages */</span>

<span class="cp">#define seek_error() error(&quot;%s: Cannot seek\n&quot;, program)</span>
<span class="cp">#define corrupt_error() error(&quot;%s: Class file corrupt\n&quot;, program)</span>
<span class="cp">#define eof_error() error(&quot;%s: Unexpected end of file\n&quot;, program)</span>
<span class="cp">#define utf8_error() error(&quot;%s: Only ASCII 1-255 supported\n&quot;, program);</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">program</span><span class="p">;</span>

<span class="kt">long</span> <span class="o">*</span><span class="n">pool</span><span class="p">;</span>

<span class="n">u_int8_t</span> <span class="nf">read_8</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">);</span>
<span class="n">u_int16_t</span> <span class="nf">read_16</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">skip_constant</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">,</span> <span class="n">u_int16_t</span> <span class="o">*</span><span class="n">cur</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">error</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">);</span>

<span class="cm">/* Reads in an unsigned 8-bit integer. */</span>
<span class="n">u_int8_t</span> <span class="nf">read_8</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">)</span>
<span class="p">{</span>
      <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">fgetc</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">)</span>
              <span class="n">eof_error</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">u_int8_t</span><span class="p">)</span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Reads in an unsigned 16-bit integer. */</span>
<span class="n">u_int16_t</span> <span class="nf">read_16</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">)</span>
<span class="p">{</span>
      <span class="kt">int</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">;</span>
      <span class="n">b1</span> <span class="o">=</span> <span class="n">fgetc</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">b1</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">)</span>
              <span class="n">eof_error</span><span class="p">();</span>
      <span class="n">b2</span> <span class="o">=</span> <span class="n">fgetc</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">b2</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">)</span>
              <span class="n">eof_error</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">u_int16_t</span><span class="p">)((</span><span class="n">b1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">b2</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Reads in a value from the constant pool. */</span>
<span class="kt">void</span> <span class="nf">skip_constant</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">,</span> <span class="n">u_int16_t</span> <span class="o">*</span><span class="n">cur</span><span class="p">)</span>
<span class="p">{</span>
      <span class="n">u_int16_t</span> <span class="n">len</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">seekerr</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">pool</span><span class="p">[</span><span class="o">*</span><span class="n">cur</span><span class="p">]</span> <span class="o">=</span> <span class="n">ftell</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">switch</span><span class="p">(</span><span class="n">read_8</span><span class="p">(</span><span class="n">classfile</span><span class="p">))</span>
      <span class="p">{</span>
      <span class="k">case</span> <span class="nl">CP_UTF8</span><span class="p">:</span>
              <span class="n">len</span> <span class="o">=</span> <span class="n">read_16</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
              <span class="n">seekerr</span> <span class="o">=</span> <span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">CP_CLASS</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_STRING</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_METHODTYPE</span><span class="p">:</span>
              <span class="n">seekerr</span> <span class="o">=</span> <span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">CP_METHODHANDLE</span><span class="p">:</span>
              <span class="n">seekerr</span> <span class="o">=</span> <span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">CP_INTEGER</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_FLOAT</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_FIELDREF</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_METHODREF</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_INTERFACEMETHODREF</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_NAMEANDTYPE</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_INVOKEDYNAMIC</span><span class="p">:</span>
              <span class="n">seekerr</span> <span class="o">=</span> <span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">CP_LONG</span><span class="p">:</span>
      <span class="k">case</span> <span class="nl">CP_DOUBLE</span><span class="p">:</span>
              <span class="n">seekerr</span> <span class="o">=</span> <span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">);</span>
              <span class="o">++</span><span class="p">(</span><span class="o">*</span><span class="n">cur</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
      <span class="k">default</span><span class="o">:</span>
              <span class="n">corrupt_error</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="n">seekerr</span><span class="p">)</span>
              <span class="n">seek_error</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">error</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
      <span class="kt">va_list</span> <span class="n">ap</span><span class="p">;</span>
      <span class="n">va_start</span><span class="p">(</span><span class="n">ap</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
      <span class="n">vfprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">ap</span><span class="p">);</span>
      <span class="n">va_end</span><span class="p">(</span><span class="n">ap</span><span class="p">);</span>
      <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
      <span class="kt">FILE</span> <span class="o">*</span><span class="n">classfile</span><span class="p">;</span>
      <span class="n">u_int16_t</span> <span class="n">cp_count</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">this_class</span><span class="p">,</span> <span class="n">classinfo_ptr</span><span class="p">;</span>
      <span class="n">u_int8_t</span> <span class="n">length</span><span class="p">;</span>

      <span class="n">program</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
              <span class="n">error</span><span class="p">(</span><span class="s">&quot;%s: Missing input file</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">program</span><span class="p">);</span>
      <span class="n">classfile</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;rb&quot;</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">classfile</span><span class="p">)</span>
              <span class="n">error</span><span class="p">(</span><span class="s">&quot;%s: Error opening %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">program</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

      <span class="k">if</span><span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">))</span>  <span class="cm">/* skip magic and version numbers */</span>
              <span class="n">seek_error</span><span class="p">();</span>
      <span class="n">cp_count</span> <span class="o">=</span> <span class="n">read_16</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="n">pool</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">cp_count</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span><span class="p">));</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">pool</span><span class="p">)</span>
              <span class="n">error</span><span class="p">(</span><span class="s">&quot;%s: Out of memory for constant pool</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">program</span><span class="p">);</span>

      <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">cp_count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
              <span class="n">skip_constant</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SEEK_CUR</span><span class="p">))</span>       <span class="cm">/* skip access flags */</span>
              <span class="n">seek_error</span><span class="p">();</span>

      <span class="n">this_class</span> <span class="o">=</span> <span class="n">read_16</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">this_class</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">this_class</span> <span class="o">&gt;=</span> <span class="n">cp_count</span><span class="p">)</span>
              <span class="n">corrupt_error</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">pool</span><span class="p">[</span><span class="n">this_class</span><span class="p">]</span> <span class="o">||</span> <span class="n">pool</span><span class="p">[</span><span class="n">this_class</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
              <span class="n">corrupt_error</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="n">pool</span><span class="p">[</span><span class="n">this_class</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">))</span>
              <span class="n">seek_error</span><span class="p">();</span>

      <span class="n">classinfo_ptr</span> <span class="o">=</span> <span class="n">read_16</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">classinfo_ptr</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">classinfo_ptr</span> <span class="o">&gt;=</span> <span class="n">cp_count</span><span class="p">)</span>
              <span class="n">corrupt_error</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">pool</span><span class="p">[</span><span class="n">classinfo_ptr</span><span class="p">]</span> <span class="o">||</span> <span class="n">pool</span><span class="p">[</span><span class="n">classinfo_ptr</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
              <span class="n">corrupt_error</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">classfile</span><span class="p">,</span> <span class="n">pool</span><span class="p">[</span><span class="n">classinfo_ptr</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">))</span>
              <span class="n">seek_error</span><span class="p">();</span>

      <span class="n">length</span> <span class="o">=</span> <span class="n">read_16</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
      <span class="p">{</span>
              <span class="n">u_int8_t</span> <span class="n">x</span> <span class="o">=</span> <span class="n">read_8</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
              <span class="k">if</span><span class="p">((</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">x</span><span class="p">)</span>
              <span class="p">{</span>
                      <span class="k">if</span><span class="p">((</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0xE0</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0xC0</span><span class="p">)</span>
                      <span class="p">{</span>
                              <span class="n">u_int8_t</span> <span class="n">y</span> <span class="o">=</span> <span class="n">read_8</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
                              <span class="k">if</span><span class="p">((</span><span class="n">y</span> <span class="o">&amp;</span> <span class="mh">0xC0</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x80</span><span class="p">)</span>
                              <span class="p">{</span>
                                      <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="p">((</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0x1f</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">);</span>
                                      <span class="k">if</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="n">putchar</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
                                      <span class="k">else</span> <span class="n">utf8_error</span><span class="p">();</span>
                              <span class="p">}</span>
                              <span class="k">else</span> <span class="n">utf8_error</span><span class="p">();</span>
                      <span class="p">}</span>
                      <span class="k">else</span> <span class="n">utf8_error</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">)</span> <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
              <span class="k">else</span> <span class="n">putchar</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
      <span class="n">free</span><span class="p">(</span><span class="n">pool</span><span class="p">);</span>
      <span class="n">fclose</span><span class="p">(</span><span class="n">classfile</span><span class="p">);</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>jarwrapper:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
# /usr/local/java/bin/jarwrapper - the wrapper for binfmt_misc/jar

java -jar $1
</pre></div>
</div>
<p>Now simply <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span></code> the <code class="docutils literal notranslate"><span class="pre">.class</span></code>, <code class="docutils literal notranslate"><span class="pre">.jar</span></code> and/or <code class="docutils literal notranslate"><span class="pre">.html</span></code> files you
want to execute.</p>
<p>To add a Java program to your path best put a symbolic link to the main
.class file into /usr/bin (or another place you like) omitting the .class
extension. The directory containing the original .class file will be
added to your CLASSPATH during execution.</p>
<p>To test your new setup, enter in the following simple Java app, and name
it “HelloWorld.java”:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now compile the application with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>javac HelloWorld.java
</pre></div>
</div>
<p>Set the executable permissions of the binary file, with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>chmod 755 HelloWorld.class
</pre></div>
</div>
<p>And then execute it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./HelloWorld.class
</pre></div>
</div>
<p>To execute Java Jar files, simple chmod the <code class="docutils literal notranslate"><span class="pre">*.jar</span></code> files to include
the execution bit, then just do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./Application.jar
</pre></div>
</div>
<p>To execute Java Applets, simple chmod the <code class="docutils literal notranslate"><span class="pre">*.html</span></code> files to include
the execution bit, then just do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./Applet.html
</pre></div>
</div>
<p>originally by Brian A. Lantz, <a class="reference external" href="mailto:brian&#37;&#52;&#48;lantz&#46;com">brian<span>&#64;</span>lantz<span>&#46;</span>com</a>
heavily edited for binfmt_misc by Richard Günther
new scripts by Colin J. Watson &lt;<a class="reference external" href="mailto:cjw44&#37;&#52;&#48;cam&#46;ac&#46;uk">cjw44<span>&#64;</span>cam<span>&#46;</span>ac<span>&#46;</span>uk</a>&gt;
added executable Jar file support by Kurt Huwig &lt;<a class="reference external" href="mailto:kurt&#37;&#52;&#48;iku-netz&#46;de">kurt<span>&#64;</span>iku-netz<span>&#46;</span>de</a>&gt;</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="jfs.html" class="btn btn-neutral float-right" title="IBM’s Journaled File System (JFS) for Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iostats.html" class="btn btn-neutral float-left" title="I/O statistics fields" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright The kernel development community

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>