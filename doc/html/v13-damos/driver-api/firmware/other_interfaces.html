

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Other Firmware Interfaces &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Other Firmware Interfaces</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/driver-api/firmware/other_interfaces.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="other-firmware-interfaces">
<h1>Other Firmware Interfaces<a class="headerlink" href="#other-firmware-interfaces" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dmi-interfaces">
<h2>DMI Interfaces<a class="headerlink" href="#dmi-interfaces" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.dmi_check_system">
int <code class="descname">dmi_check_system</code><span class="sig-paren">(</span>const struct dmi_system_id *<em>&nbsp;list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_check_system" title="Permalink to this definition">¶</a></dt>
<dd><p>check system DMI data</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*</span> <span class="pre">list</span></code></dt>
<dd>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>Walk the blacklist table running matching functions until someone
returns non zero or we hit the end. Callback function is called for
each successful match. Returns the number of matches.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
<dl class="function">
<dt id="c.dmi_first_match">
const struct dmi_system_id * <code class="descname">dmi_first_match</code><span class="sig-paren">(</span>const struct dmi_system_id *<em>&nbsp;list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_first_match" title="Permalink to this definition">¶</a></dt>
<dd><p>find dmi_system_id structure matching system DMI data</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*</span> <span class="pre">list</span></code></dt>
<dd>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>Walk the blacklist table until the first match is found.  Return the
pointer to the matching entry or NULL if there’s no match.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
<dl class="function">
<dt id="c.dmi_get_system_info">
const char * <code class="descname">dmi_get_system_info</code><span class="sig-paren">(</span>int<em>&nbsp;field</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_system_info" title="Permalink to this definition">¶</a></dt>
<dd><p>return DMI data value</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt>
<dd>data index (see enum dmi_field)</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>Returns one DMI data value, can be used to perform
complex DMI data checks.</div></blockquote>
<dl class="function">
<dt id="c.dmi_name_in_vendors">
int <code class="descname">dmi_name_in_vendors</code><span class="sig-paren">(</span>const char *<em>&nbsp;str</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_name_in_vendors" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if string is in the DMI system or board vendor name</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">str</span></code></dt>
<dd>Case sensitive Name</dd>
</dl>
<dl class="function">
<dt id="c.dmi_find_device">
const struct dmi_device * <code class="descname">dmi_find_device</code><span class="sig-paren">(</span>int<em>&nbsp;type</em>, const char *<em>&nbsp;name</em>, const struct dmi_device *<em>&nbsp;from</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_find_device" title="Permalink to this definition">¶</a></dt>
<dd><p>find onboard device by type/name</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">type</span></code></dt>
<dd>device type or <code class="docutils literal notranslate"><span class="pre">DMI_DEV_TYPE_ANY</span></code> to match all device types</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">name</span></code></dt>
<dd>device name string or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to match all</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_device</span> <span class="pre">*</span> <span class="pre">from</span></code></dt>
<dd>previous device found in search, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for new search.</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>Iterates through the list of known onboard devices. If a device is
found with a matching <strong>type</strong> and <strong>name</strong>, a pointer to its device
structure is returned.  Otherwise, <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned.
A new search is initiated by passing <code class="docutils literal notranslate"><span class="pre">NULL</span></code> as the <strong>from</strong> argument.
If <strong>from</strong> is not <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, searches continue from next device.</div></blockquote>
<dl class="function">
<dt id="c.dmi_get_date">
bool <code class="descname">dmi_get_date</code><span class="sig-paren">(</span>int<em>&nbsp;field</em>, int *<em>&nbsp;yearp</em>, int *<em>&nbsp;monthp</em>, int *<em>&nbsp;dayp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a DMI date</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt>
<dd>data index (see enum dmi_field)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">yearp</span></code></dt>
<dd>optional out parameter for the year</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">monthp</span></code></dt>
<dd>optional out parameter for the month</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">dayp</span></code></dt>
<dd>optional out parameter for the day</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>The date field is assumed to be in the form resembling
[mm[/dd]]/yy[yy] and the result is stored in the out
parameters any or all of which can be omitted.</p>
<p>If the field doesn’t exist, all out parameters are set to zero
and false is returned.  Otherwise, true is returned with any
invalid part of date set to zero.</p>
<p>On return, year, month and day are guaranteed to be in the
range of [0,9999], [0,12] and [0,31] respectively.</p>
</div></blockquote>
<dl class="function">
<dt id="c.dmi_get_bios_year">
int <code class="descname">dmi_get_bios_year</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_bios_year" title="Permalink to this definition">¶</a></dt>
<dd><p>get a year out of DMI_BIOS_DATE field</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>Returns year on success, -ENXIO if DMI is not selected,
or a different negative error code if DMI field is not present
or not parseable.</div></blockquote>
<dl class="function">
<dt id="c.dmi_walk">
int <code class="descname">dmi_walk</code><span class="sig-paren">(</span>void (*decode) (const struct dmi_header<em>&nbsp;*</em>, void<em>&nbsp;*</em>, void *<em>&nbsp;private_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk the DMI table and get called back for every record</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*)(const</span> <span class="pre">struct</span> <span class="pre">dmi_header</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span> <span class="pre">decode</span></code></dt>
<dd>Callback function</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">private_data</span></code></dt>
<dd>Private data to be passed to the callback function</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>Returns 0 on success, -ENXIO if DMI is not selected or not present,
or a different negative error code if DMI walking fails.</div></blockquote>
<dl class="function">
<dt id="c.dmi_match">
bool <code class="descname">dmi_match</code><span class="sig-paren">(</span>enum dmi_field<em>&nbsp;f</em>, const char *<em>&nbsp;str</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_match" title="Permalink to this definition">¶</a></dt>
<dd><p>compare a string to the dmi field (if exists)</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">dmi_field</span> <span class="pre">f</span></code></dt>
<dd>DMI field identifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">str</span></code></dt>
<dd>string to compare the DMI field to</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the requested field equals to the str (including NULL).</p>
<dl class="function">
<dt id="c.dmi_memdev_type">
u8 <code class="descname">dmi_memdev_type</code><span class="sig-paren">(</span>u16<em>&nbsp;handle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_type" title="Permalink to this definition">¶</a></dt>
<dd><p>get the memory type</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">handle</span></code></dt>
<dd>DMI structure handle</dd>
</dl>
<p><strong>Description</strong></p>
<p>Return the DMI memory type of the module in the slot associated with the
given DMI handle, or 0x0 if no such DMI handle exists.</p>
<dl class="function">
<dt id="c.dmi_memdev_handle">
u16 <code class="descname">dmi_memdev_handle</code><span class="sig-paren">(</span>int<em>&nbsp;slot</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>get the DMI handle of a memory slot</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">slot</span></code></dt>
<dd>slot number</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>Return the DMI handle associated with a given memory slot, or <code class="docutils literal notranslate"><span class="pre">0xFFFF</span></code>
if there is no such slot.</div></blockquote>
</div>
<div class="section" id="edd-interfaces">
<h2>EDD Interfaces<a class="headerlink" href="#edd-interfaces" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.edd_show_raw_data">
ssize_t <code class="descname">edd_show_raw_data</code><span class="sig-paren">(</span>struct edd_device *<em>&nbsp;edev</em>, char *<em>&nbsp;buf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_show_raw_data" title="Permalink to this definition">¶</a></dt>
<dd><p>copies raw data to buffer for userspace to parse</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>target edd_device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span> <span class="pre">buf</span></code></dt>
<dd>output buffer</dd>
</dl>
<p><strong>Return</strong></p>
<p>number of bytes written, or -EINVAL on failure</p>
<dl class="function">
<dt id="c.edd_release">
void <code class="descname">edd_release</code><span class="sig-paren">(</span>struct kobject *<em>&nbsp;kobj</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_release" title="Permalink to this definition">¶</a></dt>
<dd><p>free edd structure</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">kobject</span> <span class="pre">*</span> <span class="pre">kobj</span></code></dt>
<dd>kobject of edd structure</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>This is called when the refcount of the edd structure
reaches 0. This should happen right after we unregister,
but just in case, we use the release callback anyway.</div></blockquote>
<dl class="function">
<dt id="c.edd_dev_is_type">
int <code class="descname">edd_dev_is_type</code><span class="sig-paren">(</span>struct edd_device *<em>&nbsp;edev</em>, const char *<em>&nbsp;type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_dev_is_type" title="Permalink to this definition">¶</a></dt>
<dd><p>is this EDD device a ‘type’ device?</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>target edd_device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">type</span></code></dt>
<dd>a host bus or interface identifier string per the EDD spec</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 1 (TRUE) if it is a ‘type’ device, 0 otherwise.</p>
<dl class="function">
<dt id="c.edd_get_pci_dev">
struct pci_dev * <code class="descname">edd_get_pci_dev</code><span class="sig-paren">(</span>struct edd_device *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_get_pci_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>finds pci_dev that matches edev</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>edd_device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns pci_dev if found, or NULL</p>
<dl class="function">
<dt id="c.edd_init">
int <code class="descname">edd_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.edd_init" title="Permalink to this definition">¶</a></dt>
<dd><p>creates sysfs tree of EDD data</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
</div>
<div class="section" id="intel-stratix10-soc-service-layer">
<h2>Intel Stratix10 SoC Service Layer<a class="headerlink" href="#intel-stratix10-soc-service-layer" title="Permalink to this headline">¶</a></h2>
<p>Some features of the Intel Stratix10 SoC require a level of privilege
higher than the kernel is granted. Such secure features include
FPGA programming. In terms of the ARMv8 architecture, the kernel runs
at Exception Level 1 (EL1), access to the features requires
Exception Level 3 (EL3).</p>
<p>The Intel Stratix10 SoC service layer provides an in kernel API for
drivers to request access to the secure features. The requests are queued
and processed one by one. ARM’s SMCCC is used to pass the execution
of the requests on to a secure monitor (EL3).</p>
<dl class="type">
<dt id="c.stratix10_svc_command_code">
enum <code class="descname">stratix10_svc_command_code</code><a class="headerlink" href="#c.stratix10_svc_command_code" title="Permalink to this definition">¶</a></dt>
<dd><p>supported service commands</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_NOOP</span></code></dt>
<dd>do ‘dummy’ request for integration/debug/trouble-shooting</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG</span></code></dt>
<dd>ask for FPGA configuration preparation, return status
is SVC_STATUS_RECONFIG_REQUEST_OK</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_SUBMIT</span></code></dt>
<dd>submit buffer(s) of bit-stream data for the
FPGA configuration, return status is SVC_STATUS_RECONFIG_BUFFER_SUBMITTED,
or SVC_STATUS_RECONFIG_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_CLAIM</span></code></dt>
<dd>check the status of the configuration, return
status is SVC_STATUS_RECONFIG_COMPLETED, or SVC_STATUS_RECONFIG_BUSY, or
SVC_STATUS_RECONFIG_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_STATUS</span></code></dt>
<dd>check the status of the configuration, return
status is SVC_STATUS_RECONFIG_COMPLETED, or  SVC_STATUS_RECONFIG_BUSY, or
SVC_STATUS_RECONFIG_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_STATUS</span></code></dt>
<dd>request remote system update boot log, return status
is log data or SVC_STATUS_RSU_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_UPDATE</span></code></dt>
<dd>set the offset of the bitstream to boot after reboot,
return status is SVC_STATUS_RSU_OK or SVC_STATUS_RSU_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_NOTIFY</span></code></dt>
<dd>report the status of hard processor system
software to firmware, return status is SVC_STATUS_RSU_OK or
SVC_STATUS_RSU_ERROR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_RETRY</span></code></dt>
<dd>query firmware for the current image’s retry counter,
return status is SVC_STATUS_RSU_OK or SVC_STATUS_RSU_ERROR</dd>
</dl>
<dl class="type">
<dt id="c.stratix10_svc_client_msg">
struct <code class="descname">stratix10_svc_client_msg</code><a class="headerlink" href="#c.stratix10_svc_client_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>message sent by client to service</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client_msg {
  void *payload;
  size_t payload_length;
  enum stratix10_svc_command_code command;
  u64 arg[3];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">payload</span></code></dt>
<dd>starting address of data need be processed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_length</span></code></dt>
<dd>data size in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt>
<dd>service command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">arg</span></code></dt>
<dd>args to be passed via registers and not physically mapped buffers</dd>
</dl>
<dl class="type">
<dt id="c.stratix10_svc_command_config_type">
struct <code class="descname">stratix10_svc_command_config_type</code><a class="headerlink" href="#c.stratix10_svc_command_config_type" title="Permalink to this definition">¶</a></dt>
<dd><p>config type</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_command_config_type {
  u32 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt>
<dd>flag bit for the type of FPGA configuration</dd>
</dl>
<dl class="type">
<dt id="c.stratix10_svc_cb_data">
struct <code class="descname">stratix10_svc_cb_data</code><a class="headerlink" href="#c.stratix10_svc_cb_data" title="Permalink to this definition">¶</a></dt>
<dd><p>callback data structure from service layer</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_cb_data {
  u32 status;
  void *kaddr1;
  void *kaddr2;
  void *kaddr3;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt>
<dd>the status of sent command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr1</span></code></dt>
<dd>address of 1st completed data block</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr2</span></code></dt>
<dd>address of 2nd completed data block</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr3</span></code></dt>
<dd>address of 3rd completed data block</dd>
</dl>
<dl class="type">
<dt id="c.stratix10_svc_client">
struct <code class="descname">stratix10_svc_client</code><a class="headerlink" href="#c.stratix10_svc_client" title="Permalink to this definition">¶</a></dt>
<dd><p>service client structure</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client {
  struct device *dev;
  void (*receive_cb)(struct stratix10_svc_client *client, struct stratix10_svc_cb_data *cb_data);
  void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>the client device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">receive_cb</span></code></dt>
<dd>callback to provide service client the received data</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt>
<dd>client private data</dd>
</dl>
<dl class="function">
<dt id="c.stratix10_svc_request_channel_byname">
struct stratix10_svc_chan * <code class="descname">stratix10_svc_request_channel_byname</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.stratix10_svc_client" title="stratix10_svc_client">stratix10_svc_client</a> *<em>&nbsp;client</em>, const char *<em>&nbsp;name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_request_channel_byname" title="Permalink to this definition">¶</a></dt>
<dd><p>request a service channel</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_client</span> <span class="pre">*</span> <span class="pre">client</span></code></dt>
<dd>pointer to service client</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">name</span></code></dt>
<dd>service client name</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to request a service channel.</p>
<p><strong>Return</strong></p>
<p>a pointer to channel assigned to the client on success,
or ERR_PTR() on error.</p>
<dl class="function">
<dt id="c.stratix10_svc_free_channel">
void <code class="descname">stratix10_svc_free_channel</code><span class="sig-paren">(</span>struct stratix10_svc_chan *<em>&nbsp;chan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>free service channel</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>service channel to be freed</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free a service channel.</p>
<dl class="function">
<dt id="c.stratix10_svc_send">
int <code class="descname">stratix10_svc_send</code><span class="sig-paren">(</span>struct stratix10_svc_chan *<em>&nbsp;chan</em>, void *<em>&nbsp;msg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_send" title="Permalink to this definition">¶</a></dt>
<dd><p>send a message data to the remote</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>service channel assigned to the client</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">msg</span></code></dt>
<dd>message data to be sent, in the format of
“struct stratix10_svc_client_msg”</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to add a message to the service
layer driver’s queue for being sent to the secure world.</p>
<p><strong>Return</strong></p>
<p>0 for success, -ENOMEM or -ENOBUFS on error.</p>
<dl class="function">
<dt id="c.stratix10_svc_done">
void <code class="descname">stratix10_svc_done</code><span class="sig-paren">(</span>struct stratix10_svc_chan *<em>&nbsp;chan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_done" title="Permalink to this definition">¶</a></dt>
<dd><p>complete service request transactions</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>service channel assigned to the client</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function should be called when client has finished its request
or there is an error in the request process. It allows the service layer
to stop the running thread to have maximize savings in kernel resources.</p>
<dl class="function">
<dt id="c.stratix10_svc_allocate_memory">
void * <code class="descname">stratix10_svc_allocate_memory</code><span class="sig-paren">(</span>struct stratix10_svc_chan *<em>&nbsp;chan</em>, size_t<em>&nbsp;size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_allocate_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>allocate memory</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>service channel assigned to the client</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>memory size requested by a specific service client</dd>
</dl>
<p><strong>Description</strong></p>
<p>Service layer allocates the requested number of bytes buffer from the
memory pool, service client uses this function to get allocated buffers.</p>
<p><strong>Return</strong></p>
<p>address of allocated memory on success, or ERR_PTR() on error.</p>
<dl class="function">
<dt id="c.stratix10_svc_free_memory">
void <code class="descname">stratix10_svc_free_memory</code><span class="sig-paren">(</span>struct stratix10_svc_chan *<em>&nbsp;chan</em>, void *<em>&nbsp;kaddr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>free allocated memory</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*</span> <span class="pre">chan</span></code></dt>
<dd>service channel assigned to the client</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">kaddr</span></code></dt>
<dd>memory to be freed</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free allocated buffers.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>