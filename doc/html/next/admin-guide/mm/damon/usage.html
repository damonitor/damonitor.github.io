

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Detailed Usages &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="HugeTLB Pages" href="../hugetlbpage.html" />
    <link rel="prev" title="Optimization Guide" href="guide.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">The Linux kernel user’s and administrator’s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../README.html">Linux kernel release 5.x &lt;http://kernel.org/&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel-parameters.html">The kernel’s command-line parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devices.html">Linux allocated devices (4.x+ version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysctl/index.html">Documentation for /proc/sys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hw-vuln/index.html">Hardware vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reporting-bugs.html">Reporting bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security-bugs.html">Security bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bug-hunting.html">Bug hunting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bug-bisect.html">Bisecting a bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tainted-kernels.html">Tainted kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ramoops.html">Ramoops oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dynamic-debug-howto.html">Dynamic debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../init.html">Explaining the dreaded “No init found.” boot hang message</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kdump/index.html">Documentation for Kdump - The kexec-based Crash Dumping Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../perf/index.html">Performance monitor support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysfs-rules.html">Rules on how to access information in sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../aoe/index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bcache.html">A block layer cache (bcache)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../binderfs.html">The Android binderfs Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../blockdev/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bootconfig.html">Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cifs/index.html">CIFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clearing-warn-once.html">Clearing WARN_ONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cpu-load.html">CPU load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cputopology.html">How CPU topology info is exported via sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../device-mapper/index.html">Device Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../efi-stub.html">The EFI Boot Stub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ext4.html">ext4 General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nfs/index.html">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gpio/index.html">gpio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../highuid.html">Notes on the change from 16-bit UIDs to 32-bit UIDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hw_random.html">Linux support for random number generator in i8xx chipsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../initrd.html">Using the initial RAM disk (initrd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iostats.html">I/O statistics fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../java.html">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jfs.html">IBM’s Journaled File System (JFS) for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel-per-CPU-kthreads.html">Reducing OS jitter due to per-cpu kthreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ldm.html">LDM - Logical Disk Manager (Dynamic Disks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lockup-watchdogs.html">Softlockup detector and hardlockup detector (aka nmi_watchdog)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../LSM/index.html">Linux Security Module Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../md.html">RAID arrays</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Memory Management</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../concepts.html">Concepts overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cma_debugfs.html">CMA Debugfs Interface</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">DAMON: Data Access MONitor</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="start.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html">Optimization Guide</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Detailed Usages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hugetlbpage.html">HugeTLB Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../idle_page_tracking.html">Idle Page Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ksm.html">Kernel Samepage Merging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memory-hotplug.html">Memory Hotplug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numa_memory_policy.html">NUMA Memory Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numaperf.html">NUMA Locality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numaperf.html#numa-performance">NUMA Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numaperf.html#numa-cache">NUMA Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numaperf.html#see-also">See Also</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pagemap.html">Examining Process Page Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../soft-dirty.html">Soft-Dirty PTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../transhuge.html">Transparent Hugepage Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../userfaultfd.html">Userfaultfd</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parport.html">Parport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../perf-security.html">Perf Events and tool security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ras.html">Reliability, Availability and Serviceability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sysrq.html">Linux Magic System Request Key Hacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ufs.html">Using UFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../unicode.html">Unicode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../video-output.html">Video Output Switcher Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wimax/index.html">WiMAX subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../xfs.html">The SGI XFS Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arm/index.html">ARM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../arm64/index.html">ARM64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ia64/index.html">IA-64 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../m68k/index.html">m68k Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nios2/nios2.html">Linux on the Nios II architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../openrisc/index.html">OpenRISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parisc/index.html">PA-RISC Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../riscv/index.html">RISC-V architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../s390/index.html">s390 Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sparc/index.html">Sparc Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../x86/index.html">x86-specific Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../xtensa/index.html">Xtensa Architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">The Linux kernel user’s and administrator’s guide</a> &raquo;</li>
        
          <li><a href="../index.html">Memory Management</a> &raquo;</li>
        
          <li><a href="index.html">DAMON: Data Access MONitor</a> &raquo;</li>
        
      <li>Detailed Usages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/admin-guide/mm/damon/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="detailed-usages">
<h1>Detailed Usages<a class="headerlink" href="#detailed-usages" title="Permalink to this headline">¶</a></h1>
<p>DAMON provides below three interfaces for different users.</p>
<ul class="simple">
<li><em>DAMON user space tool.</em>
This is for privileged people such as system administrators who want a
just-working human-friendly interface.  Using this, users can use the DAMON’s
major features in a human-friendly way.  It may not be highly tuned for
special cases, though.  It supports both virtual and physical address spaces
monitoring.</li>
<li><em>debugfs interface.</em>
This is for privileged user space programmers who want more optimized use of
DAMON.  Using this, users can use DAMON’s major features by reading
from and writing to special debugfs files.  Therefore, you can write and use
your personalized DAMON debugfs wrapper programs that reads/writes the
debugfs files instead of you.  The DAMON user space tool is also a reference
implementation of such programs.  It supports both virtual and physical
address spaces monitoring.</li>
<li><em>Kernel Space Programming Interface.</em>
This is for kernel space programmers.  Using this, users can utilize every
feature of DAMON most flexibly and efficiently by writing kernel space
DAMON application programs for you.  You can even extend DAMON for various
address spaces.</li>
</ul>
<p>This document does not describe the kernel space programming interface in
detail.  For that, please refer to the <a class="reference internal" href="../../../vm/damon/api.html"><span class="doc">API Reference</span></a>.</p>
<div class="section" id="damon-user-sapce-tool">
<h2>DAMON User Sapce Tool<a class="headerlink" href="#damon-user-sapce-tool" title="Permalink to this headline">¶</a></h2>
<p>A reference implementation of the DAMON user space tools which provides a
convenient user interface is in the kernel source tree.  It is located at
<code class="docutils literal notranslate"><span class="pre">tools/damon/damo</span></code> of the tree.</p>
<p>The tool provides a subcommands based interface.  Every subcommand provides
<code class="docutils literal notranslate"><span class="pre">-h</span></code> option, which provides the minimal usage of it.  Currently, the tool
supports two subcommands, <code class="docutils literal notranslate"><span class="pre">record</span></code> and <code class="docutils literal notranslate"><span class="pre">report</span></code>.</p>
<p>Below example commands assume you set <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> to point <code class="docutils literal notranslate"><span class="pre">tools/damon/</span></code> for
brevity.  It is not mandatory for use of <code class="docutils literal notranslate"><span class="pre">damo</span></code>, though.</p>
<div class="section" id="recording-data-access-pattern">
<h3>Recording Data Access Pattern<a class="headerlink" href="#recording-data-access-pattern" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">record</span></code> subcommand records the data access pattern of target workloads
in a file (<code class="docutils literal notranslate"><span class="pre">./damon.data</span></code> by default).  You can specify the target with 1)
the command for execution of the monitoring target process, 2) pid of running
target process, or 3) the special keyword, ‘paddr’, if you want to monitor the
system’s physical memory address space.  Below example shows a command target
usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;kernel&gt;/tools/damon/
# damo record &quot;sleep 5&quot;
</pre></div>
</div>
<p>The tool will execute <code class="docutils literal notranslate"><span class="pre">sleep</span> <span class="pre">5</span></code> by itself and record the data access patterns
of the process.  Below example shows a pid target usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># sleep 5 &amp;
# damo record `pidof sleep`
</pre></div>
</div>
<p>Finally, below example shows the use of the special keyword, ‘paddr’:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># damo record paddr
</pre></div>
</div>
<p>In this case, the monitoring target regions defaults to the largetst ‘System
RAM’ region specified in ‘/proc/iomem’ file.  Note that the initial monitoring
target region is maintained rather than dynamically updated like the virtual
memory address spaces monitoring case.</p>
<p>The location of the recorded file can be explicitly set using <code class="docutils literal notranslate"><span class="pre">-o</span></code> option.
You can further tune this by setting the monitoring attributes.  To know about
the monitoring attributes in detail, please refer to the
<a class="reference internal" href="../../../vm/damon/mechanisms.html"><span class="doc">Mechanisms</span></a>.</p>
</div>
<div class="section" id="analyzing-data-access-pattern">
<h3>Analyzing Data Access Pattern<a class="headerlink" href="#analyzing-data-access-pattern" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">report</span></code> subcommand reads a data access pattern record file (if not
explicitly specified using <code class="docutils literal notranslate"><span class="pre">-i</span></code> option, reads <code class="docutils literal notranslate"><span class="pre">./damon.data</span></code> file by
default) and generates human-readable reports.  You can specify what type of
report you want using a sub-subcommand to <code class="docutils literal notranslate"><span class="pre">report</span></code> subcommand.  <code class="docutils literal notranslate"><span class="pre">raw</span></code>,
<code class="docutils literal notranslate"><span class="pre">heats</span></code>, and <code class="docutils literal notranslate"><span class="pre">wss</span></code> report types are supported for now.</p>
<div class="section" id="raw">
<h4>raw<a class="headerlink" href="#raw" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">raw</span></code> sub-subcommand simply transforms the binary record into a
human-readable text.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ damo report raw
start_time:  193485829398
rel time:                0
nr_tasks:  1
pid:  1348
nr_regions:  4
560189609000-56018abce000(  22827008):  0
7fbdff59a000-7fbdffaf1a00(   5601792):  0
7fbdffaf1a00-7fbdffbb5000(    800256):  1
7ffea0dc0000-7ffea0dfd000(    249856):  0

rel time:        100000731
nr_tasks:  1
pid:  1348
nr_regions:  6
560189609000-56018abce000(  22827008):  0
7fbdff59a000-7fbdff8ce933(   3361075):  0
7fbdff8ce933-7fbdffaf1a00(   2240717):  1
7fbdffaf1a00-7fbdffb66d99(    480153):  0
7fbdffb66d99-7fbdffbb5000(    320103):  1
7ffea0dc0000-7ffea0dfd000(    249856):  0
</pre></div>
</div>
<p>The first line shows the recording started timestamp (nanosecond).  Records of
data access patterns follows.  Each record is separated by a blank line.  Each
record first specifies the recorded time (<code class="docutils literal notranslate"><span class="pre">rel</span> <span class="pre">time</span></code>) in relative to the
start time, the number of monitored tasks in this record (<code class="docutils literal notranslate"><span class="pre">nr_tasks</span></code>).
Recorded data access patterns of each task follow.  Each data access pattern
for each task shows the target’s pid (<code class="docutils literal notranslate"><span class="pre">pid</span></code>) and a number of monitored
address regions in this access pattern (<code class="docutils literal notranslate"><span class="pre">nr_regions</span></code>) first.  After that,
each line shows the start/end address, size, and the number of observed
accesses of each region.</p>
</div>
<div class="section" id="heats">
<h4>heats<a class="headerlink" href="#heats" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">raw</span></code> output is very detailed but hard to manually read.  <code class="docutils literal notranslate"><span class="pre">heats</span></code>
sub-subcommand plots the data in 3-dimensional form, which represents the time
in x-axis, address of regions in y-axis, and the access frequency in z-axis.
Users can set the resolution of the map (<code class="docutils literal notranslate"><span class="pre">--tres</span></code> and <code class="docutils literal notranslate"><span class="pre">--ares</span></code>) and
start/end point of each axis (<code class="docutils literal notranslate"><span class="pre">--tmin</span></code>, <code class="docutils literal notranslate"><span class="pre">--tmax</span></code>, <code class="docutils literal notranslate"><span class="pre">--amin</span></code>, and
<code class="docutils literal notranslate"><span class="pre">--amax</span></code>) via optional arguments.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ damo report heats --tres 3 --ares 3
0               0               0.0
0               7609002         0.0
0               15218004        0.0
66112620851     0               0.0
66112620851     7609002         0.0
66112620851     15218004        0.0
132225241702    0               0.0
132225241702    7609002         0.0
132225241702    15218004        0.0
</pre></div>
</div>
<p>This command shows a recorded access pattern in heatmap of 3x3 resolution.
Therefore it shows 9 data points in total.  Each line shows each of the data
points.  The three numbers in each line represent time in nanosecond, address,
and the observed access frequency.</p>
<p>Users will be able to convert this text output into a heatmap image (represents
z-axis values with colors) or other 3D representations using various tools such
as ‘gnuplot’.  For more convenience, <code class="docutils literal notranslate"><span class="pre">heats</span></code> sub-subcommand provides the
‘gnuplot’ based heatmap image creation.  For this, you can use <code class="docutils literal notranslate"><span class="pre">--heatmap</span></code>
option.  Also, note that because it uses ‘gnuplot’ internally, it will fail if
‘gnuplot’ is not installed on your system.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./damo report heats --heatmap heatmap.png
</pre></div>
</div>
<p>Creates the heatmap image in <code class="docutils literal notranslate"><span class="pre">heatmap.png</span></code> file.  It supports <code class="docutils literal notranslate"><span class="pre">pdf</span></code>,
<code class="docutils literal notranslate"><span class="pre">png</span></code>, <code class="docutils literal notranslate"><span class="pre">jpeg</span></code>, and <code class="docutils literal notranslate"><span class="pre">svg</span></code>.</p>
<p>If the target address space is virtual memory address space and you plot the
entire address space, the huge unmapped regions will make the picture looks
only black.  Therefore you should do proper zoom in / zoom out using the
resolution and axis boundary-setting arguments.  To make this effort minimal,
you can use <code class="docutils literal notranslate"><span class="pre">--guide</span></code> option as below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./damo report heats --guide
pid:1348
time: 193485829398-198337863555 (4852034157)
region   0: 00000094564599762944-00000094564622589952 (22827008)
region   1: 00000140454009610240-00000140454016012288 (6402048)
region   2: 00000140731597193216-00000140731597443072 (249856)
</pre></div>
</div>
<p>The output shows unions of monitored regions (start and end addresses in byte)
and the union of monitored time duration (start and end time in nanoseconds) of
each target task.  Therefore, it would be wise to plot the data points in each
union.  If no axis boundary option is given, it will automatically find the
biggest union in <code class="docutils literal notranslate"><span class="pre">--guide</span></code> output and set the boundary in it.</p>
</div>
<div class="section" id="wss">
<h4>wss<a class="headerlink" href="#wss" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">wss</span></code> type extracts the distribution and chronological working set size
changes from the records.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./damo report wss
# &lt;percentile&gt; &lt;wss&gt;
# pid   1348
# avr:  66228
0       0
25      0
50      0
75      0
100     1920615
</pre></div>
</div>
<p>Without any option, it shows the distribution of the working set sizes as
above.  It shows 0th, 25th, 50th, 75th, and 100th percentile and the average of
the measured working set sizes in the access pattern records.  In this case,
the working set size was zero for 75th percentile but 1,920,615 bytes in max
and 66,228 bytes on average.</p>
<p>By setting the sort key of the percentile using ‘–sortby’, you can show how
the working set size has chronologically changed.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./damo report wss --sortby time
# &lt;percentile&gt; &lt;wss&gt;
# pid   1348
# avr:  66228
0       0
25      0
50      0
75      0
100     0
</pre></div>
</div>
<p>The average is still 66,228.  And, because the access was spiked in very short
duration and this command plots only 4 data points, we cannot show when the
access spikes made.  Users can specify the resolution of the distribution
(<code class="docutils literal notranslate"><span class="pre">--range</span></code>).  By giving more fine resolution, the short duration spikes could
be found.</p>
<p>Similar to that of <code class="docutils literal notranslate"><span class="pre">heats</span> <span class="pre">--heatmap</span></code>, it also supports ‘gnuplot’ based simple
visualization of the distribution via <code class="docutils literal notranslate"><span class="pre">--plot</span></code> option.</p>
</div>
</div>
<div class="section" id="damon-based-operation-schemes">
<h3>DAMON-based Operation Schemes<a class="headerlink" href="#damon-based-operation-schemes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">schemes</span></code> subcommand allows users to do DAMON-based memory management
optimizations in a few seconds.  Similar to <code class="docutils literal notranslate"><span class="pre">record</span></code>, it receives monitoring
attributes and target.  However, in addition to those, <code class="docutils literal notranslate"><span class="pre">schemes</span></code> receives
data access pattern-based memory operation schemes, which describes what memory
operation action should be applied to memory regions showing specific data
access pattern.  Then, it starts the data access monitoring and automatically
applies the schemes to the targets.</p>
<p>The operation schemes should be saved in a text file in below format and passed
to <code class="docutils literal notranslate"><span class="pre">schemes</span></code> subcommand via <code class="docutils literal notranslate"><span class="pre">--schemes</span></code> option.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>min-size max-size min-acc max-acc min-age max-age action
</pre></div>
</div>
<p>The format also supports comments, several units for size and age of regions,
and human readable action names.  Currently supported operation actions are
<code class="docutils literal notranslate"><span class="pre">willneed</span></code>, <code class="docutils literal notranslate"><span class="pre">cold</span></code>, <code class="docutils literal notranslate"><span class="pre">pageout</span></code>, <code class="docutils literal notranslate"><span class="pre">hugepage</span></code> and <code class="docutils literal notranslate"><span class="pre">nohugepage</span></code>.  Each of
the actions works same to the madvise() system call hints having the name.
Please also note that the range is inclusive (closed interval), and <code class="docutils literal notranslate"><span class="pre">0</span></code> for
max values means infinite. Below example schemes are possible.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># format is:
# &lt;min/max size&gt; &lt;min/max frequency (0-100)&gt; &lt;min/max age&gt; &lt;action&gt;
#
# B/K/M/G/T for Bytes/KiB/MiB/GiB/TiB
# us/ms/s/m/h/d for micro-seconds/milli-seconds/seconds/minutes/hours/days
# &#39;min/max&#39; for possible min/max value.

# if a region keeps a high access frequency for &gt;=100ms, put the region on
# the head of the LRU list (call madvise() with MADV_WILLNEED).
min    max      80      max     100ms   max willneed

# if a region keeps a low access frequency for &gt;=200ms and &lt;=one hour, put
# the region on the tail of the LRU list (call madvise() with MADV_COLD).
min     max     10      20      200ms   1h  cold

# if a region keeps a very low access frequency for &gt;=60 seconds, swap out
# the region immediately (call madvise() with MADV_PAGEOUT).
min     max     0       10      60s     max pageout

# if a region of a size &gt;=2MiB keeps a very high access frequency for
# &gt;=100ms, let the region to use huge pages (call madvise() with
# MADV_HUGEPAGE).
2M      max     90      100     100ms   max hugepage

# If a regions of a size &gt;=2MiB keeps small access frequency for &gt;=100ms,
# avoid the region using huge pages (call madvise() with MADV_NOHUGEPAGE).
2M      max     0       25      100ms   max nohugepage
</pre></div>
</div>
<p>For example, you can make a running process named ‘foo’ to use huge pages for
memory regions keeping 2MB or larger size and having very high access frequency
for at least 100 milliseconds using below commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &quot;2M max    90 max    100ms max    hugepage&quot; &gt; my_thp_scheme
$ ./damo schemes --schemes my_thp_scheme `pidof foo`
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugfs-interface">
<h2>debugfs Interface<a class="headerlink" href="#debugfs-interface" title="Permalink to this headline">¶</a></h2>
<p>DAMON exports five files, <code class="docutils literal notranslate"><span class="pre">attrs</span></code>, <code class="docutils literal notranslate"><span class="pre">pids</span></code>, <code class="docutils literal notranslate"><span class="pre">record</span></code>, <code class="docutils literal notranslate"><span class="pre">schemes</span></code> and
<code class="docutils literal notranslate"><span class="pre">monitor_on</span></code> under its debugfs directory, <code class="docutils literal notranslate"><span class="pre">&lt;debugfs&gt;/damon/</span></code>.</p>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>Users can get and set the <code class="docutils literal notranslate"><span class="pre">sampling</span> <span class="pre">interval</span></code>, <code class="docutils literal notranslate"><span class="pre">aggregation</span> <span class="pre">interval</span></code>,
<code class="docutils literal notranslate"><span class="pre">regions</span> <span class="pre">update</span> <span class="pre">interval</span></code>, and min/max number of monitoring target regions by
reading from and writing to the <code class="docutils literal notranslate"><span class="pre">attrs</span></code> file.  To know about the monitoring
attributes in detail, please refer to the <a class="reference internal" href="../../../vm/damon/mechanisms.html"><span class="doc">Mechanisms</span></a>.  For
example, below commands set those values to 5 ms, 100 ms, 1,000 ms, 10 and
1000, and then check it again:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo 5000 100000 1000000 10 1000 &gt; attrs
# cat attrs
5000 100000 1000000 10 1000
</pre></div>
</div>
</div>
<div class="section" id="target-pids">
<h3>Target PIDs<a class="headerlink" href="#target-pids" title="Permalink to this headline">¶</a></h3>
<p>To monitor the virtual memory address spaces of specific processes, users can
get and set the pids of monitoring target processes by reading from and writing
to the <code class="docutils literal notranslate"><span class="pre">pids</span></code> file.  For example, below commands set processes having pids 42
and 4242 as the processes to be monitored and check it again:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo 42 4242 &gt; pids
# cat pids
42 4242
</pre></div>
</div>
<p>Users can also monitor the physical memory address space of the system by
writing a special keyword, “<code class="docutils literal notranslate"><span class="pre">paddr\n</span></code>” to the file.  In this case, reading the
file will show <code class="docutils literal notranslate"><span class="pre">-1</span></code>, as below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo paddr &gt; pids
# cat pids
-1
</pre></div>
</div>
<p>Note that setting the pids doesn’t start the monitoring.</p>
</div>
<div class="section" id="initial-monitoring-target-regions">
<h3>Initial Monitoring Target Regions<a class="headerlink" href="#initial-monitoring-target-regions" title="Permalink to this headline">¶</a></h3>
<p>In case of the debugfs based monitoring, DAMON automatically sets and updates
the monitoring target regions so that entire memory mappings of target
processes can be covered. However, users might want to limit the monitoring
region to specific address ranges, such as the heap, the stack, or specific
file-mapped area. Or, some users might know the initial access pattern of their
workloads and therefore want to set optimal initial regions for the ‘adaptive
regions adjustment’.</p>
<p>In contrast, DAMON do not automatically sets and updates the monitoring target
regions in case of physical memory monitoring.  Therefore, users should set the
monitoring target regions by themselves.</p>
<p>In such cases, users can explicitly set the initial monitoring target regions
as they want, by writing proper values to the <code class="docutils literal notranslate"><span class="pre">init_regions</span></code> file.  Each line
of the input should represent one region in below form.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;pid&gt; &lt;start address&gt; &lt;end address&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pid</span></code> should already in <code class="docutils literal notranslate"><span class="pre">pids</span></code> file, and the regions should be
passed in address order.  For example, below commands will set a couple of
address ranges, <code class="docutils literal notranslate"><span class="pre">1-100</span></code> and <code class="docutils literal notranslate"><span class="pre">100-200</span></code> as the initial monitoring target
region of process 42, and another couple of address ranges, <code class="docutils literal notranslate"><span class="pre">20-40</span></code> and
<code class="docutils literal notranslate"><span class="pre">50-100</span></code> as that of process 4242.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo &quot;42   1       100
        42   100     200
        4242 20      40
        4242 50      100&quot; &gt; init_regions
</pre></div>
</div>
<p>Note that this sets the initial monitoring target regions only.  In case of
virtual memory monitoring, DAMON will automatically updates the boundary of the
regions after one <code class="docutils literal notranslate"><span class="pre">regions</span> <span class="pre">update</span> <span class="pre">interval</span></code>.  Therefore, users should set the
<code class="docutils literal notranslate"><span class="pre">regions</span> <span class="pre">update</span> <span class="pre">interval</span></code> large enough in this case, if they don’t want the
update.</p>
</div>
<div class="section" id="record">
<h3>Record<a class="headerlink" href="#record" title="Permalink to this headline">¶</a></h3>
<p>This debugfs file allows you to record monitored access patterns in a regular
binary file.  The recorded results are first written in an in-memory buffer and
flushed to a file in batch.  Users can get and set the size of the buffer and
the path to the result file by reading from and writing to the <code class="docutils literal notranslate"><span class="pre">record</span></code> file.
For example, below commands set the buffer to be 4 KiB and the result to be
saved in <code class="docutils literal notranslate"><span class="pre">/damon.data</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo &quot;4096 /damon.data&quot; &gt; record
# cat record
4096 /damon.data
</pre></div>
</div>
<p>The recording can be disabled by setting the buffer size zero.</p>
</div>
<div class="section" id="schemes">
<h3>Schemes<a class="headerlink" href="#schemes" title="Permalink to this headline">¶</a></h3>
<p>For usual DAMON-based data access aware memory management optimizations, users
would simply want the system to apply a memory management action to a memory
region of a specific size having a specific access frequency for a specific
time.  DAMON receives such formalized operation schemes from the user and
applies those to the target processes.  It also counts the total number and
size of regions that each scheme is applied.  This statistics can be used for
online analysis or tuning of the schemes.</p>
<p>Users can get and set the schemes by reading from and writing to <code class="docutils literal notranslate"><span class="pre">schemes</span></code>
debugfs file.  Reading the file also shows the statistics of each scheme.  To
the file, each of the schemes should be represented in each line in below form:</p>
<blockquote>
<div>min-size max-size min-acc max-acc min-age max-age action</div></blockquote>
<p>Note that the ranges are closed interval.  Bytes for the size of regions
(<code class="docutils literal notranslate"><span class="pre">min-size</span></code> and <code class="docutils literal notranslate"><span class="pre">max-size</span></code>), number of monitored accesses per aggregate
interval for access frequency (<code class="docutils literal notranslate"><span class="pre">min-acc</span></code> and <code class="docutils literal notranslate"><span class="pre">max-acc</span></code>), number of
aggregate intervals for the age of regions (<code class="docutils literal notranslate"><span class="pre">min-age</span></code> and <code class="docutils literal notranslate"><span class="pre">max-age</span></code>), and a
predefined integer for memory management actions should be used.  The supported
numbers and their meanings are as below.</p>
<blockquote>
<div><ul class="simple">
<li>0: Call <code class="docutils literal notranslate"><span class="pre">madvise()</span></code> for the region with <code class="docutils literal notranslate"><span class="pre">MADV_WILLNEED</span></code></li>
<li>1: Call <code class="docutils literal notranslate"><span class="pre">madvise()</span></code> for the region with <code class="docutils literal notranslate"><span class="pre">MADV_COLD</span></code></li>
<li>2: Call <code class="docutils literal notranslate"><span class="pre">madvise()</span></code> for the region with <code class="docutils literal notranslate"><span class="pre">MADV_PAGEOUT</span></code></li>
<li>3: Call <code class="docutils literal notranslate"><span class="pre">madvise()</span></code> for the region with <code class="docutils literal notranslate"><span class="pre">MADV_HUGEPAGE</span></code></li>
<li>4: Call <code class="docutils literal notranslate"><span class="pre">madvise()</span></code> for the region with <code class="docutils literal notranslate"><span class="pre">MADV_NOHUGEPAGE</span></code></li>
<li>5: Do nothing but count the statistics</li>
</ul>
</div></blockquote>
<p>You can disable schemes by simply writing an empty string to the file.  For
example, below commands applies a scheme saying “If a memory region of size in
[4KiB, 8KiB] is showing accesses per aggregate interval in [0, 5] for aggregate
interval in [10, 20], page out the region”, check the entered scheme again, and
finally remove the scheme.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo &quot;4096 8192    0 5    10 20    2&quot; &gt; schemes
# cat schemes
4096 8192 0 5 10 20 2 0 0
# echo &gt; schemes
</pre></div>
</div>
<p>The last two integers in the 4th line of above example is the total number and
the total size of the regions that the scheme is applied.</p>
</div>
<div class="section" id="turning-on-off">
<h3>Turning On/Off<a class="headerlink" href="#turning-on-off" title="Permalink to this headline">¶</a></h3>
<p>Setting the files as described above doesn’t incur effect unless you explicitly
start the monitoring.  You can start, stop, and check the current status of the
monitoring by writing to and reading from the <code class="docutils literal notranslate"><span class="pre">monitor_on</span></code> file.  Writing
<code class="docutils literal notranslate"><span class="pre">on</span></code> to the file starts the monitoring of the targets with the attributes.
Recording and schemes will also start work if requested before.  Writing
<code class="docutils literal notranslate"><span class="pre">off</span></code> to the file stops those.  DAMON also stops if every target process is
terminated.  Below example commands turn on, off, and check the status of
DAMON:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cd &lt;debugfs&gt;/damon
# echo on &gt; monitor_on
# echo off &gt; monitor_on
# cat monitor_on
off
</pre></div>
</div>
<p>Please note that you cannot write to the above-mentioned debugfs files while
the monitoring is turned on.  If you write to the files while DAMON is running,
an error code such as <code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code> will be returned.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../hugetlbpage.html" class="btn btn-neutral float-right" title="HugeTLB Pages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="guide.html" class="btn btn-neutral float-left" title="Optimization Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>