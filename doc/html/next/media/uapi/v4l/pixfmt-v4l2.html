

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1. Single-planar format structure &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>2.1. Single-planar format structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/media/uapi/v4l/pixfmt-v4l2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="single-planar-format-structure">
<h1>2.1. Single-planar format structure<a class="headerlink" href="#single-planar-format-structure" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="c.v4l2_pix_format">
<code class="descname">v4l2_pix_format</code><a class="headerlink" href="#c.v4l2_pix_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table border="1" class="longtable docutils" id="id1">
<caption><span class="caption-text">struct v4l2_pix_format</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">width</span></code></td>
<td>Image width in pixels.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">height</span></code></td>
<td>Image height in pixels. If <code class="docutils literal notranslate"><span class="pre">field</span></code> is one of <code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_TOP</span></code>,
<code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_BOTTOM</span></code> or <code class="docutils literal notranslate"><span class="pre">V4L2_FIELD_ALTERNATE</span></code> then height
refers to the number of lines in the field, otherwise it refers to
the number of lines in the frame (which is twice the field height
for interlaced formats).</td>
</tr>
<tr class="row-odd"><td colspan="3"><p class="first"> Applications set these fields to request an image
size, drivers return the closest possible values. In case of
planar formats the <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> applies to the largest
plane. To avoid ambiguities drivers must return values rounded up
to a multiple of the scale factor of any smaller planes. For
example when the image format is YUV 4:2:0, <code class="docutils literal notranslate"><span class="pre">width</span></code> and
<code class="docutils literal notranslate"><span class="pre">height</span></code> must be multiples of two.</p>
<p class="last">For compressed formats that contain the resolution information encoded
inside the stream, when fed to a stateful mem2mem decoder, the fields
may be zero to rely on the decoder to detect the right values. For more
details see <a class="reference internal" href="dev-decoder.html#decoder"><span class="std std-ref">Memory-to-Memory Stateful Video Decoder Interface</span></a> and format descriptions.</p>
</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">pixelformat</span></code></td>
<td>The pixel format or type of compression, set by the application.
This is a little endian
<a class="reference internal" href="vidioc-enum-fmt.html#v4l2-fourcc"><span class="std std-ref">four character code</span></a>. V4L2 defines standard
RGB formats in <a class="reference internal" href="pixfmt-rgb.html#pixfmt-rgb"><span class="std std-ref">RGB Formats</span></a>, YUV formats in
<a class="reference internal" href="yuv-formats.html#yuv-formats"><span class="std std-ref">YUV Formats</span></a>, and reserved codes in
<a class="reference internal" href="pixfmt-reserved.html#reserved-formats"><span class="std std-ref">Reserved Image Formats</span></a></td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">field</span></code></td>
<td>Field order, from enum <a class="reference internal" href="field-order.html#c.v4l2_field" title="v4l2_field"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_field</span></code></a>.
Video images are typically interlaced. Applications can request to
capture or output only the top or bottom field, or both fields
interlaced or sequentially stored in one buffer or alternating in
separate buffers. Drivers return the actual field order selected.
For more details on fields see <a class="reference internal" href="field-order.html#field-order"><span class="std std-ref">Field Order</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">bytesperline</span></code></td>
<td>Distance in bytes between the leftmost pixels in two adjacent
lines.</td>
</tr>
<tr class="row-odd"><td colspan="3"><p class="first"></p>
<p>Both applications and drivers can set this field to request
padding bytes at the end of each line. Drivers however may ignore
the value requested by the application, returning <code class="docutils literal notranslate"><span class="pre">width</span></code> times
bytes per pixel or a larger value required by the hardware. That
implies applications can just set this field to zero to get a
reasonable default.</p>
<p>Video hardware may access padding bytes, therefore they must
reside in accessible memory. Consider cases where padding bytes
after the last line of an image cross a system page boundary.
Input devices may write padding bytes, the value is undefined.
Output devices ignore the contents of padding bytes.</p>
<p>When the image format is planar the <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value applies
to the first plane and is divided by the same factor as the
<code class="docutils literal notranslate"><span class="pre">width</span></code> field for the other planes. For example the Cb and Cr
planes of a YUV 4:2:0 image have half as many padding bytes
following each line as the Y plane. To avoid ambiguities drivers
must return a <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value rounded up to a multiple of
the scale factor.</p>
<p class="last">For compressed formats the <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> value makes no sense.
Applications and drivers must set this to 0 in that case.</p>
</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">sizeimage</span></code></td>
<td><p class="first">Size in bytes of the buffer to hold a complete image, set by the
driver. Usually this is <code class="docutils literal notranslate"><span class="pre">bytesperline</span></code> times <code class="docutils literal notranslate"><span class="pre">height</span></code>. When
the image consists of variable length compressed data this is the
number of bytes required by the codec to support the worst-case
compression scenario.</p>
<p>The driver will set the value for uncompressed images.</p>
<p class="last">Clients are allowed to set the sizeimage field for variable length
compressed data flagged with <code class="docutils literal notranslate"><span class="pre">V4L2_FMT_FLAG_COMPRESSED</span></code> at
<a class="reference internal" href="vidioc-enum-fmt.html#vidioc-enum-fmt"><span class="std std-ref">ioctl VIDIOC_ENUM_FMT</span></a>, but the driver may ignore it and set the
value itself, or it may modify the provided value based on
alignment requirements or minimum/maximum size requirements.
If the client wants to leave this to the driver, then it should
set sizeimage to 0.</p>
</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">colorspace</span></code></td>
<td>Image colorspace, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_colorspace" title="v4l2_colorspace"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_colorspace</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">pixelformat</span></code> and must be set
by the driver for capture streams and by the application for
output streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">priv</span></code></td>
<td><p class="first">This field indicates whether the remaining fields of the
struct <a class="reference internal" href="#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_pix_format</span></code></a>, also called the
extended fields, are valid. When set to
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, it indicates that the extended fields
have been correctly initialized. When set to any other value it
indicates that the extended fields contain undefined values.</p>
<p>Applications that wish to use the pixel format extended fields
must first ensure that the feature is supported by querying the
device for the <a class="reference internal" href="querycap.html#querycap"><span class="std std-ref">V4L2_CAP_EXT_PIX_FORMAT</span></a>
capability. If the capability isn’t set the pixel format extended
fields are not supported and using the extended fields will lead
to undefined results.</p>
<p>To use the extended fields, applications must set the <code class="docutils literal notranslate"><span class="pre">priv</span></code>
field to <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>, initialize all the extended
fields and zero the unused bytes of the
struct <a class="reference internal" href="vidioc-g-fmt.html#c.v4l2_format" title="v4l2_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_format</span></code></a> <code class="docutils literal notranslate"><span class="pre">raw_data</span></code> field.</p>
<p class="last">When the <code class="docutils literal notranslate"><span class="pre">priv</span></code> field isn’t set to <code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code>
drivers must act as if all the extended fields were set to zero.
On return drivers must set the <code class="docutils literal notranslate"><span class="pre">priv</span></code> field to
<code class="docutils literal notranslate"><span class="pre">V4L2_PIX_FMT_PRIV_MAGIC</span></code> and all the extended fields to
applicable values.</p>
</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">flags</span></code></td>
<td>Flags set by the application or driver, see <a class="reference internal" href="pixfmt-reserved.html#format-flags"><span class="std std-ref">Format Flags</span></a>.</td>
</tr>
<tr class="row-even"><td>union {</td>
<td colspan="2">(anonymous)</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">ycbcr_enc</span></code></td>
<td>Y’CbCr encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_ycbcr_encoding" title="v4l2_ycbcr_encoding"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_ycbcr_encoding</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>.</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">hsv_enc</span></code></td>
<td>HSV encoding, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_hsv_encoding" title="v4l2_hsv_encoding"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_hsv_encoding</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>.</td>
</tr>
<tr class="row-odd"><td>}</td>
<td colspan="2">&#160;</td>
</tr>
<tr class="row-even"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">quantization</span></code></td>
<td>Quantization range, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_quantization" title="v4l2_quantization"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_quantization</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>.</td>
</tr>
<tr class="row-odd"><td>__u32</td>
<td><code class="docutils literal notranslate"><span class="pre">xfer_func</span></code></td>
<td>Transfer function, from enum <a class="reference internal" href="colorspaces-defs.html#c.v4l2_xfer_func" title="v4l2_xfer_func"><code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_xfer_func</span></code></a>.
This information supplements the <code class="docutils literal notranslate"><span class="pre">colorspace</span></code> and must be set by
the driver for capture streams and by the application for output
streams, see <a class="reference internal" href="colorspaces.html#colorspaces"><span class="std std-ref">Colorspaces</span></a>.</td>
</tr>
</tbody>
</table>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>