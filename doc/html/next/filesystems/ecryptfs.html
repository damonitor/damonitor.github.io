

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>eCryptfs: A stacked cryptographic filesystem for Linux &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>eCryptfs: A stacked cryptographic filesystem for Linux</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/filesystems/ecryptfs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ecryptfs-a-stacked-cryptographic-filesystem-for-linux">
<h1>eCryptfs: A stacked cryptographic filesystem for Linux<a class="headerlink" href="#ecryptfs-a-stacked-cryptographic-filesystem-for-linux" title="Permalink to this headline">¶</a></h1>
<p>eCryptfs is free software. Please see the file COPYING for details.
For documentation, please see the files in the doc/ subdirectory.  For
building and installation instructions please see the INSTALL file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Maintainer:</th><td class="field-body">Phillip Hellewell</td>
</tr>
<tr class="field-even field"><th class="field-name">Lead developer:</th><td class="field-body">Michael A. Halcrow &lt;<a class="reference external" href="mailto:mhalcrow&#37;&#52;&#48;us&#46;ibm&#46;com">mhalcrow<span>&#64;</span>us<span>&#46;</span>ibm<span>&#46;</span>com</a>&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Developers:</th><td class="field-body">Michael C. Thompson
Kent Yoder</td>
</tr>
<tr class="field-even field"><th class="field-name">Web Site:</th><td class="field-body"><a class="reference external" href="http://ecryptfs.sf.net">http://ecryptfs.sf.net</a></td>
</tr>
</tbody>
</table>
<p>This software is currently undergoing development. Make sure to
maintain a backup copy of any data you write into eCryptfs.</p>
<p>eCryptfs requires the userspace tools downloadable from the
SourceForge site:</p>
<p><a class="reference external" href="http://sourceforge.net/projects/ecryptfs/">http://sourceforge.net/projects/ecryptfs/</a></p>
<p>Userspace requirements include:</p>
<ul class="simple">
<li>David Howells’ userspace keyring headers and libraries (version
1.0 or higher), obtainable from
<a class="reference external" href="http://people.redhat.com/~dhowells/keyutils/">http://people.redhat.com/~dhowells/keyutils/</a></li>
<li>Libgcrypt</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the beta/experimental releases of eCryptfs, when you upgrade
eCryptfs, you should copy the files to an unencrypted location and
then copy the files back into the new eCryptfs mount to migrate the
files.</p>
</div>
<div class="section" id="mount-wide-passphrase">
<h2>Mount-wide Passphrase<a class="headerlink" href="#mount-wide-passphrase" title="Permalink to this headline">¶</a></h2>
<p>Create a new directory into which eCryptfs will write its encrypted
files (i.e., /root/crypt).  Then, create the mount point directory
(i.e., /mnt/crypt).  Now it’s time to mount eCryptfs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mount -t ecryptfs /root/crypt /mnt/crypt
</pre></div>
</div>
<p>You should be prompted for a passphrase and a salt (the salt may be
blank).</p>
<p>Try writing a new file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo &quot;Hello, World&quot; &gt; /mnt/crypt/hello.txt
</pre></div>
</div>
<p>The operation will complete.  Notice that there is a new file in
/root/crypt that is at least 12288 bytes in size (depending on your
host page size).  This is the encrypted underlying file for what you
just wrote.  To test reading, from start to finish, you need to clear
the user session keyring:</p>
<p>keyctl clear &#64;u</p>
<p>Then umount /mnt/crypt and mount again per the instructions given
above.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat /mnt/crypt/hello.txt
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>eCryptfs version 0.1 should only be mounted on (1) empty directories
or (2) directories containing files only created by eCryptfs. If you
mount a directory that has pre-existing files not created by eCryptfs,
then behavior is undefined. Do not run eCryptfs in higher verbosity
levels unless you are doing so for the sole purpose of debugging or
development, since secret values will be written out to the system log
in that case.</p>
<p>Mike Halcrow
<a class="reference external" href="mailto:mhalcrow&#37;&#52;&#48;us&#46;ibm&#46;com">mhalcrow<span>&#64;</span>us<span>&#46;</span>ibm<span>&#46;</span>com</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>