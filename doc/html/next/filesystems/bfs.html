

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BFS Filesystem for Linux &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>BFS Filesystem for Linux</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/filesystems/bfs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bfs-filesystem-for-linux">
<h1>BFS Filesystem for Linux<a class="headerlink" href="#bfs-filesystem-for-linux" title="Permalink to this headline">¶</a></h1>
<p>The BFS filesystem is used by SCO UnixWare OS for the /stand slice, which
usually contains the kernel image and a few other files required for the
boot process.</p>
<p>In order to access /stand partition under Linux you obviously need to
know the partition number and the kernel must support UnixWare disk slices
(CONFIG_UNIXWARE_DISKLABEL config option). However BFS support does not
depend on having UnixWare disklabel support because one can also mount
BFS filesystem via loopback:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># losetup /dev/loop0 stand.img
# mount -t bfs /dev/loop0 /mnt/stand
</pre></div>
</div>
<p>where stand.img is a file containing the image of BFS filesystem.
When you have finished using it and umounted you need to also deallocate
/dev/loop0 device by:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># losetup -d /dev/loop0
</pre></div>
</div>
<p>You can simplify mounting by just typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># mount -t bfs -o loop stand.img /mnt/stand
</pre></div>
</div>
<p>this will allocate the first available loopback device (and load loop.o
kernel module if necessary) automatically. If the loopback driver is not
loaded automatically, make sure that you have compiled the module and
that modprobe is functioning. Beware that umount will not deallocate
/dev/loopN device if /etc/mtab file on your system is a symbolic link to
/proc/mounts. You will need to do it manually using “-d” switch of
losetup(8). Read losetup(8) manpage for more info.</p>
<p>To create the BFS image under UnixWare you need to find out first which
slice contains it. The command prtvtoc(1M) is your friend:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># prtvtoc /dev/rdsk/c0b0t0d0s0
</pre></div>
</div>
<p>(assuming your root disk is on target=0, lun=0, bus=0, controller=0). Then you
look for the slice with tag “STAND”, which is usually slice 10. With this
information you can use dd(1) to create the BFS image:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># umount /stand
# dd if=/dev/rdsk/c0b0t0d0sa of=stand.img bs=512
</pre></div>
</div>
<p>Just in case, you can verify that you have done the right thing by checking
the magic number:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># od -Ad -tx4 stand.img | more
</pre></div>
</div>
<p>The first 4 bytes should be 0x1badface.</p>
<p>If you have any patches, questions or suggestions regarding this BFS
implementation please contact the author:</p>
<p>Tigran Aivazian &lt;<a class="reference external" href="mailto:aivazian&#46;tigran&#37;&#52;&#48;gmail&#46;com">aivazian<span>&#46;</span>tigran<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>