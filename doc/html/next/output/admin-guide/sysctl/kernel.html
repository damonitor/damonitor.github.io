

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documentation for /proc/sys/kernel/ &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Documentation for /proc/sys/kernel/</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/admin-guide/sysctl/kernel.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documentation-for-proc-sys-kernel">
<h1>Documentation for /proc/sys/kernel/<a class="headerlink" href="#documentation-for-proc-sys-kernel" title="Permalink to this headline">¶</a></h1>
<p>kernel version 2.2.10</p>
<p>Copyright (c) 1998, 1999,  Rik van Riel &lt;<a class="reference external" href="mailto:riel&#37;&#52;&#48;nl&#46;linux&#46;org">riel<span>&#64;</span>nl<span>&#46;</span>linux<span>&#46;</span>org</a>&gt;</p>
<p>Copyright (c) 2009,        Shen Feng&lt;<a class="reference external" href="mailto:shen&#37;&#52;&#48;cn&#46;fujitsu&#46;com">shen<span>&#64;</span>cn<span>&#46;</span>fujitsu<span>&#46;</span>com</a>&gt;</p>
<p>For general info and legal blurb, please look in index.rst.</p>
<hr class="docutils" />
<p>This file contains documentation for the sysctl files in
/proc/sys/kernel/ and is valid for Linux kernel version 2.2.</p>
<p>The files in this directory can be used to tune and monitor
miscellaneous and general things in the operation of the Linux
kernel. Since some of the files _can_ be used to screw up your
system, it is advisable to read both documentation and source
before actually making adjustments.</p>
<p>Currently, these files might (depending on your configuration)
show up in /proc/sys/kernel:</p>
<ul class="simple">
<li>acct</li>
<li>acpi_video_flags</li>
<li>auto_msgmni</li>
<li>bootloader_type            [ X86 only ]</li>
<li>bootloader_version         [ X86 only ]</li>
<li>cap_last_cap</li>
<li>core_pattern</li>
<li>core_pipe_limit</li>
<li>core_uses_pid</li>
<li>ctrl-alt-del</li>
<li>dmesg_restrict</li>
<li>domainname</li>
<li>hostname</li>
<li>hotplug</li>
<li>hardlockup_all_cpu_backtrace</li>
<li>hardlockup_panic</li>
<li>hung_task_panic</li>
<li>hung_task_check_count</li>
<li>hung_task_timeout_secs</li>
<li>hung_task_check_interval_secs</li>
<li>hung_task_warnings</li>
<li>hyperv_record_panic_msg</li>
<li>kexec_load_disabled</li>
<li>kptr_restrict</li>
<li>l2cr                        [ PPC only ]</li>
<li>modprobe                    ==&gt; Documentation/debugging-modules.txt</li>
<li>modules_disabled</li>
<li>msg_next_id                 [ sysv ipc ]</li>
<li>msgmax</li>
<li>msgmnb</li>
<li>msgmni</li>
<li>nmi_watchdog</li>
<li>osrelease</li>
<li>ostype</li>
<li>overflowgid</li>
<li>overflowuid</li>
<li>panic</li>
<li>panic_on_oops</li>
<li>panic_on_stackoverflow</li>
<li>panic_on_unrecovered_nmi</li>
<li>panic_on_warn</li>
<li>panic_print</li>
<li>panic_on_rcu_stall</li>
<li>perf_cpu_time_max_percent</li>
<li>perf_event_paranoid</li>
<li>perf_event_max_stack</li>
<li>perf_event_mlock_kb</li>
<li>perf_event_max_contexts_per_stack</li>
<li>pid_max</li>
<li>powersave-nap               [ PPC only ]</li>
<li>printk</li>
<li>printk_delay</li>
<li>printk_ratelimit</li>
<li>printk_ratelimit_burst</li>
<li>pty                         ==&gt; Documentation/filesystems/devpts.txt</li>
<li>randomize_va_space</li>
<li>real-root-dev               ==&gt; Documentation/admin-guide/initrd.rst</li>
<li>reboot-cmd                  [ SPARC only ]</li>
<li>rtsig-max</li>
<li>rtsig-nr</li>
<li>sched_energy_aware</li>
<li>seccomp/                    ==&gt; Documentation/userspace-api/seccomp_filter.rst</li>
<li>sem</li>
<li>sem_next_id                 [ sysv ipc ]</li>
<li>sg-big-buff                 [ generic SCSI device (sg) ]</li>
<li>shm_next_id                 [ sysv ipc ]</li>
<li>shm_rmid_forced</li>
<li>shmall</li>
<li>shmmax                      [ sysv ipc ]</li>
<li>shmmni</li>
<li>softlockup_all_cpu_backtrace</li>
<li>soft_watchdog</li>
<li>stack_erasing</li>
<li>stop-a                      [ SPARC only ]</li>
<li>sysrq                       ==&gt; Documentation/admin-guide/sysrq.rst</li>
<li>sysctl_writes_strict</li>
<li>tainted                     ==&gt; Documentation/admin-guide/tainted-kernels.rst</li>
<li>threads-max</li>
<li>unknown_nmi_panic</li>
<li>watchdog</li>
<li>watchdog_thresh</li>
<li>version</li>
</ul>
<div class="section" id="acct">
<h2>acct:<a class="headerlink" href="#acct" title="Permalink to this headline">¶</a></h2>
<p>highwater lowwater frequency</p>
<p>If BSD-style process accounting is enabled these values control
its behaviour. If free space on filesystem where the log lives
goes below &lt;lowwater&gt;% accounting suspends. If free space gets
above &lt;highwater&gt;% accounting resumes. &lt;Frequency&gt; determines
how often do we check the amount of free space (value is in
seconds). Default:
4 2 30
That is, suspend accounting if there left &lt;= 2% free; resume it
if we got &gt;=4%; consider information about amount of free space
valid for 30 seconds.</p>
</div>
<div class="section" id="acpi-video-flags">
<h2>acpi_video_flags:<a class="headerlink" href="#acpi-video-flags" title="Permalink to this headline">¶</a></h2>
<p>flags</p>
<p>See Doc*/kernel/power/video.txt, it allows mode of video boot to be
set during run time.</p>
</div>
<div class="section" id="auto-msgmni">
<h2>auto_msgmni:<a class="headerlink" href="#auto-msgmni" title="Permalink to this headline">¶</a></h2>
<p>This variable has no effect and may be removed in future kernel
releases. Reading it always returns 0.
Up to Linux 3.17, it enabled/disabled automatic recomputing of msgmni
upon memory add/remove or upon ipc namespace creation/removal.
Echoing “1” into this file enabled msgmni automatic recomputing.
Echoing “0” turned it off. auto_msgmni default value was 1.</p>
</div>
<div class="section" id="bootloader-type">
<h2>bootloader_type:<a class="headerlink" href="#bootloader-type" title="Permalink to this headline">¶</a></h2>
<p>x86 bootloader identification</p>
<p>This gives the bootloader type number as indicated by the bootloader,
shifted left by 4, and OR’d with the low four bits of the bootloader
version.  The reason for this encoding is that this used to match the
type_of_loader field in the kernel header; the encoding is kept for
backwards compatibility.  That is, if the full bootloader type number
is 0x15 and the full version number is 0x234, this file will contain
the value 340 = 0x154.</p>
<p>See the type_of_loader and ext_loader_type fields in
Documentation/x86/boot.rst for additional information.</p>
</div>
<div class="section" id="bootloader-version">
<h2>bootloader_version:<a class="headerlink" href="#bootloader-version" title="Permalink to this headline">¶</a></h2>
<p>x86 bootloader version</p>
<p>The complete bootloader version number.  In the example above, this
file will contain the value 564 = 0x234.</p>
<p>See the type_of_loader and ext_loader_ver fields in
Documentation/x86/boot.rst for additional information.</p>
</div>
<div class="section" id="cap-last-cap">
<h2>cap_last_cap:<a class="headerlink" href="#cap-last-cap" title="Permalink to this headline">¶</a></h2>
<p>Highest valid capability of the running kernel.  Exports
CAP_LAST_CAP from the kernel.</p>
</div>
<div class="section" id="core-pattern">
<h2>core_pattern:<a class="headerlink" href="#core-pattern" title="Permalink to this headline">¶</a></h2>
<p>core_pattern is used to specify a core dumpfile pattern name.</p>
<ul>
<li><p class="first">max length 127 characters; default value is “core”</p>
</li>
<li><p class="first">core_pattern is used as a pattern template for the output filename;
certain string patterns (beginning with ‘%’) are substituted with
their actual values.</p>
</li>
<li><p class="first">backward compatibility with core_uses_pid:</p>
<blockquote>
<div><p>If core_pattern does not include “%p” (default does not)
and core_uses_pid is set, then .PID will be appended to
the filename.</p>
</div></blockquote>
</li>
<li><p class="first">corename format specifiers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%&lt;NUL&gt;  &#39;%&#39; is dropped
%%      output one &#39;%&#39;
%p      pid
%P      global pid (init PID namespace)
%i      tid
%I      global tid (init PID namespace)
%u      uid (in initial user namespace)
%g      gid (in initial user namespace)
%d      dump mode, matches PR_SET_DUMPABLE and
        /proc/sys/fs/suid_dumpable
%s      signal number
%t      UNIX time of dump
%h      hostname
%e      executable filename (may be shortened)
%E      executable path
%&lt;OTHER&gt; both are dropped
</pre></div>
</div>
</li>
<li><p class="first">If the first character of the pattern is a ‘|’, the kernel will treat
the rest of the pattern as a command to run.  The core dump will be
written to the standard input of that program instead of to a file.</p>
</li>
</ul>
</div>
<div class="section" id="core-pipe-limit">
<h2>core_pipe_limit:<a class="headerlink" href="#core-pipe-limit" title="Permalink to this headline">¶</a></h2>
<p>This sysctl is only applicable when core_pattern is configured to pipe
core files to a user space helper (when the first character of
core_pattern is a ‘|’, see above).  When collecting cores via a pipe
to an application, it is occasionally useful for the collecting
application to gather data about the crashing process from its
/proc/pid directory.  In order to do this safely, the kernel must wait
for the collecting process to exit, so as not to remove the crashing
processes proc files prematurely.  This in turn creates the
possibility that a misbehaving userspace collecting process can block
the reaping of a crashed process simply by never exiting.  This sysctl
defends against that.  It defines how many concurrent crashing
processes may be piped to user space applications in parallel.  If
this value is exceeded, then those crashing processes above that value
are noted via the kernel log and their cores are skipped.  0 is a
special value, indicating that unlimited processes may be captured in
parallel, but that no waiting will take place (i.e. the collecting
process is not guaranteed access to /proc/&lt;crashing pid&gt;/).  This
value defaults to 0.</p>
</div>
<div class="section" id="core-uses-pid">
<h2>core_uses_pid:<a class="headerlink" href="#core-uses-pid" title="Permalink to this headline">¶</a></h2>
<p>The default coredump filename is “core”.  By setting
core_uses_pid to 1, the coredump filename becomes core.PID.
If core_pattern does not include “%p” (default does not)
and core_uses_pid is set, then .PID will be appended to
the filename.</p>
</div>
<div class="section" id="ctrl-alt-del">
<h2>ctrl-alt-del:<a class="headerlink" href="#ctrl-alt-del" title="Permalink to this headline">¶</a></h2>
<p>When the value in this file is 0, ctrl-alt-del is trapped and
sent to the init(1) program to handle a graceful restart.
When, however, the value is &gt; 0, Linux’s reaction to a Vulcan
Nerve Pinch (tm) will be an immediate reboot, without even
syncing its dirty buffers.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>when a program (like dosemu) has the keyboard in ‘raw’
mode, the ctrl-alt-del is intercepted by the program before it
ever reaches the kernel tty layer, and it’s up to the program
to decide what to do with it.</dd>
</dl>
</div>
<div class="section" id="dmesg-restrict">
<h2>dmesg_restrict:<a class="headerlink" href="#dmesg-restrict" title="Permalink to this headline">¶</a></h2>
<p>This toggle indicates whether unprivileged users are prevented
from using dmesg(8) to view messages from the kernel’s log buffer.
When dmesg_restrict is set to (0) there are no restrictions. When
dmesg_restrict is set set to (1), users must have CAP_SYSLOG to use
dmesg(8).</p>
<p>The kernel config option CONFIG_SECURITY_DMESG_RESTRICT sets the
default value of dmesg_restrict.</p>
</div>
<div class="section" id="domainname-hostname">
<h2>domainname &amp; hostname:<a class="headerlink" href="#domainname-hostname" title="Permalink to this headline">¶</a></h2>
<p>These files can be used to set the NIS/YP domainname and the
hostname of your box in exactly the same way as the commands
domainname and hostname, i.e.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># echo &quot;darkstar&quot; &gt; /proc/sys/kernel/hostname
# echo &quot;mydomain&quot; &gt; /proc/sys/kernel/domainname
</pre></div>
</div>
<p>has the same effect as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># hostname &quot;darkstar&quot;
# domainname &quot;mydomain&quot;
</pre></div>
</div>
<p>Note, however, that the classic darkstar.frop.org has the
hostname “darkstar” and DNS (Internet Domain Name Server)
domainname “frop.org”, not to be confused with the NIS (Network
Information Service) or YP (Yellow Pages) domainname. These two
domain names are in general different. For a detailed discussion
see the hostname(1) man page.</p>
</div>
<div class="section" id="hardlockup-all-cpu-backtrace">
<h2>hardlockup_all_cpu_backtrace:<a class="headerlink" href="#hardlockup-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>This value controls the hard lockup detector behavior when a hard
lockup condition is detected as to whether or not to gather further
debug information. If enabled, arch-specific all-CPU stack dumping
will be initiated.</p>
<p>0: do nothing. This is the default behavior.</p>
<p>1: on detection capture more debug information.</p>
</div>
<div class="section" id="hardlockup-panic">
<h2>hardlockup_panic:<a class="headerlink" href="#hardlockup-panic" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control whether the kernel panics
when a hard lockup is detected.</p>
<blockquote>
<div>0 - don’t panic on hard lockup
1 - panic on hard lockup</div></blockquote>
<p>See Documentation/admin-guide/lockup-watchdogs.rst for more information.  This can
also be set using the nmi_watchdog kernel parameter.</p>
</div>
<div class="section" id="hotplug">
<h2>hotplug:<a class="headerlink" href="#hotplug" title="Permalink to this headline">¶</a></h2>
<p>Path for the hotplug policy agent.
Default value is “/sbin/hotplug”.</p>
</div>
<div class="section" id="hung-task-panic">
<h2>hung_task_panic:<a class="headerlink" href="#hung-task-panic" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when a hung task is detected.
This file shows up if CONFIG_DETECT_HUNG_TASK is enabled.</p>
<p>0: continue operation. This is the default behavior.</p>
<p>1: panic immediately.</p>
</div>
<div class="section" id="hung-task-check-count">
<h2>hung_task_check_count:<a class="headerlink" href="#hung-task-check-count" title="Permalink to this headline">¶</a></h2>
<p>The upper bound on the number of tasks that are checked.
This file shows up if CONFIG_DETECT_HUNG_TASK is enabled.</p>
</div>
<div class="section" id="hung-task-timeout-secs">
<h2>hung_task_timeout_secs:<a class="headerlink" href="#hung-task-timeout-secs" title="Permalink to this headline">¶</a></h2>
<p>When a task in D state did not get scheduled
for more than this value report a warning.
This file shows up if CONFIG_DETECT_HUNG_TASK is enabled.</p>
<p>0: means infinite timeout - no checking done.</p>
<p>Possible values to set are in range {0..LONG_MAX/HZ}.</p>
</div>
<div class="section" id="hung-task-check-interval-secs">
<h2>hung_task_check_interval_secs:<a class="headerlink" href="#hung-task-check-interval-secs" title="Permalink to this headline">¶</a></h2>
<p>Hung task check interval. If hung task checking is enabled
(see hung_task_timeout_secs), the check is done every
hung_task_check_interval_secs seconds.
This file shows up if CONFIG_DETECT_HUNG_TASK is enabled.</p>
<p>0 (default): means use hung_task_timeout_secs as checking interval.
Possible values to set are in range {0..LONG_MAX/HZ}.</p>
</div>
<div class="section" id="hung-task-warnings">
<h2>hung_task_warnings:<a class="headerlink" href="#hung-task-warnings" title="Permalink to this headline">¶</a></h2>
<p>The maximum number of warnings to report. During a check interval
if a hung task is detected, this value is decreased by 1.
When this value reaches 0, no more warnings will be reported.
This file shows up if CONFIG_DETECT_HUNG_TASK is enabled.</p>
<p>-1: report an infinite number of warnings.</p>
</div>
<div class="section" id="hyperv-record-panic-msg">
<h2>hyperv_record_panic_msg:<a class="headerlink" href="#hyperv-record-panic-msg" title="Permalink to this headline">¶</a></h2>
<p>Controls whether the panic kmsg data should be reported to Hyper-V.</p>
<p>0: do not report panic kmsg data.</p>
<p>1: report the panic kmsg data. This is the default behavior.</p>
</div>
<div class="section" id="kexec-load-disabled">
<h2>kexec_load_disabled:<a class="headerlink" href="#kexec-load-disabled" title="Permalink to this headline">¶</a></h2>
<p>A toggle indicating if the kexec_load syscall has been disabled. This
value defaults to 0 (false: kexec_load enabled), but can be set to 1
(true: kexec_load disabled). Once true, kexec can no longer be used, and
the toggle cannot be set back to false. This allows a kexec image to be
loaded before disabling the syscall, allowing a system to set up (and
later use) an image without it being altered. Generally used together
with the “modules_disabled” sysctl.</p>
</div>
<div class="section" id="kptr-restrict">
<h2>kptr_restrict:<a class="headerlink" href="#kptr-restrict" title="Permalink to this headline">¶</a></h2>
<p>This toggle indicates whether restrictions are placed on
exposing kernel addresses via /proc and other interfaces.</p>
<p>When kptr_restrict is set to 0 (the default) the address is hashed before
printing. (This is the equivalent to %p.)</p>
<p>When kptr_restrict is set to (1), kernel pointers printed using the %pK
format specifier will be replaced with 0’s unless the user has CAP_SYSLOG
and effective user and group ids are equal to the real ids. This is
because %pK checks are done at read() time rather than open() time, so
if permissions are elevated between the open() and the read() (e.g via
a setuid binary) then %pK will not leak kernel pointers to unprivileged
users. Note, this is a temporary solution only. The correct long-term
solution is to do the permission checks at open() time. Consider removing
world read permissions from files that use %pK, and using dmesg_restrict
to protect against uses of %pK in dmesg(8) if leaking kernel pointer
values to unprivileged users is a concern.</p>
<p>When kptr_restrict is set to (2), kernel pointers printed using
%pK will be replaced with 0’s regardless of privileges.</p>
</div>
<div class="section" id="l2cr-ppc-only">
<h2>l2cr: (PPC only)<a class="headerlink" href="#l2cr-ppc-only" title="Permalink to this headline">¶</a></h2>
<p>This flag controls the L2 cache of G3 processor boards. If
0, the cache is disabled. Enabled if nonzero.</p>
</div>
<div class="section" id="modules-disabled">
<h2>modules_disabled:<a class="headerlink" href="#modules-disabled" title="Permalink to this headline">¶</a></h2>
<p>A toggle value indicating if modules are allowed to be loaded
in an otherwise modular kernel.  This toggle defaults to off
(0), but can be set true (1).  Once true, modules can be
neither loaded nor unloaded, and the toggle cannot be set back
to false.  Generally used with the “kexec_load_disabled” toggle.</p>
</div>
<div class="section" id="msg-next-id-sem-next-id-and-shm-next-id">
<h2>msg_next_id, sem_next_id, and shm_next_id:<a class="headerlink" href="#msg-next-id-sem-next-id-and-shm-next-id" title="Permalink to this headline">¶</a></h2>
<p>These three toggles allows to specify desired id for next allocated IPC
object: message, semaphore or shared memory respectively.</p>
<p>By default they are equal to -1, which means generic allocation logic.
Possible values to set are in range {0..INT_MAX}.</p>
<dl class="docutils">
<dt>Notes:</dt>
<dd><ol class="first last arabic simple">
<li>kernel doesn’t guarantee, that new object will have desired id. So,
it’s up to userspace, how to handle an object with “wrong” id.</li>
<li>Toggle with non-default value will be set back to -1 by kernel after
successful IPC object allocation. If an IPC object allocation syscall
fails, it is undefined if the value remains unmodified or is reset to -1.</li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="nmi-watchdog">
<h2>nmi_watchdog:<a class="headerlink" href="#nmi-watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control the NMI watchdog
(i.e. the hard lockup detector) on x86 systems.</p>
<p>0 - disable the hard lockup detector</p>
<p>1 - enable the hard lockup detector</p>
<p>The hard lockup detector monitors each CPU for its ability to respond to
timer interrupts. The mechanism utilizes CPU performance counter registers
that are programmed to generate Non-Maskable Interrupts (NMIs) periodically
while a CPU is busy. Hence, the alternative name ‘NMI watchdog’.</p>
<p>The NMI watchdog is disabled by default if the kernel is running as a guest
in a KVM virtual machine. This default can be overridden by adding:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nmi_watchdog=1
</pre></div>
</div>
<p>to the guest kernel command line (see Documentation/admin-guide/kernel-parameters.rst).</p>
</div>
<div class="section" id="numa-balancing">
<h2>numa_balancing:<a class="headerlink" href="#numa-balancing" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables automatic page fault based NUMA memory
balancing. Memory is moved automatically to nodes
that access it often.</p>
<p>Enables/disables automatic NUMA memory balancing. On NUMA machines, there
is a performance penalty if remote memory is accessed by a CPU. When this
feature is enabled the kernel samples what task thread is accessing memory
by periodically unmapping pages and later trapping a page fault. At the
time of the page fault, it is determined if the data being accessed should
be migrated to a local memory node.</p>
<p>The unmapping of pages and trapping faults incur additional overhead that
ideally is offset by improved memory locality but there is no universal
guarantee. If the target workload is already bound to NUMA nodes then this
feature should be disabled. Otherwise, if the system overhead from the
feature is too high then the rate the kernel samples for NUMA hinting
faults may be controlled by the numa_balancing_scan_period_min_ms,
numa_balancing_scan_delay_ms, numa_balancing_scan_period_max_ms,
numa_balancing_scan_size_mb, and numa_balancing_settle_count sysctls.</p>
</div>
<div class="section" id="numa-balancing-scan-period-min-ms-numa-balancing-scan-delay-ms-numa-balancing-scan-period-max-ms-numa-balancing-scan-size-mb">
<h2>numa_balancing_scan_period_min_ms, numa_balancing_scan_delay_ms, numa_balancing_scan_period_max_ms, numa_balancing_scan_size_mb<a class="headerlink" href="#numa-balancing-scan-period-min-ms-numa-balancing-scan-delay-ms-numa-balancing-scan-period-max-ms-numa-balancing-scan-size-mb" title="Permalink to this headline">¶</a></h2>
<p>Automatic NUMA balancing scans tasks address space and unmaps pages to
detect if pages are properly placed or if the data should be migrated to a
memory node local to where the task is running.  Every “scan delay” the task
scans the next “scan size” number of pages in its address space. When the
end of the address space is reached the scanner restarts from the beginning.</p>
<p>In combination, the “scan delay” and “scan size” determine the scan rate.
When “scan delay” decreases, the scan rate increases.  The scan delay and
hence the scan rate of every task is adaptive and depends on historical
behaviour. If pages are properly placed then the scan delay increases,
otherwise the scan delay decreases.  The “scan size” is not adaptive but
the higher the “scan size”, the higher the scan rate.</p>
<p>Higher scan rates incur higher system overhead as page faults must be
trapped and potentially data must be migrated. However, the higher the scan
rate, the more quickly a tasks memory is migrated to a local node if the
workload pattern changes and minimises performance impact due to remote
memory accesses. These sysctls control the thresholds for scan delays and
the number of pages scanned.</p>
<p>numa_balancing_scan_period_min_ms is the minimum time in milliseconds to
scan a tasks virtual memory. It effectively controls the maximum scanning
rate for each task.</p>
<p>numa_balancing_scan_delay_ms is the starting “scan delay” used for a task
when it initially forks.</p>
<p>numa_balancing_scan_period_max_ms is the maximum time in milliseconds to
scan a tasks virtual memory. It effectively controls the minimum scanning
rate for each task.</p>
<p>numa_balancing_scan_size_mb is how many megabytes worth of pages are
scanned for a given scan.</p>
</div>
<div class="section" id="osrelease-ostype-version">
<h2>osrelease, ostype &amp; version:<a class="headerlink" href="#osrelease-ostype-version" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cat osrelease
2.1.88
# cat ostype
Linux
# cat version
#5 Wed Feb 25 21:49:24 MET 1998
</pre></div>
</div>
<p>The files osrelease and ostype should be clear enough. Version
needs a little more clarification however. The ‘#5’ means that
this is the fifth kernel built from this source base and the
date behind it indicates the time the kernel was built.
The only way to tune these values is to rebuild the kernel :-)</p>
</div>
<div class="section" id="overflowgid-overflowuid">
<h2>overflowgid &amp; overflowuid:<a class="headerlink" href="#overflowgid-overflowuid" title="Permalink to this headline">¶</a></h2>
<p>if your architecture did not always support 32-bit UIDs (i.e. arm,
i386, m68k, sh, and sparc32), a fixed UID and GID will be returned to
applications that use the old 16-bit UID/GID system calls, if the
actual UID or GID would exceed 65535.</p>
<p>These sysctls allow you to change the value of the fixed UID and GID.
The default is 65534.</p>
</div>
<div class="section" id="panic">
<h2>panic:<a class="headerlink" href="#panic" title="Permalink to this headline">¶</a></h2>
<p>The value in this file represents the number of seconds the kernel
waits before rebooting on a panic. When you use the software watchdog,
the recommended setting is 60.</p>
</div>
<div class="section" id="panic-on-io-nmi">
<h2>panic_on_io_nmi:<a class="headerlink" href="#panic-on-io-nmi" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when a CPU receives an NMI caused by
an IO error.</p>
<p>0: try to continue operation (default)</p>
<dl class="docutils">
<dt>1: panic immediately. The IO error triggered an NMI. This indicates a</dt>
<dd>serious system condition which could result in IO data corruption.
Rather than continuing, panicking might be a better choice. Some
servers issue this sort of NMI when the dump button is pushed,
and you can use this option to take a crash dump.</dd>
</dl>
</div>
<div class="section" id="panic-on-oops">
<h2>panic_on_oops:<a class="headerlink" href="#panic-on-oops" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behaviour when an oops or BUG is encountered.</p>
<p>0: try to continue operation</p>
<dl class="docutils">
<dt>1: panic immediately.  If the <cite>panic</cite> sysctl is also non-zero then the</dt>
<dd>machine will be rebooted.</dd>
</dl>
</div>
<div class="section" id="panic-on-stackoverflow">
<h2>panic_on_stackoverflow:<a class="headerlink" href="#panic-on-stackoverflow" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when detecting the overflows of
kernel, IRQ and exception stacks except a user stack.
This file shows up if CONFIG_DEBUG_STACKOVERFLOW is enabled.</p>
<p>0: try to continue operation.</p>
<p>1: panic immediately.</p>
</div>
<div class="section" id="panic-on-unrecovered-nmi">
<h2>panic_on_unrecovered_nmi:<a class="headerlink" href="#panic-on-unrecovered-nmi" title="Permalink to this headline">¶</a></h2>
<p>The default Linux behaviour on an NMI of either memory or unknown is
to continue operation. For many environments such as scientific
computing it is preferable that the box is taken out and the error
dealt with than an uncorrected parity/ECC error get propagated.</p>
<p>A small number of systems do generate NMI’s for bizarre random reasons
such as power management so the default is off. That sysctl works like
the existing panic controls already in that directory.</p>
</div>
<div class="section" id="panic-on-warn">
<h2>panic_on_warn:<a class="headerlink" href="#panic-on-warn" title="Permalink to this headline">¶</a></h2>
<p>Calls <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> in the WARN() path when set to 1.  This is useful to avoid
a kernel rebuild when attempting to kdump at the location of a WARN().</p>
<p>0: only WARN(), default behaviour.</p>
<p>1: call <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after printing out WARN() location.</p>
</div>
<div class="section" id="panic-print">
<h2>panic_print:<a class="headerlink" href="#panic-print" title="Permalink to this headline">¶</a></h2>
<p>Bitmask for printing system info when panic happens. User can chose
combination of the following bits:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>bit 0</td>
<td>print all tasks info</td>
</tr>
<tr class="row-even"><td>bit 1</td>
<td>print system memory info</td>
</tr>
<tr class="row-odd"><td>bit 2</td>
<td>print timer info</td>
</tr>
<tr class="row-even"><td>bit 3</td>
<td>print locks info if CONFIG_LOCKDEP is on</td>
</tr>
<tr class="row-odd"><td>bit 4</td>
<td>print ftrace buffer</td>
</tr>
</tbody>
</table>
<p>So for example to print tasks and memory info on panic, user can:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 3 &gt; /proc/sys/kernel/panic_print
</pre></div>
</div>
</div>
<div class="section" id="panic-on-rcu-stall">
<h2>panic_on_rcu_stall:<a class="headerlink" href="#panic-on-rcu-stall" title="Permalink to this headline">¶</a></h2>
<p>When set to 1, calls <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after RCU stall detection messages. This
is useful to define the root cause of RCU stalls using a vmcore.</p>
<p>0: do not <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> when RCU stall takes place, default behavior.</p>
<p>1: <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after printing RCU stall messages.</p>
</div>
<div class="section" id="perf-cpu-time-max-percent">
<h2>perf_cpu_time_max_percent:<a class="headerlink" href="#perf-cpu-time-max-percent" title="Permalink to this headline">¶</a></h2>
<p>Hints to the kernel how much CPU time it should be allowed to
use to handle perf sampling events.  If the perf subsystem
is informed that its samples are exceeding this limit, it
will drop its sampling frequency to attempt to reduce its CPU
usage.</p>
<p>Some perf sampling happens in NMIs.  If these samples
unexpectedly take too long to execute, the NMIs can become
stacked up next to each other so much that nothing else is
allowed to execute.</p>
<dl class="docutils">
<dt>0:</dt>
<dd>disable the mechanism.  Do not monitor or correct perf’s
sampling rate no matter how CPU time it takes.</dd>
<dt>1-100:</dt>
<dd>attempt to throttle perf’s sample rate to this
percentage of CPU.  Note: the kernel calculates an
“expected” length of each sample event.  100 here means
100% of that expected length.  Even if this is set to
100, you may still see sample throttling if this
length is exceeded.  Set to 0 if you truly do not care
how much CPU is consumed.</dd>
</dl>
</div>
<div class="section" id="perf-event-paranoid">
<h2>perf_event_paranoid:<a class="headerlink" href="#perf-event-paranoid" title="Permalink to this headline">¶</a></h2>
<p>Controls use of the performance events system by unprivileged
users (without CAP_SYS_ADMIN).  The default value is 2.</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="96%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td><p class="first">Allow use of (almost) all events by all users</p>
<p class="last">Ignore mlock limit after perf_event_mlock_kb without CAP_IPC_LOCK</p>
</td>
</tr>
<tr class="row-even"><td>&gt;=0</td>
<td><p class="first">Disallow ftrace function tracepoint by users without CAP_SYS_ADMIN</p>
<p class="last">Disallow raw tracepoint access by users without CAP_SYS_ADMIN</p>
</td>
</tr>
<tr class="row-odd"><td>&gt;=1</td>
<td>Disallow CPU event access by users without CAP_SYS_ADMIN</td>
</tr>
<tr class="row-even"><td>&gt;=2</td>
<td>Disallow kernel profiling by users without CAP_SYS_ADMIN</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="perf-event-max-stack">
<h2>perf_event_max_stack:<a class="headerlink" href="#perf-event-max-stack" title="Permalink to this headline">¶</a></h2>
<p>Controls maximum number of stack frames to copy for (attr.sample_type &amp;
PERF_SAMPLE_CALLCHAIN) configured events, for instance, when using
‘perf record -g’ or ‘perf trace –call-graph fp’.</p>
<p>This can only be done when no events are in use that have callchains
enabled, otherwise writing to this file will return -EBUSY.</p>
<p>The default value is 127.</p>
</div>
<div class="section" id="perf-event-mlock-kb">
<h2>perf_event_mlock_kb:<a class="headerlink" href="#perf-event-mlock-kb" title="Permalink to this headline">¶</a></h2>
<p>Control size of per-cpu ring buffer not counted agains mlock limit.</p>
<p>The default value is 512 + 1 page</p>
</div>
<div class="section" id="perf-event-max-contexts-per-stack">
<h2>perf_event_max_contexts_per_stack:<a class="headerlink" href="#perf-event-max-contexts-per-stack" title="Permalink to this headline">¶</a></h2>
<p>Controls maximum number of stack frame context entries for
(attr.sample_type &amp; PERF_SAMPLE_CALLCHAIN) configured events, for
instance, when using ‘perf record -g’ or ‘perf trace –call-graph fp’.</p>
<p>This can only be done when no events are in use that have callchains
enabled, otherwise writing to this file will return -EBUSY.</p>
<p>The default value is 8.</p>
</div>
<div class="section" id="pid-max">
<h2>pid_max:<a class="headerlink" href="#pid-max" title="Permalink to this headline">¶</a></h2>
<p>PID allocation wrap value.  When the kernel’s next PID value
reaches this value, it wraps back to a minimum PID value.
PIDs of value pid_max or larger are not allocated.</p>
</div>
<div class="section" id="ns-last-pid">
<h2>ns_last_pid:<a class="headerlink" href="#ns-last-pid" title="Permalink to this headline">¶</a></h2>
<p>The last pid allocated in the current (the one task using this sysctl
lives in) pid namespace. When selecting a pid for a next task on fork
kernel tries to allocate a number starting from this one.</p>
</div>
<div class="section" id="powersave-nap-ppc-only">
<h2>powersave-nap: (PPC only)<a class="headerlink" href="#powersave-nap-ppc-only" title="Permalink to this headline">¶</a></h2>
<p>If set, Linux-PPC will use the ‘nap’ mode of powersaving,
otherwise the ‘doze’ mode will be used.</p>
</div>
<hr class="docutils" />
<div class="section" id="printk">
<h2>printk:<a class="headerlink" href="#printk" title="Permalink to this headline">¶</a></h2>
<p>The four values in printk denote: console_loglevel,
default_message_loglevel, minimum_console_loglevel and
default_console_loglevel respectively.</p>
<p>These values influence <a class="reference internal" href="../../driver-api/basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a> behavior when printing or
logging error messages. See ‘man 2 syslog’ for more info on
the different loglevels.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>console_loglevel:</dt>
<dd>messages with a higher priority than
this will be printed to the console</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>default_message_loglevel:</dt>
<dd>messages without an explicit priority
will be printed with this priority</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>minimum_console_loglevel:</dt>
<dd>minimum (highest) value to which
console_loglevel can be set</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>default_console_loglevel:</dt>
<dd>default value for console_loglevel</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="printk-delay">
<h2>printk_delay:<a class="headerlink" href="#printk-delay" title="Permalink to this headline">¶</a></h2>
<p>Delay each printk message in printk_delay milliseconds</p>
<p>Value from 0 - 10000 is allowed.</p>
</div>
<div class="section" id="printk-ratelimit">
<h2>printk_ratelimit:<a class="headerlink" href="#printk-ratelimit" title="Permalink to this headline">¶</a></h2>
<p>Some warning messages are rate limited. printk_ratelimit specifies
the minimum length of time between these messages (in seconds).
The default value is 5 seconds.</p>
<p>A value of 0 will disable rate limiting.</p>
</div>
<div class="section" id="printk-ratelimit-burst">
<h2>printk_ratelimit_burst:<a class="headerlink" href="#printk-ratelimit-burst" title="Permalink to this headline">¶</a></h2>
<p>While long term we enforce one message per printk_ratelimit
seconds, we do allow a burst of messages to pass through.
printk_ratelimit_burst specifies the number of messages we can
send before ratelimiting kicks in.</p>
<p>The default value is 10 messages.</p>
</div>
<div class="section" id="printk-devkmsg">
<h2>printk_devkmsg:<a class="headerlink" href="#printk-devkmsg" title="Permalink to this headline">¶</a></h2>
<p>Control the logging to /dev/kmsg from userspace:</p>
<dl class="docutils">
<dt>ratelimit:</dt>
<dd>default, ratelimited</dd>
</dl>
<p>on: unlimited logging to /dev/kmsg from userspace</p>
<p>off: logging to /dev/kmsg disabled</p>
<p>The kernel command line parameter printk.devkmsg= overrides this and is
a one-time setting until next reboot: once set, it cannot be changed by
this sysctl interface anymore.</p>
</div>
<div class="section" id="randomize-va-space">
<h2>randomize_va_space:<a class="headerlink" href="#randomize-va-space" title="Permalink to this headline">¶</a></h2>
<p>This option can be used to select the type of process address
space randomization that is used in the system, for architectures
that support this feature.</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="97%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>Turn the process address space randomization off.  This is the
default for architectures that do not support this feature anyways,
and kernels that are booted with the “norandmaps” parameter.</td>
</tr>
<tr class="row-even"><td>1</td>
<td>Make the addresses of mmap base, stack and VDSO page randomized.
This, among other things, implies that shared libraries will be
loaded to random addresses.  Also for PIE-linked binaries, the
location of code start is randomized.  This is the default if the
CONFIG_COMPAT_BRK option is enabled.</td>
</tr>
<tr class="row-odd"><td>2</td>
<td><p class="first">Additionally enable heap randomization.  This is the default if
CONFIG_COMPAT_BRK is disabled.</p>
<p>There are a few legacy applications out there (such as some ancient
versions of libc.so.5 from 1996) that assume that brk area starts
just after the end of the code+bss.  These applications break when
start of the brk area is randomized.  There are however no known
non-legacy applications that would be broken this way, so for most
systems it is safe to choose full randomization.</p>
<p class="last">Systems with ancient and/or broken binaries should be configured
with CONFIG_COMPAT_BRK enabled, which excludes the heap from process
address space randomization.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reboot-cmd-sparc-only">
<h2>reboot-cmd: (Sparc only)<a class="headerlink" href="#reboot-cmd-sparc-only" title="Permalink to this headline">¶</a></h2>
<p>??? This seems to be a way to give an argument to the Sparc
ROM/Flash boot loader. Maybe to tell it what to do after
rebooting. ???</p>
</div>
<div class="section" id="rtsig-max-rtsig-nr">
<h2>rtsig-max &amp; rtsig-nr:<a class="headerlink" href="#rtsig-max-rtsig-nr" title="Permalink to this headline">¶</a></h2>
<p>The file rtsig-max can be used to tune the maximum number
of POSIX realtime (queued) signals that can be outstanding
in the system.</p>
<p>rtsig-nr shows the number of RT signals currently queued.</p>
</div>
<div class="section" id="sched-energy-aware">
<h2>sched_energy_aware:<a class="headerlink" href="#sched-energy-aware" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables Energy Aware Scheduling (EAS). EAS starts
automatically on platforms where it can run (that is,
platforms with asymmetric CPU topologies and having an Energy
Model available). If your platform happens to meet the
requirements for EAS but you do not want to use it, change
this value to 0.</p>
</div>
<div class="section" id="sched-schedstats">
<h2>sched_schedstats:<a class="headerlink" href="#sched-schedstats" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables scheduler statistics. Enabling this feature
incurs a small amount of overhead in the scheduler but is
useful for debugging and performance tuning.</p>
</div>
<div class="section" id="sg-big-buff">
<h2>sg-big-buff:<a class="headerlink" href="#sg-big-buff" title="Permalink to this headline">¶</a></h2>
<p>This file shows the size of the generic SCSI (sg) buffer.
You can’t tune it just yet, but you could change it on
compile time by editing include/scsi/sg.h and changing
the value of SG_BIG_BUFF.</p>
<p>There shouldn’t be any reason to change this value. If
you can come up with one, you probably know what you
are doing anyway :)</p>
</div>
<div class="section" id="shmall">
<h2>shmall:<a class="headerlink" href="#shmall" title="Permalink to this headline">¶</a></h2>
<p>This parameter sets the total amount of shared memory pages that
can be used system wide. Hence, SHMALL should always be at least
ceil(shmmax/PAGE_SIZE).</p>
<p>If you are not sure what the default PAGE_SIZE is on your Linux
system, you can run the following command:</p>
<blockquote>
<div># getconf PAGE_SIZE</div></blockquote>
</div>
<div class="section" id="shmmax">
<h2>shmmax:<a class="headerlink" href="#shmmax" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to query and set the run time limit
on the maximum shared memory segment size that can be created.
Shared memory segments up to 1Gb are now supported in the
kernel.  This value defaults to SHMMAX.</p>
</div>
<div class="section" id="shm-rmid-forced">
<h2>shm_rmid_forced:<a class="headerlink" href="#shm-rmid-forced" title="Permalink to this headline">¶</a></h2>
<p>Linux lets you set resource limits, including how much memory one
process can consume, via setrlimit(2).  Unfortunately, shared memory
segments are allowed to exist without association with any process, and
thus might not be counted against any resource limits.  If enabled,
shared memory segments are automatically destroyed when their attach
count becomes zero after a detach or a process termination.  It will
also destroy segments that were created, but never attached to, on exit
from the process.  The only use left for IPC_RMID is to immediately
destroy an unattached segment.  Of course, this breaks the way things are
defined, so some applications might stop working.  Note that this
feature will do you no good unless you also configure your resource
limits (in particular, RLIMIT_AS and RLIMIT_NPROC).  Most systems don’t
need this.</p>
<p>Note that if you change this from 0 to 1, already created segments
without users and with a dead originative process will be destroyed.</p>
</div>
<div class="section" id="sysctl-writes-strict">
<h2>sysctl_writes_strict:<a class="headerlink" href="#sysctl-writes-strict" title="Permalink to this headline">¶</a></h2>
<p>Control how file position affects the behavior of updating sysctl values
via the /proc/sys interface:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="97%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>Legacy per-write sysctl value handling, with no printk warnings.
Each write syscall must fully contain the sysctl value to be
written, and multiple writes on the same sysctl file descriptor
will rewrite the sysctl value, regardless of file position.</td>
</tr>
<tr class="row-even"><td>0</td>
<td>Same behavior as above, but warn about processes that perform writes
to a sysctl file descriptor when the file position is not 0.</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>(default) Respect file position when writing sysctl strings. Multiple
writes will append to the sysctl value buffer. Anything past the max
length of the sysctl value buffer will be ignored. Writes to numeric
sysctl entries must always be at file position 0 and the value must
be fully contained in the buffer sent in the write syscall.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="softlockup-all-cpu-backtrace">
<h2>softlockup_all_cpu_backtrace:<a class="headerlink" href="#softlockup-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>This value controls the soft lockup detector thread’s behavior
when a soft lockup condition is detected as to whether or not
to gather further debug information. If enabled, each cpu will
be issued an NMI and instructed to capture stack trace.</p>
<p>This feature is only applicable for architectures which support
NMI.</p>
<p>0: do nothing. This is the default behavior.</p>
<p>1: on detection capture more debug information.</p>
</div>
<div class="section" id="soft-watchdog">
<h2>soft_watchdog:<a class="headerlink" href="#soft-watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control the soft lockup detector.</p>
<blockquote>
<div><p>0 - disable the soft lockup detector</p>
<p>1 - enable the soft lockup detector</p>
</div></blockquote>
<p>The soft lockup detector monitors CPUs for threads that are hogging the CPUs
without rescheduling voluntarily, and thus prevent the ‘watchdog/N’ threads
from running. The mechanism depends on the CPUs ability to respond to timer
interrupts which are needed for the ‘watchdog/N’ threads to be woken up by
the watchdog timer function, otherwise the NMI watchdog - if enabled - can
detect a hard lockup condition.</p>
</div>
<div class="section" id="stack-erasing">
<h2>stack_erasing:<a class="headerlink" href="#stack-erasing" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control kernel stack erasing at the end
of syscalls for kernels built with CONFIG_GCC_PLUGIN_STACKLEAK.</p>
<p>That erasing reduces the information which kernel stack leak bugs
can reveal and blocks some uninitialized stack variable attacks.
The tradeoff is the performance impact: on a single CPU system kernel
compilation sees a 1% slowdown, other systems and workloads may vary.</p>
<blockquote>
<div><p>0: kernel stack erasing is disabled, STACKLEAK_METRICS are not updated.</p>
<dl class="docutils">
<dt>1: kernel stack erasing is enabled (default), it is performed before</dt>
<dd>returning to the userspace at the end of syscalls.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="tainted">
<h2>tainted<a class="headerlink" href="#tainted" title="Permalink to this headline">¶</a></h2>
<p>Non-zero if the kernel has been tainted. Numeric values, which can be
ORed together. The letters are seen in “Tainted” line of Oops reports.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="7%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>1</td>
<td><cite>(P)</cite></td>
<td>proprietary module was loaded</td>
</tr>
<tr class="row-even"><td>2</td>
<td><cite>(F)</cite></td>
<td>module was force loaded</td>
</tr>
<tr class="row-odd"><td>4</td>
<td><cite>(S)</cite></td>
<td>SMP kernel oops on an officially SMP incapable processor</td>
</tr>
<tr class="row-even"><td>8</td>
<td><cite>(R)</cite></td>
<td>module was force unloaded</td>
</tr>
<tr class="row-odd"><td>16</td>
<td><cite>(M)</cite></td>
<td>processor reported a Machine Check Exception (MCE)</td>
</tr>
<tr class="row-even"><td>32</td>
<td><cite>(B)</cite></td>
<td>bad page referenced or some unexpected page flags</td>
</tr>
<tr class="row-odd"><td>64</td>
<td><cite>(U)</cite></td>
<td>taint requested by userspace application</td>
</tr>
<tr class="row-even"><td>128</td>
<td><cite>(D)</cite></td>
<td>kernel died recently, i.e. there was an OOPS or BUG</td>
</tr>
<tr class="row-odd"><td>256</td>
<td><cite>(A)</cite></td>
<td>an ACPI table was overridden by user</td>
</tr>
<tr class="row-even"><td>512</td>
<td><cite>(W)</cite></td>
<td>kernel issued warning</td>
</tr>
<tr class="row-odd"><td>1024</td>
<td><cite>(C)</cite></td>
<td>staging driver was loaded</td>
</tr>
<tr class="row-even"><td>2048</td>
<td><cite>(I)</cite></td>
<td>workaround for bug in platform firmware applied</td>
</tr>
<tr class="row-odd"><td>4096</td>
<td><cite>(O)</cite></td>
<td>externally-built (“out-of-tree”) module was loaded</td>
</tr>
<tr class="row-even"><td>8192</td>
<td><cite>(E)</cite></td>
<td>unsigned module was loaded</td>
</tr>
<tr class="row-odd"><td>16384</td>
<td><cite>(L)</cite></td>
<td>soft lockup occurred</td>
</tr>
<tr class="row-even"><td>32768</td>
<td><cite>(K)</cite></td>
<td>kernel has been live patched</td>
</tr>
<tr class="row-odd"><td>65536</td>
<td><cite>(X)</cite></td>
<td>Auxiliary taint, defined and used by for distros</td>
</tr>
<tr class="row-even"><td>131072</td>
<td><cite>(T)</cite></td>
<td>The kernel was built with the struct randomization plugin</td>
</tr>
</tbody>
</table>
<p>See Documentation/admin-guide/tainted-kernels.rst for more information.</p>
</div>
<div class="section" id="threads-max">
<h2>threads-max:<a class="headerlink" href="#threads-max" title="Permalink to this headline">¶</a></h2>
<p>This value controls the maximum number of threads that can be created
using fork().</p>
<p>During initialization the kernel sets this value such that even if the
maximum number of threads is created, the thread structures occupy only
a part (1/8th) of the available RAM pages.</p>
<p>The minimum value that can be written to threads-max is 1.</p>
<p>The maximum value that can be written to threads-max is given by the
constant FUTEX_TID_MASK (0x3fffffff).</p>
<p>If a value outside of this range is written to threads-max an error
EINVAL occurs.</p>
</div>
<div class="section" id="unknown-nmi-panic">
<h2>unknown_nmi_panic:<a class="headerlink" href="#unknown-nmi-panic" title="Permalink to this headline">¶</a></h2>
<p>The value in this file affects behavior of handling NMI. When the
value is non-zero, unknown NMI is trapped and then panic occurs. At
that time, kernel debugging information is displayed on console.</p>
<p>NMI switch that most IA32 servers have fires unknown NMI up, for
example.  If a system hangs up, try pressing the NMI switch.</p>
</div>
<div class="section" id="watchdog">
<h2>watchdog:<a class="headerlink" href="#watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to disable or enable the soft lockup detector
_and_ the NMI watchdog (i.e. the hard lockup detector) at the same time.</p>
<blockquote>
<div><p>0 - disable both lockup detectors</p>
<p>1 - enable both lockup detectors</p>
</div></blockquote>
<p>The soft lockup detector and the NMI watchdog can also be disabled or
enabled individually, using the soft_watchdog and nmi_watchdog parameters.
If the watchdog parameter is read, for example by executing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat /proc/sys/kernel/watchdog
</pre></div>
</div>
<p>the output of this command (0 or 1) shows the logical OR of soft_watchdog
and nmi_watchdog.</p>
</div>
<div class="section" id="watchdog-cpumask">
<h2>watchdog_cpumask:<a class="headerlink" href="#watchdog-cpumask" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to control on which cpus the watchdog may run.
The default cpumask is all possible cores, but if NO_HZ_FULL is
enabled in the kernel config, and cores are specified with the
nohz_full= boot argument, those cores are excluded by default.
Offline cores can be included in this mask, and if the core is later
brought online, the watchdog will be started based on the mask value.</p>
<p>Typically this value would only be touched in the nohz_full case
to re-enable cores that by default were not running the watchdog,
if a kernel lockup was suspected on those cores.</p>
<p>The argument value is the standard cpulist format for cpumasks,
so for example to enable the watchdog on cores 0, 2, 3, and 4 you
might say:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 0,2-4 &gt; /proc/sys/kernel/watchdog_cpumask
</pre></div>
</div>
</div>
<div class="section" id="watchdog-thresh">
<h2>watchdog_thresh:<a class="headerlink" href="#watchdog-thresh" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to control the frequency of hrtimer and NMI
events and the soft and hard lockup thresholds. The default threshold
is 10 seconds.</p>
<p>The softlockup threshold is (2 * watchdog_thresh). Setting this
tunable to zero will disable lockup detection altogether.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>