

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Linux Driver for the Pensando(R) Ethernet adapter family &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>Linux Driver for the Pensando(R) Ethernet adapter family</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/networking/device_drivers/pensando/ionic.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-driver-for-the-pensando-r-ethernet-adapter-family">
<h1>Linux Driver for the Pensando(R) Ethernet adapter family<a class="headerlink" href="#linux-driver-for-the-pensando-r-ethernet-adapter-family" title="Permalink to this headline">¶</a></h1>
<p>Pensando Linux Ethernet driver.
Copyright(c) 2019 Pensando Systems, Inc</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Identifying the Adapter</li>
<li>Enabling the driver</li>
<li>Configuring the driver</li>
<li>Statistics</li>
<li>Support</li>
</ul>
</div>
<div class="section" id="identifying-the-adapter">
<h2>Identifying the Adapter<a class="headerlink" href="#identifying-the-adapter" title="Permalink to this headline">¶</a></h2>
<p>To find if one or more Pensando PCI Ethernet devices are installed on the
host, check for the PCI devices:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ lspci -d 1dd8:
b5:00.0 Ethernet controller: Device 1dd8:1002
b6:00.0 Ethernet controller: Device 1dd8:1002
</pre></div>
</div>
<p>If such devices are listed as above, then the ionic.ko driver should find
and configure them for use.  There should be log entries in the kernel
messages such as these:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dmesg | grep ionic
ionic 0000:b5:00.0: 126.016 Gb/s available PCIe bandwidth (8.0 GT/s PCIe x16 link)
ionic 0000:b5:00.0 enp181s0: renamed from eth0
ionic 0000:b5:00.0 enp181s0: Link up - 100 Gbps
ionic 0000:b6:00.0: 126.016 Gb/s available PCIe bandwidth (8.0 GT/s PCIe x16 link)
ionic 0000:b6:00.0 enp182s0: renamed from eth0
ionic 0000:b6:00.0 enp182s0: Link up - 100 Gbps
</pre></div>
</div>
<p>Driver and firmware version information can be gathered with either of
ethtool or devlink tools:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ethtool -i enp181s0
driver: ionic
version: 5.7.0
firmware-version: 1.8.0-28
...

$ devlink dev info pci/0000:b5:00.0
pci/0000:b5:00.0:
  driver ionic
  serial_number FLM18420073
  versions:
      fixed:
        asic.id 0x0
        asic.rev 0x0
      running:
        fw 1.8.0-28
</pre></div>
</div>
<p>See Documentation/networking/devlink/ionic.rst for more information
on the devlink dev info data.</p>
</div>
<div class="section" id="enabling-the-driver">
<h2>Enabling the driver<a class="headerlink" href="#enabling-the-driver" title="Permalink to this headline">¶</a></h2>
<p>The driver is enabled via the standard kernel configuration system,
using the make command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make oldconfig/menuconfig/etc.
</pre></div>
</div>
<p>The driver is located in the menu structure at:</p>
<blockquote>
<div><dl class="docutils">
<dt>-&gt; Device Drivers</dt>
<dd><dl class="first last docutils">
<dt>-&gt; Network device support (NETDEVICES [=y])</dt>
<dd><dl class="first last docutils">
<dt>-&gt; Ethernet driver support</dt>
<dd><dl class="first last docutils">
<dt>-&gt; Pensando devices</dt>
<dd>-&gt; Pensando Ethernet IONIC Support</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="configuring-the-driver">
<h2>Configuring the Driver<a class="headerlink" href="#configuring-the-driver" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mtu">
<h3>MTU<a class="headerlink" href="#mtu" title="Permalink to this headline">¶</a></h3>
<p>Jumbo frame support is available with a maximim size of 9194 bytes.</p>
</div>
<div class="section" id="interrupt-coalescing">
<h3>Interrupt coalescing<a class="headerlink" href="#interrupt-coalescing" title="Permalink to this headline">¶</a></h3>
<p>Interrupt coalescing can be configured by changing the rx-usecs value with
the “ethtool -C” command.  The rx-usecs range is 0-190.  The tx-usecs value
reflects the rx-usecs value as they are tied together on the same interrupt.</p>
</div>
<div class="section" id="sr-iov">
<h3>SR-IOV<a class="headerlink" href="#sr-iov" title="Permalink to this headline">¶</a></h3>
<p>Minimal SR-IOV support is currently offered and can be enabled by setting
the sysfs ‘sriov_numvfs’ value, if supported by your particular firmware
configuration.</p>
</div>
</div>
<div class="section" id="statistics">
<h2>Statistics<a class="headerlink" href="#statistics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-hardware-stats">
<h3>Basic hardware stats<a class="headerlink" href="#basic-hardware-stats" title="Permalink to this headline">¶</a></h3>
<p>The commands <code class="docutils literal notranslate"><span class="pre">netstat</span> <span class="pre">-i</span></code>, <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">-s</span> <span class="pre">link</span> <span class="pre">show</span></code>, and <code class="docutils literal notranslate"><span class="pre">ifconfig</span></code> show
a limited set of statistics taken directly from firmware.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ip -s link show enp181s0
7: enp181s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 00:ae:cd:00:07:68 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped overrun mcast
    414        5        0       0       0       0
    TX: bytes  packets  errors  dropped carrier collsns
    1384       18       0       0       0       0
</pre></div>
</div>
</div>
<div class="section" id="ethtool-s">
<h3>ethtool -S<a class="headerlink" href="#ethtool-s" title="Permalink to this headline">¶</a></h3>
<p>The statistics shown from the <code class="docutils literal notranslate"><span class="pre">ethtool</span> <span class="pre">-S</span></code> command includes a combination of
driver counters and firmware counters, including port and queue specific values.
The driver values are counters computed by the driver, and the firmware values
are gathered by the firmware from the port hardware and passed through the
driver with no further interpretation.</p>
<p>Driver port specific:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tx_packets: 12
tx_bytes: 964
rx_packets: 5
rx_bytes: 414
tx_tso: 0
tx_tso_bytes: 0
tx_csum_none: 12
tx_csum: 0
rx_csum_none: 0
rx_csum_complete: 3
rx_csum_error: 0
</pre></div>
</div>
<p>Driver queue specific:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tx_0_pkts: 3
tx_0_bytes: 294
tx_0_clean: 3
tx_0_dma_map_err: 0
tx_0_linearize: 0
tx_0_frags: 0
tx_0_tso: 0
tx_0_tso_bytes: 0
tx_0_csum_none: 3
tx_0_csum: 0
tx_0_vlan_inserted: 0
rx_0_pkts: 2
rx_0_bytes: 120
rx_0_dma_map_err: 0
rx_0_alloc_err: 0
rx_0_csum_none: 0
rx_0_csum_complete: 0
rx_0_csum_error: 0
rx_0_dropped: 0
rx_0_vlan_stripped: 0
</pre></div>
</div>
<p>Firmware port specific:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hw_tx_dropped: 0
hw_rx_dropped: 0
hw_rx_over_errors: 0
hw_rx_missed_errors: 0
hw_tx_aborted_errors: 0
frames_rx_ok: 15
frames_rx_all: 15
frames_rx_bad_fcs: 0
frames_rx_bad_all: 0
octets_rx_ok: 1290
octets_rx_all: 1290
frames_rx_unicast: 10
frames_rx_multicast: 5
frames_rx_broadcast: 0
frames_rx_pause: 0
frames_rx_bad_length: 0
frames_rx_undersized: 0
frames_rx_oversized: 0
frames_rx_fragments: 0
frames_rx_jabber: 0
frames_rx_pripause: 0
frames_rx_stomped_crc: 0
frames_rx_too_long: 0
frames_rx_vlan_good: 3
frames_rx_dropped: 0
frames_rx_less_than_64b: 0
frames_rx_64b: 4
frames_rx_65b_127b: 11
frames_rx_128b_255b: 0
frames_rx_256b_511b: 0
frames_rx_512b_1023b: 0
frames_rx_1024b_1518b: 0
frames_rx_1519b_2047b: 0
frames_rx_2048b_4095b: 0
frames_rx_4096b_8191b: 0
frames_rx_8192b_9215b: 0
frames_rx_other: 0
frames_tx_ok: 31
frames_tx_all: 31
frames_tx_bad: 0
octets_tx_ok: 2614
octets_tx_total: 2614
frames_tx_unicast: 8
frames_tx_multicast: 21
frames_tx_broadcast: 2
frames_tx_pause: 0
frames_tx_pripause: 0
frames_tx_vlan: 0
frames_tx_less_than_64b: 0
frames_tx_64b: 4
frames_tx_65b_127b: 27
frames_tx_128b_255b: 0
frames_tx_256b_511b: 0
frames_tx_512b_1023b: 0
frames_tx_1024b_1518b: 0
frames_tx_1519b_2047b: 0
frames_tx_2048b_4095b: 0
frames_tx_4096b_8191b: 0
frames_tx_8192b_9215b: 0
frames_tx_other: 0
frames_tx_pri_0: 0
frames_tx_pri_1: 0
frames_tx_pri_2: 0
frames_tx_pri_3: 0
frames_tx_pri_4: 0
frames_tx_pri_5: 0
frames_tx_pri_6: 0
frames_tx_pri_7: 0
frames_rx_pri_0: 0
frames_rx_pri_1: 0
frames_rx_pri_2: 0
frames_rx_pri_3: 0
frames_rx_pri_4: 0
frames_rx_pri_5: 0
frames_rx_pri_6: 0
frames_rx_pri_7: 0
tx_pripause_0_1us_count: 0
tx_pripause_1_1us_count: 0
tx_pripause_2_1us_count: 0
tx_pripause_3_1us_count: 0
tx_pripause_4_1us_count: 0
tx_pripause_5_1us_count: 0
tx_pripause_6_1us_count: 0
tx_pripause_7_1us_count: 0
rx_pripause_0_1us_count: 0
rx_pripause_1_1us_count: 0
rx_pripause_2_1us_count: 0
rx_pripause_3_1us_count: 0
rx_pripause_4_1us_count: 0
rx_pripause_5_1us_count: 0
rx_pripause_6_1us_count: 0
rx_pripause_7_1us_count: 0
rx_pause_1us_count: 0
frames_tx_truncated: 0
</pre></div>
</div>
</div>
</div>
<div class="section" id="support">
<h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>For general Linux networking support, please use the netdev mailing
list, which is monitored by Pensando personnel:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>netdev@vger.kernel.org
</pre></div>
</div>
<p>For more specific support needs, please use the Pensando driver support
email:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>drivers@pensando.io
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>