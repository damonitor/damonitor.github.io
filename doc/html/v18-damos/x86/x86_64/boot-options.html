

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>22.1. AMD64 Specific Boot Options &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>22.1. AMD64 Specific Boot Options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/x86/x86_64/boot-options.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="amd64-specific-boot-options">
<h1>22.1. AMD64 Specific Boot Options<a class="headerlink" href="#amd64-specific-boot-options" title="Permalink to this headline">¶</a></h1>
<p>There are many others (usually documented in driver documentation), but
only the AMD64 specific ones are listed here.</p>
<div class="section" id="machine-check">
<h2>22.1.1. Machine check<a class="headerlink" href="#machine-check" title="Permalink to this headline">¶</a></h2>
<p>Please see Documentation/x86/x86_64/machinecheck.rst for sysfs runtime tunables.</p>
<blockquote>
<div><dl class="docutils">
<dt>mce=off</dt>
<dd>Disable machine check</dd>
<dt>mce=no_cmci</dt>
<dd>Disable CMCI(Corrected Machine Check Interrupt) that
Intel processor supports.  Usually this disablement is
not recommended, but it might be handy if your hardware
is misbehaving.
Note that you’ll get more problems without CMCI than with
due to the shared banks, i.e. you might get duplicated
error logs.</dd>
<dt>mce=dont_log_ce</dt>
<dd>Don’t make logs for corrected errors.  All events reported
as corrected are silently cleared by OS.
This option will be useful if you have no interest in any
of corrected errors.</dd>
<dt>mce=ignore_ce</dt>
<dd>Disable features for corrected errors, e.g. polling timer
and CMCI.  All events reported as corrected are not cleared
by OS and remained in its error banks.
Usually this disablement is not recommended, however if
there is an agent checking/clearing corrected errors
(e.g. BIOS or hardware monitoring applications), conflicting
with OS’s error handling, and you cannot deactivate the agent,
then this option will be a help.</dd>
<dt>mce=no_lmce</dt>
<dd>Do not opt-in to Local MCE delivery. Use legacy method
to broadcast MCEs.</dd>
<dt>mce=bootlog</dt>
<dd>Enable logging of machine checks left over from booting.
Disabled by default on AMD Fam10h and older because some BIOS
leave bogus ones.
If your BIOS doesn’t do that it’s a good idea to enable though
to make sure you log even machine check events that result
in a reboot. On Intel systems it is enabled by default.</dd>
<dt>mce=nobootlog</dt>
<dd>Disable boot machine check logging.</dd>
<dt>mce=tolerancelevel[,monarchtimeout] (number,number)</dt>
<dd>tolerance levels:
0: always panic on uncorrected errors, log corrected errors
1: panic or SIGBUS on uncorrected errors, log corrected errors
2: SIGBUS or log uncorrected errors, log corrected errors
3: never panic or SIGBUS, log all errors (for testing only)
Default is 1
Can be also set using sysfs which is preferable.
monarchtimeout:
Sets the time in us to wait for other CPUs on machine checks. 0
to disable.</dd>
<dt>mce=bios_cmci_threshold</dt>
<dd>Don’t overwrite the bios-set CMCI threshold. This boot option
prevents Linux from overwriting the CMCI threshold set by the
bios. Without this option, Linux always sets the CMCI
threshold to 1. Enabling this may make memory predictive failure
analysis less effective if the bios sets thresholds for memory
errors since we will not see details for all errors.</dd>
<dt>mce=recovery</dt>
<dd>Force-enable recoverable machine check code paths</dd>
<dt>nomce (for compatibility with i386)</dt>
<dd>same as mce=off</dd>
</dl>
<p>Everything else is in sysfs now.</p>
</div></blockquote>
</div>
<div class="section" id="apics">
<h2>22.1.2. APICs<a class="headerlink" href="#apics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>apic</dt>
<dd>Use IO-APIC. Default</dd>
<dt>noapic</dt>
<dd>Don’t use the IO-APIC.</dd>
<dt>disableapic</dt>
<dd>Don’t use the local APIC</dd>
<dt>nolapic</dt>
<dd>Don’t use the local APIC (alias for i386 compatibility)</dd>
<dt>pirq=…</dt>
<dd>See Documentation/x86/i386/IO-APIC.rst</dd>
<dt>noapictimer</dt>
<dd>Don’t set up the APIC timer</dd>
<dt>no_timer_check</dt>
<dd>Don’t check the IO-APIC timer. This can work around
problems with incorrect timer initialization on some boards.</dd>
<dt>apicpmtimer</dt>
<dd>Do APIC timer calibration using the pmtimer. Implies
apicmaintimer. Useful when your PIT timer is totally broken.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="timing">
<h2>22.1.3. Timing<a class="headerlink" href="#timing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>notsc</dt>
<dd>Deprecated, use tsc=unstable instead.</dd>
<dt>nohpet</dt>
<dd>Don’t use the HPET timer.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="idle-loop">
<h2>22.1.4. Idle loop<a class="headerlink" href="#idle-loop" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>idle=poll</dt>
<dd>Don’t do power saving in the idle loop using HLT, but poll for rescheduling
event. This will make the CPUs eat a lot more power, but may be useful
to get slightly better performance in multiprocessor benchmarks. It also
makes some profiling using performance counters more accurate.
Please note that on systems with MONITOR/MWAIT support (like Intel EM64T
CPUs) this option has no performance advantage over the normal idle loop.
It may also interact badly with hyperthreading.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="rebooting">
<h2>22.1.5. Rebooting<a class="headerlink" href="#rebooting" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>reboot=b[ios] | t[riple] | k[bd] | a[cpi] | e[fi] [, [w]arm | [c]old]</dt>
<dd><dl class="first last docutils">
<dt>bios</dt>
<dd>Use the CPU reboot vector for warm reset</dd>
<dt>warm</dt>
<dd>Don’t set the cold reboot flag</dd>
<dt>cold</dt>
<dd>Set the cold reboot flag</dd>
<dt>triple</dt>
<dd>Force a triple fault (init)</dd>
<dt>kbd</dt>
<dd>Use the keyboard controller. cold reset (default)</dd>
<dt>acpi</dt>
<dd>Use the ACPI RESET_REG in the FADT. If ACPI is not configured or
the ACPI reset does not work, the reboot path attempts the reset
using the keyboard controller.</dd>
<dt>efi</dt>
<dd>Use efi reset_system runtime service. If EFI is not configured or
the EFI reset does not work, the reboot path attempts the reset using
the keyboard controller.</dd>
</dl>
</dd>
</dl>
<p>Using warm reset will be much faster especially on big memory
systems because the BIOS will not go through the memory check.
Disadvantage is that not all hardware will be completely reinitialized
on reboot so there may be boot problems on some systems.</p>
<dl class="docutils">
<dt>reboot=force</dt>
<dd>Don’t stop other CPUs on reboot. This can make reboot more reliable
in some cases.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="non-executable-mappings">
<h2>22.1.6. Non Executable Mappings<a class="headerlink" href="#non-executable-mappings" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>noexec=on|off</dt>
<dd><dl class="first last docutils">
<dt>on</dt>
<dd>Enable(default)</dd>
<dt>off</dt>
<dd>Disable</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="numa">
<h2>22.1.7. NUMA<a class="headerlink" href="#numa" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>numa=off</dt>
<dd>Only set up a single NUMA node spanning all memory.</dd>
<dt>numa=noacpi</dt>
<dd>Don’t parse the SRAT table for NUMA setup</dd>
<dt>numa=fake=&lt;size&gt;[MG]</dt>
<dd>If given as a memory unit, fills all system RAM with nodes of
size interleaved over physical nodes.</dd>
<dt>numa=fake=&lt;N&gt;</dt>
<dd>If given as an integer, fills all system RAM with N fake nodes
interleaved over physical nodes.</dd>
<dt>numa=fake=&lt;N&gt;U</dt>
<dd>If given as an integer followed by ‘U’, it will divide each
physical node into N emulated nodes.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="acpi">
<h2>22.1.8. ACPI<a class="headerlink" href="#acpi" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>acpi=off</dt>
<dd>Don’t enable ACPI</dd>
<dt>acpi=ht</dt>
<dd>Use ACPI boot table parsing, but don’t enable ACPI interpreter</dd>
<dt>acpi=force</dt>
<dd>Force ACPI on (currently not needed)</dd>
<dt>acpi=strict</dt>
<dd>Disable out of spec ACPI workarounds.</dd>
<dt>acpi_sci={edge,level,high,low}</dt>
<dd>Set up ACPI SCI interrupt.</dd>
<dt>acpi=noirq</dt>
<dd>Don’t route interrupts</dd>
<dt>acpi=nocmcff</dt>
<dd>Disable firmware first mode for corrected errors. This
disables parsing the HEST CMC error source to check if
firmware has set the FF flag. This may result in
duplicate corrected error reports.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="pci">
<h2>22.1.9. PCI<a class="headerlink" href="#pci" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>pci=off</dt>
<dd>Don’t use PCI</dd>
<dt>pci=conf1</dt>
<dd>Use conf1 access.</dd>
<dt>pci=conf2</dt>
<dd>Use conf2 access.</dd>
<dt>pci=rom</dt>
<dd>Assign ROMs.</dd>
<dt>pci=assign-busses</dt>
<dd>Assign busses</dd>
<dt>pci=irqmask=MASK</dt>
<dd>Set PCI interrupt mask to MASK</dd>
<dt>pci=lastbus=NUMBER</dt>
<dd>Scan up to NUMBER busses, no matter what the mptable says.</dd>
<dt>pci=noacpi</dt>
<dd>Don’t use ACPI to set up PCI interrupt routing.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="iommu-input-output-memory-management-unit">
<h2>22.1.10. IOMMU (input/output memory management unit)<a class="headerlink" href="#iommu-input-output-memory-management-unit" title="Permalink to this headline">¶</a></h2>
<p>Multiple x86-64 PCI-DMA mapping implementations exist, for example:</p>
<blockquote>
<div><ol class="arabic simple">
<li>&lt;kernel/dma/direct.c&gt;: use no hardware/software IOMMU at all
(e.g. because you have &lt; 3 GB memory).
Kernel boot message: “PCI-DMA: Disabling IOMMU”</li>
<li>&lt;arch/x86/kernel/amd_gart_64.c&gt;: AMD GART based hardware IOMMU.
Kernel boot message: “PCI-DMA: using GART IOMMU”</li>
<li>&lt;arch/x86_64/kernel/pci-swiotlb.c&gt; : Software IOMMU implementation. Used
e.g. if there is no hardware IOMMU in the system and it is need because
you have &gt;3GB memory or told the kernel to us it (iommu=soft))
Kernel boot message: “PCI-DMA: Using software bounce buffering
for IO (SWIOTLB)”</li>
<li>&lt;arch/x86_64/pci-calgary.c&gt; : IBM Calgary hardware IOMMU. Used in IBM
pSeries and xSeries servers. This hardware IOMMU supports DMA address
mapping with memory protection, etc.
Kernel boot message: “PCI-DMA: Using Calgary IOMMU”</li>
</ol>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iommu=[&lt;size&gt;][,noagp][,off][,force][,noforce]
[,memaper[=&lt;order&gt;]][,merge][,fullflush][,nomerge]
[,noaperture][,calgary]
</pre></div>
</div>
<p>General iommu options:</p>
<blockquote>
<div><dl class="docutils">
<dt>off</dt>
<dd>Don’t initialize and use any kind of IOMMU.</dd>
<dt>noforce</dt>
<dd>Don’t force hardware IOMMU usage when it is not needed. (default).</dd>
<dt>force</dt>
<dd>Force the use of the hardware IOMMU even when it is
not actually needed (e.g. because &lt; 3 GB memory).</dd>
<dt>soft</dt>
<dd>Use software bounce buffering (SWIOTLB) (default for
Intel machines). This can be used to prevent the usage
of an available hardware IOMMU.</dd>
</dl>
</div></blockquote>
<p>iommu options only relevant to the AMD GART hardware IOMMU:</p>
<blockquote>
<div><dl class="docutils">
<dt>&lt;size&gt;</dt>
<dd>Set the size of the remapping area in bytes.</dd>
<dt>allowed</dt>
<dd>Overwrite iommu off workarounds for specific chipsets.</dd>
<dt>fullflush</dt>
<dd>Flush IOMMU on each allocation (default).</dd>
<dt>nofullflush</dt>
<dd>Don’t use IOMMU fullflush.</dd>
<dt>memaper[=&lt;order&gt;]</dt>
<dd>Allocate an own aperture over RAM with size 32MB&lt;&lt;order.
(default: order=1, i.e. 64MB)</dd>
<dt>merge</dt>
<dd>Do scatter-gather (SG) merging. Implies “force” (experimental).</dd>
<dt>nomerge</dt>
<dd>Don’t do scatter-gather (SG) merging.</dd>
<dt>noaperture</dt>
<dd>Ask the IOMMU not to touch the aperture for AGP.</dd>
<dt>noagp</dt>
<dd>Don’t initialize the AGP driver and use full aperture.</dd>
<dt>panic</dt>
<dd>Always panic when IOMMU overflows.</dd>
<dt>calgary</dt>
<dd>Use the Calgary IOMMU if it is available</dd>
</dl>
</div></blockquote>
<p>iommu options only relevant to the software bounce buffering (SWIOTLB) IOMMU
implementation:</p>
<blockquote>
<div><dl class="docutils">
<dt>swiotlb=&lt;pages&gt;[,force]</dt>
<dd><dl class="first last docutils">
<dt>&lt;pages&gt;</dt>
<dd>Prereserve that many 128K pages for the software IO bounce buffering.</dd>
<dt>force</dt>
<dd>Force all IO through the software TLB.</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>Settings for the IBM Calgary hardware IOMMU currently found in IBM
pSeries and xSeries machines</p>
<blockquote>
<div><dl class="docutils">
<dt>calgary=[64k,128k,256k,512k,1M,2M,4M,8M]</dt>
<dd>Set the size of each PCI slot’s translation table when using the
Calgary IOMMU. This is the size of the translation table itself
in main memory. The smallest table, 64k, covers an IO space of
32MB; the largest, 8MB table, can cover an IO space of 4GB.
Normally the kernel will make the right choice by itself.</dd>
<dt>calgary=[translate_empty_slots]</dt>
<dd>Enable translation even on slots that have no devices attached to
them, in case a device will be hotplugged in the future.</dd>
<dt>calgary=[disable=&lt;PCI bus number&gt;]</dt>
<dd>Disable translation on a given PHB. For
example, the built-in graphics adapter resides on the first bridge
(PCI bus number 0); if translation (isolation) is enabled on this
bridge, X servers that access the hardware directly from user
space might stop working. Use this option if you have devices that
are accessed from userspace directly on some PCI host bridge.</dd>
<dt>panic</dt>
<dd>Always panic when IOMMU overflows</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="miscellaneous">
<h2>22.1.11. Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>nogbpages</dt>
<dd>Do not use GB pages for kernel direct mappings.</dd>
<dt>gbpages</dt>
<dd>Use GB pages for kernel direct mappings.</dd>
</dl>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>