

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>S3C24XX USB Host support &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>S3C24XX USB Host support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/arm/samsung-s3c24xx/usb-host.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="s3c24xx-usb-host-support">
<h1>S3C24XX USB Host support<a class="headerlink" href="#s3c24xx-usb-host-support" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This document details the S3C2410/S3C2440 in-built OHCI USB host support.</div></blockquote>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Enable at least the following kernel options:</p>
<p>menuconfig:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Device Drivers  ---&gt;
  USB support  ---&gt;
    &lt;*&gt; Support for Host-side USB
    &lt;*&gt;   OHCI HCD support
</pre></div>
</div>
<p>.config:</p>
<blockquote>
<div><ul class="simple">
<li>CONFIG_USB</li>
<li>CONFIG_USB_OHCI_HCD</li>
</ul>
</div></blockquote>
<p>Once these options are configured, the standard set of USB device
drivers can be configured and used.</p>
</div></blockquote>
</div>
<div class="section" id="board-support">
<h2>Board Support<a class="headerlink" href="#board-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The driver attaches to a platform device, which will need to be
added by the board specific support file in linux/arch/arm/mach-s3c2410,
such as mach-bast.c or mach-smdk2410.c</p>
<p>The platform device’s platform_data field is only needed if the
board implements extra power control or over-current monitoring.</p>
<p>The OHCI driver does not ensure the state of the S3C2410’s MISCCTRL
register, so if both ports are to be used for the host, then it is
the board support file’s responsibility to ensure that the second
port is configured to be connected to the OHCI core.</p>
</div></blockquote>
</div>
<div class="section" id="platform-data">
<h2>Platform Data<a class="headerlink" href="#platform-data" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>See arch/arm/mach-s3c2410/include/mach/usb-control.h for the
descriptions of the platform device data. An implementation
can be found in linux/arch/arm/mach-s3c2410/usb-simtec.c .</p>
<p>The <cite>struct s3c2410_hcd_info</cite> contains a pair of functions
that get called to enable over-current detection, and to
control the port power status.</p>
<p>The ports are numbered 0 and 1.</p>
<dl class="docutils">
<dt>power_control:</dt>
<dd>Called to enable or disable the power on the port.</dd>
<dt>enable_oc:</dt>
<dd>Called to enable or disable the over-current monitoring.
This should claim or release the resources being used to
check the power condition on the port, such as an IRQ.</dd>
<dt>report_oc:</dt>
<dd><p class="first">The OHCI driver fills this field in for the over-current code
to call when there is a change to the over-current state on
an port. The ports argument is a bitmask of 1 bit per port,
with bit X being 1 for an over-current on port X.</p>
<p class="last">The function s3c2410_usb_report_oc() has been provided to
ensure this is called correctly.</p>
</dd>
<dt>port[x]:</dt>
<dd>This is struct describes each port, 0 or 1. The platform driver
should set the flags field of each port to S3C_HCDFLG_USED if
the port is enabled.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="document-author">
<h2>Document Author<a class="headerlink" href="#document-author" title="Permalink to this headline">¶</a></h2>
<p>Ben Dooks, Copyright 2005 Simtec Electronics</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>