

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Device Frequency Scaling &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Device Frequency Scaling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/driver-api/devfreq.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="device-frequency-scaling">
<h1>Device Frequency Scaling<a class="headerlink" href="#device-frequency-scaling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This framework provides a standard kernel interface for Dynamic Voltage and
Frequency Switching on arbitrary devices.</p>
<p>It exposes controls for adjusting frequency through sysfs files which are
similar to the cpufreq subsystem.</p>
<p>Devices for which current usage can be measured can have their frequency
automatically adjusted by governors.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>Device drivers need to initialize a <code class="xref c c-type docutils literal notranslate"><span class="pre">devfreq_profile</span></code> and call the
<a class="reference internal" href="#c.devfreq_add_device" title="devfreq_add_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_add_device()</span></code></a> function to create a <a class="reference internal" href="#c.devfreq" title="devfreq"><code class="xref c c-type docutils literal notranslate"><span class="pre">devfreq</span></code></a> instance.</p>
<dl class="type">
<dt id="c.devfreq_dev_status">
struct <code class="descname">devfreq_dev_status</code><a class="headerlink" href="#c.devfreq_dev_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Data given from devfreq user device to governors. Represents the performance statistics.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_dev_status {
  unsigned long total_time;
  unsigned long busy_time;
  unsigned long current_frequency;
  void *private_data;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">total_time</span></code></dt>
<dd>The total time represented by this instance of
devfreq_dev_status</dd>
<dt><code class="docutils literal notranslate"><span class="pre">busy_time</span></code></dt>
<dd>The time that the device was working among the
total_time.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current_frequency</span></code></dt>
<dd>The operating frequency.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">private_data</span></code></dt>
<dd>An entry not specified by the devfreq framework.
A device and a specific governor may have their
own protocol with private_data. However, because
this is governor-specific, a governor using this
will be only compatible with devices aware of it.</dd>
</dl>
<dl class="type">
<dt id="c.devfreq_dev_profile">
struct <code class="descname">devfreq_dev_profile</code><a class="headerlink" href="#c.devfreq_dev_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Devfreq’s user device profile</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_dev_profile {
  unsigned long initial_freq;
  unsigned int polling_ms;
  int (*target)(struct device *dev, unsigned long *freq, u32 flags);
  int (*get_dev_status)(struct device *dev, struct devfreq_dev_status *stat);
  int (*get_cur_freq)(struct device *dev, unsigned long *freq);
  void (*exit)(struct device *dev);
  unsigned long *freq_table;
  unsigned int max_state;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">initial_freq</span></code></dt>
<dd>The operating frequency when <a class="reference internal" href="#c.devfreq_add_device" title="devfreq_add_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_add_device()</span></code></a> is
called.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">polling_ms</span></code></dt>
<dd>The polling interval in ms. 0 disables polling.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">target</span></code></dt>
<dd>The device should set its operating frequency at
freq or lowest-upper-than-freq value. If freq is
higher than any operable frequency, set maximum.
Before returning, target function should set
freq at the current frequency.
The “flags” parameter’s possible values are
explained above with “DEVFREQ_FLAG_*” macros.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_dev_status</span></code></dt>
<dd>The device should provide the current performance
status to devfreq. Governors are recommended not to
use this directly. Instead, governors are recommended
to use devfreq_update_stats() along with
devfreq.last_status.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_cur_freq</span></code></dt>
<dd>The device should provide the current frequency
at which it is operating.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">exit</span></code></dt>
<dd>An optional callback that is called when devfreq
is removing the devfreq object due to error or
from <a class="reference internal" href="#c.devfreq_remove_device" title="devfreq_remove_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_remove_device()</span></code></a> call. If the user
has registered devfreq-&gt;nb at a notifier-head,
this is the time to unregister it.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">freq_table</span></code></dt>
<dd>Optional list of frequencies to support statistics
and freq_table must be generated in ascending order.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_state</span></code></dt>
<dd>The size of freq_table.</dd>
</dl>
<dl class="type">
<dt id="c.devfreq_stats">
struct <code class="descname">devfreq_stats</code><a class="headerlink" href="#c.devfreq_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Statistics of devfreq device behavior</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_stats {
  unsigned int total_trans;
  unsigned int *trans_table;
  u64 *time_in_state;
  u64 last_update;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">total_trans</span></code></dt>
<dd>Number of devfreq transitions.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trans_table</span></code></dt>
<dd>Statistics of devfreq transitions.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time_in_state</span></code></dt>
<dd>Statistics of devfreq states.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_update</span></code></dt>
<dd>The last time stats were updated.</dd>
</dl>
<dl class="type">
<dt id="c.devfreq">
struct <code class="descname">devfreq</code><a class="headerlink" href="#c.devfreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Device devfreq structure</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq {
  struct list_head node;
  struct mutex lock;
  struct device dev;
  struct devfreq_dev_profile *profile;
  const struct devfreq_governor *governor;
  char governor_name[DEVFREQ_NAME_LEN];
  struct notifier_block nb;
  struct delayed_work work;
  unsigned long previous_freq;
  struct devfreq_dev_status last_status;
  void *data;
  struct dev_pm_qos_request user_min_freq_req;
  struct dev_pm_qos_request user_max_freq_req;
  unsigned long scaling_min_freq;
  unsigned long scaling_max_freq;
  bool stop_polling;
  unsigned long suspend_freq;
  unsigned long resume_freq;
  atomic_t suspend_count;
  struct devfreq_stats stats;
  struct srcu_notifier_head transition_notifier_list;
  struct notifier_block nb_min;
  struct notifier_block nb_max;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt>
<dd>list node - contains the devices with devfreq that have been
registered.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt>
<dd>a mutex to protect accessing devfreq.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>device registered by devfreq class. dev.parent is the device
using devfreq.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">profile</span></code></dt>
<dd>device-specific devfreq profile</dd>
<dt><code class="docutils literal notranslate"><span class="pre">governor</span></code></dt>
<dd>method how to choose frequency based on the usage.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">governor_name</span></code></dt>
<dd>devfreq governor name for use with this devfreq</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nb</span></code></dt>
<dd>notifier block used to notify devfreq object that it should
reevaluate operable frequencies. Devfreq users may use
devfreq.nb to the corresponding register notifier call chain.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">work</span></code></dt>
<dd>delayed work for load monitoring.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">previous_freq</span></code></dt>
<dd>previously configured frequency value.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_status</span></code></dt>
<dd>devfreq user device info, performance statistics</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt>
<dd>Private data of the governor. The devfreq framework does not
touch this.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_min_freq_req</span></code></dt>
<dd>PM QoS minimum frequency request from user (via sysfs)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_max_freq_req</span></code></dt>
<dd>PM QoS maximum frequency request from user (via sysfs)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scaling_min_freq</span></code></dt>
<dd>Limit minimum frequency requested by OPP interface</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scaling_max_freq</span></code></dt>
<dd>Limit maximum frequency requested by OPP interface</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stop_polling</span></code></dt>
<dd>devfreq polling status of a device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suspend_freq</span></code></dt>
<dd>frequency of a device set during suspend phase.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resume_freq</span></code></dt>
<dd>frequency of a device set in resume phase.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suspend_count</span></code></dt>
<dd>suspend requests counter for a device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stats</span></code></dt>
<dd>Statistics of devfreq device behavior</dd>
<dt><code class="docutils literal notranslate"><span class="pre">transition_notifier_list</span></code></dt>
<dd>list head of DEVFREQ_TRANSITION_NOTIFIER notifier</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nb_min</span></code></dt>
<dd>Notifier block for DEV_PM_QOS_MIN_FREQUENCY</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nb_max</span></code></dt>
<dd>Notifier block for DEV_PM_QOS_MAX_FREQUENCY</dd>
</dl>
<p><strong>Description</strong></p>
<p>This structure stores the devfreq information for a given device.</p>
<p>Note that when a governor accesses entries in struct devfreq in its
functions except for the context of callbacks defined in struct
devfreq_governor, the governor should protect its access with the
struct mutex lock in struct devfreq. A governor may use this mutex
to protect its own private data in void <a href="#id1"><span class="problematic" id="id2">*</span></a>data as well.</p>
<dl class="function">
<dt id="c.update_devfreq">
int <code class="descname">update_devfreq</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.update_devfreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Reevaluate the device and configure frequency</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq device</dd>
</dl>
<p><strong>Note</strong></p>
<p>devfreq-&gt;lock must be held</p>
<dl class="type">
<dt id="c.devfreq_simple_ondemand_data">
struct <code class="descname">devfreq_simple_ondemand_data</code><a class="headerlink" href="#c.devfreq_simple_ondemand_data" title="Permalink to this definition">¶</a></dt>
<dd><p>void <a href="#id3"><span class="problematic" id="id4">*</span></a>data fed to struct devfreq and devfreq_add_device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_simple_ondemand_data {
  unsigned int upthreshold;
  unsigned int downdifferential;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">upthreshold</span></code></dt>
<dd>If the load is over this value, the frequency jumps.
Specify 0 to use the default. Valid value = 0 to 100.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">downdifferential</span></code></dt>
<dd>If the load is under upthreshold - downdifferential,
the governor may consider slowing the frequency down.
Specify 0 to use the default. Valid value = 0 to 100.
downdifferential &lt; upthreshold must hold.</dd>
</dl>
<p><strong>Description</strong></p>
<p>If the fed devfreq_simple_ondemand_data pointer is NULL to the governor,
the governor uses the default values.</p>
<dl class="type">
<dt id="c.devfreq_passive_data">
struct <code class="descname">devfreq_passive_data</code><a class="headerlink" href="#c.devfreq_passive_data" title="Permalink to this definition">¶</a></dt>
<dd><p>void <a href="#id5"><span class="problematic" id="id6">*</span></a>data fed to struct devfreq and devfreq_add_device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_passive_data {
  struct devfreq *parent;
  int (*get_target_freq)(struct devfreq *this, unsigned long *freq);
  struct devfreq *this;
  struct notifier_block nb;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">parent</span></code></dt>
<dd>the devfreq instance of parent device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_target_freq</span></code></dt>
<dd>Optional callback, Returns desired operating frequency
for the device using passive governor. That is called
when passive governor should decide the next frequency
by using the new frequency of parent devfreq device
using governors except for passive governor.
If the devfreq device has the specific method to decide
the next frequency, should use this callback.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">this</span></code></dt>
<dd>the devfreq instance of own device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nb</span></code></dt>
<dd>the notifier block for DEVFREQ_TRANSITION_NOTIFIER list</dd>
</dl>
<p><strong>Description</strong></p>
<p>The devfreq_passive_data have to set the devfreq instance of parent
device with governors except for the passive governor. But, don’t need to
initialize the ‘this’ and ‘nb’ field because the devfreq core will handle
them.</p>
<dl class="type">
<dt id="c.devfreq_event_dev">
struct <code class="descname">devfreq_event_dev</code><a class="headerlink" href="#c.devfreq_event_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>the devfreq-event device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_event_dev {
  struct list_head node;
  struct device dev;
  struct mutex lock;
  u32 enable_count;
  const struct devfreq_event_desc *desc;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt>
<dd>Contain the devfreq-event device that have been registered.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>the device registered by devfreq-event class. dev.parent is
the device using devfreq-event.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt>
<dd>a mutex to protect accessing devfreq-event.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enable_count</span></code></dt>
<dd>the number of enable function have been called.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">desc</span></code></dt>
<dd>the description for devfreq-event device.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This structure contains devfreq-event device information.</p>
<dl class="type">
<dt id="c.devfreq_event_data">
struct <code class="descname">devfreq_event_data</code><a class="headerlink" href="#c.devfreq_event_data" title="Permalink to this definition">¶</a></dt>
<dd><p>the devfreq-event data</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_event_data {
  unsigned long load_count;
  unsigned long total_count;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">load_count</span></code></dt>
<dd>load count of devfreq-event device for the given period.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">total_count</span></code></dt>
<dd>total count of devfreq-event device for the given period.
each count may represent a clock cycle, a time unit
(ns/us/…), or anything the device driver wants.
Generally, utilization is load_count / total_count.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This structure contains the data of devfreq-event device for polling period.</p>
<dl class="type">
<dt id="c.devfreq_event_ops">
struct <code class="descname">devfreq_event_ops</code><a class="headerlink" href="#c.devfreq_event_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>the operations of devfreq-event device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_event_ops {
  int (*enable)(struct devfreq_event_dev *edev);
  int (*disable)(struct devfreq_event_dev *edev);
  int (*reset)(struct devfreq_event_dev *edev);
  int (*set_event)(struct devfreq_event_dev *edev);
  int (*get_event)(struct devfreq_event_dev *edev, struct devfreq_event_data *edata);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">enable</span></code></dt>
<dd>Enable the devfreq-event device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable</span></code></dt>
<dd>Disable the devfreq-event device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reset</span></code></dt>
<dd>Reset all setting of the devfreq-event device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_event</span></code></dt>
<dd>Set the specific event type for the devfreq-event device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_event</span></code></dt>
<dd>Get the result of the devfreq-event devie with specific
event type.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This structure contains devfreq-event device operations which can be
implemented by devfreq-event device drivers.</p>
<dl class="type">
<dt id="c.devfreq_event_desc">
struct <code class="descname">devfreq_event_desc</code><a class="headerlink" href="#c.devfreq_event_desc" title="Permalink to this definition">¶</a></dt>
<dd><p>the descriptor of devfreq-event device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct devfreq_event_desc {
  const char *name;
  u32 event_type;
  void *driver_data;
  const struct devfreq_event_ops *ops;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt>
<dd>the name of devfreq-event device.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event_type</span></code></dt>
<dd>the type of the event determined and used by driver</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver_data</span></code></dt>
<dd>the private data for devfreq-event driver.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt>
<dd>the operation to control devfreq-event device.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Each devfreq-event device is described with a this structure.
This structure contains the various data for devfreq-event device.
The event_type describes what is going to be counted in the register.
It might choose to count e.g. read requests, write data in bytes, etc.
The full supported list of types is present in specyfic header in:
include/dt-bindings/pmu/.</p>
<dl class="function">
<dt id="c.devfreq_update_status">
int <code class="descname">devfreq_update_status</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em>, unsigned long<em>&nbsp;freq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_update_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Update statistics of devfreq behavior</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">freq</span></code></dt>
<dd>the update target frequency</dd>
</dl>
<dl class="function">
<dt>
int <code class="descname">update_devfreq</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span></dt>
<dd><p>Reevaluate the device and configure frequency.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
</dl>
<p><strong>Note</strong></p>
<dl class="docutils">
<dt>Lock devfreq-&gt;lock before calling update_devfreq</dt>
<dd>This function is exported for governors.</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_monitor_start">
void <code class="descname">devfreq_monitor_start</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_monitor_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start load monitoring of devfreq instance</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper function for starting devfreq device load monitoring. By
default delayed work based monitoring is supported. Function
to be called from governor in response to DEVFREQ_GOV_START
event when device is added to devfreq framework.</p>
<dl class="function">
<dt id="c.devfreq_monitor_stop">
void <code class="descname">devfreq_monitor_stop</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_monitor_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop load monitoring of a devfreq instance</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper function to stop devfreq device load monitoring. Function
to be called from governor in response to DEVFREQ_GOV_STOP
event when device is removed from devfreq framework.</p>
<dl class="function">
<dt id="c.devfreq_monitor_suspend">
void <code class="descname">devfreq_monitor_suspend</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_monitor_suspend" title="Permalink to this definition">¶</a></dt>
<dd><p>Suspend load monitoring of a devfreq instance</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper function to suspend devfreq device load monitoring. Function
to be called from governor in response to DEVFREQ_GOV_SUSPEND
event or when polling interval is set to zero.</p>
<p><strong>Note</strong></p>
<p>Though this function is same as <a class="reference internal" href="#c.devfreq_monitor_stop" title="devfreq_monitor_stop"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_monitor_stop()</span></code></a>,
intentionally kept separate to provide hooks for collecting
transition statistics.</p>
<dl class="function">
<dt id="c.devfreq_monitor_resume">
void <code class="descname">devfreq_monitor_resume</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_monitor_resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Resume load monitoring of a devfreq instance</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper function to resume devfreq device load monitoring. Function
to be called from governor in response to DEVFREQ_GOV_RESUME
event or when polling interval is set to non-zero.</p>
<dl class="function">
<dt id="c.devfreq_interval_update">
void <code class="descname">devfreq_interval_update</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em>, unsigned int *<em>&nbsp;delay</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_interval_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update device devfreq monitoring interval</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">*</span> <span class="pre">delay</span></code></dt>
<dd>new polling interval to be set.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper function to set new load monitoring polling interval. Function
to be called from governor in response to DEVFREQ_GOV_INTERVAL event.</p>
<dl class="function">
<dt id="c.devfreq_add_device">
struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> * <code class="descname">devfreq_add_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq_dev_profile" title="devfreq_dev_profile">devfreq_dev_profile</a> *<em>&nbsp;profile</em>, const char *<em>&nbsp;governor_name</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_add_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Add devfreq feature to the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device to add devfreq feature.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_dev_profile</span> <span class="pre">*</span> <span class="pre">profile</span></code></dt>
<dd>device-specific profile to run devfreq.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">governor_name</span></code></dt>
<dd>name of the policy to choose frequency.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>private data for the governor. The devfreq framework does not
touch this value.</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_remove_device">
int <code class="descname">devfreq_remove_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_remove_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove devfreq feature from a device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance to be removed</dd>
</dl>
<p><strong>Description</strong></p>
<p>The opposite of <a class="reference internal" href="#c.devfreq_add_device" title="devfreq_add_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_add_device()</span></code></a>.</p>
<dl class="function">
<dt id="c.devm_devfreq_add_device">
struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> * <code class="descname">devm_devfreq_add_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq_dev_profile" title="devfreq_dev_profile">devfreq_dev_profile</a> *<em>&nbsp;profile</em>, const char *<em>&nbsp;governor_name</em>, void *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_add_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_add_device" title="devfreq_add_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_add_device()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device to add devfreq feature.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_dev_profile</span> <span class="pre">*</span> <span class="pre">profile</span></code></dt>
<dd>device-specific profile to run devfreq.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">governor_name</span></code></dt>
<dd>name of the policy to choose frequency.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>private data for the governor. The devfreq framework does not
touch this value.</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function manages automatically the memory of devfreq device using device
resource management and simplify the free operation for memory of devfreq
device.</p>
<dl class="function">
<dt id="c.devm_devfreq_remove_device">
void <code class="descname">devm_devfreq_remove_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_remove_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_remove_device" title="devfreq_remove_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_remove_device()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device from which to remove devfreq feature.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance to be removed</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_suspend_device">
int <code class="descname">devfreq_suspend_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_suspend_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Suspend devfreq of a device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance to be suspended</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is intended to be called by the pm callbacks
(e.g., runtime_suspend, suspend) of the device driver that
holds the devfreq.</p>
<dl class="function">
<dt id="c.devfreq_resume_device">
int <code class="descname">devfreq_resume_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_resume_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Resume devfreq of a device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>the devfreq instance to be resumed</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is intended to be called by the pm callbacks
(e.g., runtime_resume, resume) of the device driver that
holds the devfreq.</p>
<dl class="function">
<dt id="c.devfreq_add_governor">
int <code class="descname">devfreq_add_governor</code><span class="sig-paren">(</span>struct devfreq_governor *<em>&nbsp;governor</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_add_governor" title="Permalink to this definition">¶</a></dt>
<dd><p>Add devfreq governor</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_governor</span> <span class="pre">*</span> <span class="pre">governor</span></code></dt>
<dd>the devfreq governor to be added</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_remove_governor">
int <code class="descname">devfreq_remove_governor</code><span class="sig-paren">(</span>struct devfreq_governor *<em>&nbsp;governor</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_remove_governor" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove devfreq feature from a device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_governor</span> <span class="pre">*</span> <span class="pre">governor</span></code></dt>
<dd>the devfreq governor to be removed</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_recommended_opp">
struct dev_pm_opp * <code class="descname">devfreq_recommended_opp</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, unsigned long *<em>&nbsp;freq</em>, u32<em>&nbsp;flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_recommended_opp" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to get proper OPP for the freq value given to target callback.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">*</span> <span class="pre">freq</span></code></dt>
<dd>The frequency given to target function</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">flags</span></code></dt>
<dd>Flags handed from devfreq framework.</dd>
</dl>
<p><strong>Description</strong></p>
<p>The callers are required to call dev_pm_opp_put() for the returned OPP after
use.</p>
<dl class="function">
<dt id="c.devfreq_register_opp_notifier">
int <code class="descname">devfreq_register_opp_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_register_opp_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to get devfreq notified for any changes in the OPP availability changes</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_unregister_opp_notifier">
int <code class="descname">devfreq_unregister_opp_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_unregister_opp_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to stop getting devfreq notified for any changes in the OPP availability changes anymore.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
</dl>
<p><strong>Description</strong></p>
<p>At exit() callback of devfreq_dev_profile, this must be included if
devfreq_recommended_opp is used.</p>
<dl class="function">
<dt id="c.devm_devfreq_register_opp_notifier">
int <code class="descname">devm_devfreq_register_opp_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_register_opp_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_register_opp_notifier" title="devfreq_register_opp_notifier"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_register_opp_notifier()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
</dl>
<dl class="function">
<dt id="c.devm_devfreq_unregister_opp_notifier">
void <code class="descname">devm_devfreq_unregister_opp_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_unregister_opp_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_unregister_opp_notifier" title="devfreq_unregister_opp_notifier"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_unregister_opp_notifier()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
</dl>
<dl class="function">
<dt id="c.devfreq_register_notifier">
int <code class="descname">devfreq_register_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em>, struct notifier_block *<em>&nbsp;nb</em>, unsigned int<em>&nbsp;list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_register_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a driver with devfreq</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">notifier_block</span> <span class="pre">*</span> <span class="pre">nb</span></code></dt>
<dd>The notifier block to register.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">list</span></code></dt>
<dd>DEVFREQ_TRANSITION_NOTIFIER.</dd>
</dl>
<dl class="function">
<dt id="c.devm_devfreq_register_notifier">
int <code class="descname">devm_devfreq_register_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em>, struct notifier_block *<em>&nbsp;nb</em>, unsigned int<em>&nbsp;list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_register_notifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">notifier_block</span> <span class="pre">*</span> <span class="pre">nb</span></code></dt>
<dd>The notifier block to be unregistered.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">list</span></code></dt>
<dd>DEVFREQ_TRANSITION_NOTIFIER.</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><ul class="simple">
<li>Resource-managed <a class="reference internal" href="#c.devfreq_register_notifier" title="devfreq_register_notifier"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_register_notifier()</span></code></a></li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="c.devm_devfreq_unregister_notifier">
void <code class="descname">devm_devfreq_unregister_notifier</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq" title="devfreq">devfreq</a> *<em>&nbsp;devfreq</em>, struct notifier_block *<em>&nbsp;nb</em>, unsigned int<em>&nbsp;list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_unregister_notifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>The devfreq user device. (parent of devfreq)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq</span> <span class="pre">*</span> <span class="pre">devfreq</span></code></dt>
<dd>The devfreq object.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">notifier_block</span> <span class="pre">*</span> <span class="pre">nb</span></code></dt>
<dd>The notifier block to be unregistered.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">list</span></code></dt>
<dd>DEVFREQ_TRANSITION_NOTIFIER.</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><ul class="simple">
<li>Resource-managed devfreq_unregister_notifier()</li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="c.devfreq_event_enable_edev">
int <code class="descname">devfreq_event_enable_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_enable_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable the devfreq-event dev and increase the enable_count of devfreq-event dev.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function increase the enable_count and enable the
devfreq-event device. The devfreq-event device should be enabled before
using it by devfreq device.</p>
<dl class="function">
<dt id="c.devfreq_event_disable_edev">
int <code class="descname">devfreq_event_disable_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_disable_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable the devfreq-event dev and decrease the enable_count of the devfreq-event dev.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function decrease the enable_count and disable the
devfreq-event device. After the devfreq-event device is disabled,
devfreq device can’t use the devfreq-event device for get/set/reset
operations.</p>
<dl class="function">
<dt id="c.devfreq_event_is_enabled">
bool <code class="descname">devfreq_event_is_enabled</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_is_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether devfreq-event dev is enabled or not.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function check whether devfreq-event dev is enabled or not.
If return true, the devfreq-event dev is enabeld. If return false, the
devfreq-event dev is disabled.</p>
<dl class="function">
<dt id="c.devfreq_event_set_event">
int <code class="descname">devfreq_event_set_event</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_set_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Set event to devfreq-event dev to start.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function set the event to the devfreq-event device to start
for getting the event data which could be various event type.</p>
<dl class="function">
<dt id="c.devfreq_event_get_event">
int <code class="descname">devfreq_event_get_event</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em>, struct <a class="reference internal" href="#c.devfreq_event_data" title="devfreq_event_data">devfreq_event_data</a> *<em>&nbsp;edata</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_get_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Get {load|total}_count from devfreq-event dev.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_data</span> <span class="pre">*</span> <span class="pre">edata</span></code></dt>
<dd>the calculated data of devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function get the calculated event data from devfreq-event dev
after stoping the progress of whole sequence of devfreq-event dev.</p>
<dl class="function">
<dt id="c.devfreq_event_reset_event">
int <code class="descname">devfreq_event_reset_event</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_reset_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all opeations of devfreq-event dev.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function stop all operations of devfreq-event dev and reset
the current event data to make the devfreq-event device into initial state.</p>
<dl class="function">
<dt id="c.devfreq_event_get_edev_by_phandle">
struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> * <code class="descname">devfreq_event_get_edev_by_phandle</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, int<em>&nbsp;index</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_get_edev_by_phandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the devfreq-event dev from devicetree.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the pointer to the given device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt>
<dd>the index into list of devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function return the pointer of devfreq-event device.</p>
<dl class="function">
<dt id="c.devfreq_event_get_edev_count">
int <code class="descname">devfreq_event_get_edev_count</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_get_edev_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the count of devfreq-event dev</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the pointer to the given device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function return the count of devfreq-event devices.</p>
<dl class="function">
<dt id="c.devfreq_event_add_edev">
struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> * <code class="descname">devfreq_event_add_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq_event_desc" title="devfreq_event_desc">devfreq_event_desc</a> *<em>&nbsp;desc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_add_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new devfreq-event device.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device owning the devfreq-event device being created</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_desc</span> <span class="pre">*</span> <span class="pre">desc</span></code></dt>
<dd>the devfreq-event device’s decriptor which include essential
data for devfreq-event device.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function add new devfreq-event device to devfreq-event class
list and register the device of the devfreq-event device.</p>
<dl class="function">
<dt id="c.devfreq_event_remove_edev">
int <code class="descname">devfreq_event_remove_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devfreq_event_remove_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the devfreq-event device registered.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function removes the registered devfreq-event device.</p>
<dl class="function">
<dt id="c.devm_devfreq_event_add_edev">
struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> * <code class="descname">devm_devfreq_event_add_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq_event_desc" title="devfreq_event_desc">devfreq_event_desc</a> *<em>&nbsp;desc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_event_add_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_event_add_edev" title="devfreq_event_add_edev"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_event_add_edev()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device owning the devfreq-event device being created</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_desc</span> <span class="pre">*</span> <span class="pre">desc</span></code></dt>
<dd>the devfreq-event device’s decriptor which include essential
data for devfreq-event device.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function manages automatically the memory of devfreq-event
device using device resource management and simplify the free operation
for memory of devfreq-event device.</p>
<dl class="function">
<dt id="c.devm_devfreq_event_remove_edev">
void <code class="descname">devm_devfreq_event_remove_edev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="infrastructure.html#c.device" title="device">device</a> *<em>&nbsp;dev</em>, struct <a class="reference internal" href="#c.devfreq_event_dev" title="devfreq_event_dev">devfreq_event_dev</a> *<em>&nbsp;edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_devfreq_event_remove_edev" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.devfreq_event_remove_edev" title="devfreq_event_remove_edev"><code class="xref c c-func docutils literal notranslate"><span class="pre">devfreq_event_remove_edev()</span></code></a></p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span> <span class="pre">dev</span></code></dt>
<dd>the device owning the devfreq-event device being created</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">devfreq_event_dev</span> <span class="pre">*</span> <span class="pre">edev</span></code></dt>
<dd>the devfreq-event device</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that this function manages automatically the memory of devfreq-event
device using device resource management.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>