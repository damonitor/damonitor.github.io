

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SMARTPQI - Microsemi Smart PQI Driver &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/mm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>SMARTPQI - Microsemi Smart PQI Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/scsi/smartpqi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="smartpqi-microsemi-smart-pqi-driver">
<h1>SMARTPQI - Microsemi Smart PQI Driver<a class="headerlink" href="#smartpqi-microsemi-smart-pqi-driver" title="Permalink to this headline">¶</a></h1>
<p>This file describes the smartpqi SCSI driver for Microsemi
(<a class="reference external" href="http://www.microsemi.com">http://www.microsemi.com</a>) PQI controllers. The smartpqi driver
is the next generation SCSI driver for Microsemi Corp. The smartpqi
driver is the first SCSI driver to implement the PQI queuing model.</p>
<p>The smartpqi driver will replace the aacraid driver for Adaptec Series 9
controllers. Customers running an older kernel (Pre-4.9) using an Adaptec
Series 9 controller will have to configure the smartpqi driver or their
volumes will not be added to the OS.</p>
<p>For Microsemi smartpqi controller support, enable the smartpqi driver
when configuring the kernel.</p>
<p>For more information on the PQI Queuing Interface, please see:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.t10.org/drafts.htm">http://www.t10.org/drafts.htm</a></li>
<li><a class="reference external" href="http://www.t10.org/members/w_pqi2.htm">http://www.t10.org/members/w_pqi2.htm</a></li>
</ul>
<div class="section" id="supported-devices">
<h2>Supported devices<a class="headerlink" href="#supported-devices" title="Permalink to this headline">¶</a></h2>
<p>&lt;Controller names to be added as they become publicly available.&gt;</p>
</div>
<div class="section" id="smartpqi-specific-entries-in-sys">
<h2>smartpqi specific entries in /sys<a class="headerlink" href="#smartpqi-specific-entries-in-sys" title="Permalink to this headline">¶</a></h2>
<div class="section" id="smartpqi-host-attributes">
<h3>smartpqi host attributes<a class="headerlink" href="#smartpqi-host-attributes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>/sys/class/scsi_host/host*/rescan</li>
<li>/sys/class/scsi_host/host*/driver_version</li>
</ul>
<p>The host rescan attribute is a write only attribute. Writing to this
attribute will trigger the driver to scan for new, changed, or removed
devices and notify the SCSI mid-layer of any changes detected.</p>
<p>The version attribute is read-only and will return the driver version
and the controller firmware version.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>driver: 0.9.13-370
firmware: 0.01-522
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="smartpqi-sas-device-attributes">
<h3>smartpqi sas device attributes<a class="headerlink" href="#smartpqi-sas-device-attributes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>HBA devices are added to the SAS transport layer. These attributes are
automatically added by the SAS transport layer.</p>
<p>/sys/class/sas_device/end_device-X:X/sas_address
/sys/class/sas_device/end_device-X:X/enclosure_identifier
/sys/class/sas_device/end_device-X:X/scsi_target_id</p>
</div></blockquote>
</div>
</div>
<div class="section" id="smartpqi-specific-ioctls">
<h2>smartpqi specific ioctls<a class="headerlink" href="#smartpqi-specific-ioctls" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>For compatibility with applications written for the cciss protocol.</p>
<dl class="docutils">
<dt>CCISS_DEREGDISK, CCISS_REGNEWDISK, CCISS_REGNEWD</dt>
<dd>The above three ioctls all do exactly the same thing, which is to cause the driver
to rescan for new devices.  This does exactly the same thing as writing to the
smartpqi specific host “rescan” attribute.</dd>
<dt>CCISS_GETPCIINFO</dt>
<dd>Returns PCI domain, bus, device and function and “board ID” (PCI subsystem ID).</dd>
<dt>CCISS_GETDRIVVER</dt>
<dd><p class="first">Returns driver version in three bytes encoded as:</p>
<div class="last highlight-none notranslate"><div class="highlight"><pre><span></span>(DRIVER_MAJOR &lt;&lt; 28) | (DRIVER_MINOR &lt;&lt; 24) | (DRIVER_RELEASE &lt;&lt; 16) | DRIVER_REVISION;
</pre></div>
</div>
</dd>
<dt>CCISS_PASSTHRU</dt>
<dd>Allows “BMIC” and “CISS” commands to be passed through to the Smart Storage Array.
These are used extensively by the SSA Array Configuration Utility, SNMP storage
agents, etc.</dd>
</dl>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>