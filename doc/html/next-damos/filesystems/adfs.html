

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Acorn Disc Filing System - ADFS &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Acorn Disc Filing System - ADFS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/filesystems/adfs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="acorn-disc-filing-system-adfs">
<h1>Acorn Disc Filing System - ADFS<a class="headerlink" href="#acorn-disc-filing-system-adfs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="filesystems-supported-by-adfs">
<h2>Filesystems supported by ADFS<a class="headerlink" href="#filesystems-supported-by-adfs" title="Permalink to this headline">¶</a></h2>
<p>The ADFS module supports the following Filecore formats which have:</p>
<ul class="simple">
<li>new maps</li>
<li>new directories or big directories</li>
</ul>
<p>In terms of the named formats, this means we support:</p>
<ul class="simple">
<li>E and E+, with or without boot block</li>
<li>F and F+</li>
</ul>
<p>We fully support reading files from these filesystems, and writing to
existing files within their existing allocation.  Essentially, we do
not support changing any of the filesystem metadata.</p>
<p>This is intended to support loopback mounted Linux native filesystems
on a RISC OS Filecore filesystem, but will allow the data within files
to be changed.</p>
<p>If write support (ADFS_FS_RW) is configured, we allow rudimentary
directory updates, specifically updating the access mode and timestamp.</p>
</div>
<div class="section" id="mount-options-for-adfs">
<h2>Mount options for ADFS<a class="headerlink" href="#mount-options-for-adfs" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>uid=nnn</td>
<td>All files in the partition will be owned by
user id nnn.  Default 0 (root).</td>
</tr>
<tr class="row-even"><td>gid=nnn</td>
<td>All files in the partition will be in group
nnn.  Default 0 (root).</td>
</tr>
<tr class="row-odd"><td>ownmask=nnn</td>
<td>The permission mask for ADFS ‘owner’ permissions
will be nnn.  Default 0700.</td>
</tr>
<tr class="row-even"><td>othmask=nnn</td>
<td>The permission mask for ADFS ‘other’ permissions
will be nnn.  Default 0077.</td>
</tr>
<tr class="row-odd"><td>ftsuffix=n</td>
<td>When ftsuffix=0, no file type suffix will be applied.
When ftsuffix=1, a hexadecimal suffix corresponding to
the RISC OS file type will be added.  Default 0.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="mapping-of-adfs-permissions-to-linux-permissions">
<h2>Mapping of ADFS permissions to Linux permissions<a class="headerlink" href="#mapping-of-adfs-permissions-to-linux-permissions" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>ADFS permissions consist of the following:</p>
<blockquote>
<div><ul class="simple">
<li>Owner read</li>
<li>Owner write</li>
<li>Other read</li>
<li>Other write</li>
</ul>
</div></blockquote>
<p>(In older versions, an ‘execute’ permission did exist, but this
does not hold the same meaning as the Linux ‘execute’ permission
and is now obsolete).</p>
<p>The mapping is performed as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    Owner read                              -&gt; -r--r--r--
    Owner write                             -&gt; --w--w---w
    Owner read and filetype UnixExec        -&gt; ---x--x--x
These are then masked by ownmask, eg 700    -&gt; -rwx------
    Possible owner mode permissions         -&gt; -rwx------

    Other read                              -&gt; -r--r--r--
    Other write                             -&gt; --w--w--w-
    Other read and filetype UnixExec        -&gt; ---x--x--x
These are then masked by othmask, eg 077    -&gt; ----rwxrwx
    Possible other mode permissions         -&gt; ----rwxrwx
</pre></div>
</div>
<p>Hence, with the default masks, if a file is owner read/write, and
not a UnixExec filetype, then the permissions will be:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-------
</pre></div>
</div>
<p>However, if the masks were ownmask=0770,othmask=0007, then this would
be modified to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-rw----
</pre></div>
</div>
<p>There is no restriction on what you can do with these masks.  You may
wish that either read bits give read access to the file for all, but
keep the default write protection (ownmask=0755,othmask=0577):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-r--r--
</pre></div>
</div>
<p>You can therefore tailor the permission translation to whatever you
desire the permissions should be under Linux.</p>
</div></blockquote>
</div>
<div class="section" id="risc-os-file-type-suffix">
<h2>RISC OS file type suffix<a class="headerlink" href="#risc-os-file-type-suffix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>RISC OS file types are stored in bits 19..8 of the file load address.</p>
<p>To enable non-RISC OS systems to be used to store files without losing
file type information, a file naming convention was devised (initially
for use with NFS) such that a hexadecimal suffix of the form ,xyz
denoted the file type: e.g. BasicFile,ffb is a BASIC (0xffb) file.  This
naming convention is now also used by RISC OS emulators such as RPCEmu.</p>
<p>Mounting an ADFS disc with option ftsuffix=1 will cause appropriate file
type suffixes to be appended to file names read from a directory.  If the
ftsuffix option is zero or omitted, no file type suffixes will be added.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>