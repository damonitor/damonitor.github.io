

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ACPI Device Tree - Representation of ACPI Namespace &mdash; The Linux Kernel  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/mm/damon/index.html">Monitoring Data Accesses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../vm/damon/index.html">DAMON: Data Access MONitor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>ACPI Device Tree - Representation of ACPI Namespace</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/firmware-guide/acpi/namespace.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="acpi-device-tree-representation-of-acpi-namespace">
<h1>ACPI Device Tree - Representation of ACPI Namespace<a class="headerlink" href="#acpi-device-tree-representation-of-acpi-namespace" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body">© 2013, Intel Corporation</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Lv Zheng &lt;<a class="reference external" href="mailto:lv&#46;zheng&#37;&#52;&#48;intel&#46;com">lv<span>&#46;</span>zheng<span>&#64;</span>intel<span>&#46;</span>com</a>&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Credit:</th><td class="field-body">Thanks for the help from Zhang Rui &lt;<a class="reference external" href="mailto:rui&#46;zhang&#37;&#52;&#48;intel&#46;com">rui<span>&#46;</span>zhang<span>&#64;</span>intel<span>&#46;</span>com</a>&gt; and
Rafael J.Wysocki &lt;<a class="reference external" href="mailto:rafael&#46;j&#46;wysocki&#37;&#52;&#48;intel&#46;com">rafael<span>&#46;</span>j<span>&#46;</span>wysocki<span>&#64;</span>intel<span>&#46;</span>com</a>&gt;.</td>
</tr>
</tbody>
</table>
<div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>The Linux ACPI subsystem converts ACPI namespace objects into a Linux
device tree under the /sys/devices/LNXSYSTEM:00 and updates it upon
receiving ACPI hotplug notification events.  For each device object
in this hierarchy there is a corresponding symbolic link in the
/sys/bus/acpi/devices.</p>
<p>This document illustrates the structure of the ACPI device tree.</p>
</div>
<div class="section" id="acpi-definition-blocks">
<h2>ACPI Definition Blocks<a class="headerlink" href="#acpi-definition-blocks" title="Permalink to this headline">¶</a></h2>
<p>The ACPI firmware sets up RSDP (Root System Description Pointer) in the
system memory address space pointing to the XSDT (Extended System
Description Table).  The XSDT always points to the FADT (Fixed ACPI
Description Table) using its first entry, the data within the FADT
includes various fixed-length entries that describe fixed ACPI features
of the hardware.  The FADT contains a pointer to the DSDT
(Differentiated System Descripition Table).  The XSDT also contains
entries pointing to possibly multiple SSDTs (Secondary System
Description Table).</p>
<p>The DSDT and SSDT data is organized in data structures called definition
blocks that contain definitions of various objects, including ACPI
control methods, encoded in AML (ACPI Machine Language).  The data block
of the DSDT along with the contents of SSDTs represents a hierarchical
data structure called the ACPI namespace whose topology reflects the
structure of the underlying hardware platform.</p>
<p>The relationships between ACPI System Definition Tables described above
are illustrated in the following diagram:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---------+    +-------+    +--------+    +------------------------+
|  RSDP   | +-&gt;| XSDT  | +-&gt;|  FADT  |    |  +-------------------+ |
+---------+ |  +-------+ |  +--------+  +-|-&gt;|       DSDT        | |
| Pointer | |  | Entry |-+  | ...... |  | |  +-------------------+ |
+---------+ |  +-------+    | X_DSDT |--+ |  | Definition Blocks | |
| Pointer |-+  | ..... |    | ...... |    |  +-------------------+ |
+---------+    +-------+    +--------+    |  +-------------------+ |
               | Entry |------------------|-&gt;|       SSDT        | |
               +- - - -+                  |  +-------------------| |
               | Entry | - - - - - - - -+ |  | Definition Blocks | |
               +- - - -+                | |  +-------------------+ |
                                        | |  +- - - - - - - - - -+ |
                                        +-|-&gt;|       SSDT        | |
                                          |  +-------------------+ |
                                          |  | Definition Blocks | |
                                          |  +- - - - - - - - - -+ |
                                          +------------------------+
                                                       |
                                          OSPM Loading |
                                                      \|/
                                                +----------------+
                                                | ACPI Namespace |
                                                +----------------+

               Figure 1. ACPI Definition Blocks
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">RSDP can also contain a pointer to the RSDT (Root System
Description Table).  Platforms provide RSDT to enable
compatibility with ACPI 1.0 operating systems.  The OS is expected
to use XSDT, if present.</p>
</div>
</div>
<div class="section" id="example-acpi-namespace">
<h2>Example ACPI Namespace<a class="headerlink" href="#example-acpi-namespace" title="Permalink to this headline">¶</a></h2>
<p>All definition blocks are loaded into a single namespace.  The namespace
is a hierarchy of objects identified by names and paths.
The following naming conventions apply to object names in the ACPI
namespace:</p>
<blockquote>
<div><ol class="arabic simple">
<li>All names are 32 bits long.</li>
<li>The first byte of a name must be one of ‘A’ - ‘Z’, ‘_’.</li>
<li>Each of the remaining bytes of a name must be one of ‘A’ - ‘Z’, ‘0’
- ‘9’, ‘_’.</li>
<li>Names starting with ‘_’ are reserved by the ACPI specification.</li>
<li>The ‘’ symbol represents the root of the namespace (i.e. names
prepended with ‘’ are relative to the namespace root).</li>
<li>The ‘^’ symbol represents the parent of the current namespace node
(i.e. names prepended with ‘^’ are relative to the parent of the
current namespace node).</li>
</ol>
</div></blockquote>
<p>The figure below shows an example ACPI namespace:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+------+
| \    |                     Root
+------+
  |
  | +------+
  +-| _PR  |                 Scope(_PR): the processor namespace
  | +------+
  |   |
  |   | +------+
  |   +-| CPU0 |             Processor(CPU0): the first processor
  |     +------+
  |
  | +------+
  +-| _SB  |                 Scope(_SB): the system bus namespace
  | +------+
  |   |
  |   | +------+
  |   +-| LID0 |             Device(LID0); the lid device
  |   | +------+
  |   |   |
  |   |   | +------+
  |   |   +-| _HID |         Name(_HID, &quot;PNP0C0D&quot;): the hardware ID
  |   |   | +------+
  |   |   |
  |   |   | +------+
  |   |   +-| _STA |         Method(_STA): the status control method
  |   |     +------+
  |   |
  |   | +------+
  |   +-| PCI0 |             Device(PCI0); the PCI root bridge
  |     +------+
  |       |
  |       | +------+
  |       +-| _HID |         Name(_HID, &quot;PNP0A08&quot;): the hardware ID
  |       | +------+
  |       |
  |       | +------+
  |       +-| _CID |         Name(_CID, &quot;PNP0A03&quot;): the compatible ID
  |       | +------+
  |       |
  |       | +------+
  |       +-| RP03 |         Scope(RP03): the PCI0 power scope
  |       | +------+
  |       |   |
  |       |   | +------+
  |       |   +-| PXP3 |     PowerResource(PXP3): the PCI0 power resource
  |       |     +------+
  |       |
  |       | +------+
  |       +-| GFX0 |         Device(GFX0): the graphics adapter
  |         +------+
  |           |
  |           | +------+
  |           +-| _ADR |     Name(_ADR, 0x00020000): the PCI bus address
  |           | +------+
  |           |
  |           | +------+
  |           +-| DD01 |     Device(DD01): the LCD output device
  |             +------+
  |               |
  |               | +------+
  |               +-| _BCL | Method(_BCL): the backlight control method
  |                 +------+
  |
  | +------+
  +-| _TZ  |                 Scope(_TZ): the thermal zone namespace
  | +------+
  |   |
  |   | +------+
  |   +-| FN00 |             PowerResource(FN00): the FAN0 power resource
  |   | +------+
  |   |
  |   | +------+
  |   +-| FAN0 |             Device(FAN0): the FAN0 cooling device
  |   | +------+
  |   |   |
  |   |   | +------+
  |   |   +-| _HID |         Name(_HID, &quot;PNP0A0B&quot;): the hardware ID
  |   |     +------+
  |   |
  |   | +------+
  |   +-| TZ00 |             ThermalZone(TZ00); the FAN thermal zone
  |     +------+
  |
  | +------+
  +-| _GPE |                 Scope(_GPE): the GPE namespace
    +------+

                  Figure 2. Example ACPI Namespace
</pre></div>
</div>
</div>
<div class="section" id="linux-acpi-device-objects">
<h2>Linux ACPI Device Objects<a class="headerlink" href="#linux-acpi-device-objects" title="Permalink to this headline">¶</a></h2>
<p>The Linux kernel’s core ACPI subsystem creates struct acpi_device
objects for ACPI namespace objects representing devices, power resources
processors, thermal zones.  Those objects are exported to user space via
sysfs as directories in the subtree under /sys/devices/LNXSYSTM:00.  The
format of their names is &lt;bus_id:instance&gt;, where ‘bus_id’ refers to the
ACPI namespace representation of the given object and ‘instance’ is used
for distinguishing different object of the same ‘bus_id’ (it is
two-digit decimal representation of an unsigned integer).</p>
<p>The value of ‘bus_id’ depends on the type of the object whose name it is
part of as listed in the table below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---+-----------------+-------+----------+
|   | Object/Feature  | Table | bus_id   |
+---+-----------------+-------+----------+
| N | Root            | xSDT  | LNXSYSTM |
+---+-----------------+-------+----------+
| N | Device          | xSDT  | _HID     |
+---+-----------------+-------+----------+
| N | Processor       | xSDT  | LNXCPU   |
+---+-----------------+-------+----------+
| N | ThermalZone     | xSDT  | LNXTHERM |
+---+-----------------+-------+----------+
| N | PowerResource   | xSDT  | LNXPOWER |
+---+-----------------+-------+----------+
| N | Other Devices   | xSDT  | device   |
+---+-----------------+-------+----------+
| F | PWR_BUTTON      | FADT  | LNXPWRBN |
+---+-----------------+-------+----------+
| F | SLP_BUTTON      | FADT  | LNXSLPBN |
+---+-----------------+-------+----------+
| M | Video Extension | xSDT  | LNXVIDEO |
+---+-----------------+-------+----------+
| M | ATA Controller  | xSDT  | LNXIOBAY |
+---+-----------------+-------+----------+
| M | Docking Station | xSDT  | LNXDOCK  |
+---+-----------------+-------+----------+

 Table 1. ACPI Namespace Objects Mapping
</pre></div>
</div>
<p>The following rules apply when creating struct acpi_device objects on
the basis of the contents of ACPI System Description Tables (as
indicated by the letter in the first column and the notation in the
second column of the table above):</p>
<blockquote>
<div><dl class="docutils">
<dt>N:</dt>
<dd>The object’s source is an ACPI namespace node (as indicated by the
named object’s type in the second column).  In that case the object’s
directory in sysfs will contain the ‘path’ attribute whose value is
the full path to the node from the namespace root.</dd>
<dt>F:</dt>
<dd>The struct acpi_device object is created for a fixed hardware
feature (as indicated by the fixed feature flag’s name in the second
column), so its sysfs directory will not contain the ‘path’
attribute.</dd>
<dt>M:</dt>
<dd>The struct acpi_device object is created for an ACPI namespace node
with specific control methods (as indicated by the ACPI defined
device’s type in the second column).  The ‘path’ attribute containing
its namespace path will be present in its sysfs directory.  For
example, if the _BCL method is present for an ACPI namespace node, a
struct acpi_device object with LNXVIDEO ‘bus_id’ will be created for
it.</dd>
</dl>
</div></blockquote>
<p>The third column of the above table indicates which ACPI System
Description Tables contain information used for the creation of the
struct acpi_device objects represented by the given row (xSDT means DSDT
or SSDT).</p>
<p>The fourth column of the above table indicates the ‘bus_id’ generation
rule of the struct acpi_device object:</p>
<blockquote>
<div><dl class="docutils">
<dt>_HID:</dt>
<dd>_HID in the last column of the table means that the object’s bus_id
is derived from the _HID/_CID identification objects present under
the corresponding ACPI namespace node. The object’s sysfs directory
will then contain the ‘hid’ and ‘modalias’ attributes that can be
used to retrieve the _HID and _CIDs of that object.</dd>
<dt>LNXxxxxx:</dt>
<dd>The ‘modalias’ attribute is also present for struct acpi_device
objects having bus_id of the “LNXxxxxx” form (pseudo devices), in
which cases it contains the bus_id string itself.</dd>
<dt>device:</dt>
<dd>‘device’ in the last column of the table indicates that the object’s
bus_id cannot be determined from _HID/_CID of the corresponding
ACPI namespace node, although that object represents a device (for
example, it may be a PCI device with _ADR defined and without _HID
or _CID).  In that case the string ‘device’ will be used as the
object’s bus_id.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="linux-acpi-physical-device-glue">
<h2>Linux ACPI Physical Device Glue<a class="headerlink" href="#linux-acpi-physical-device-glue" title="Permalink to this headline">¶</a></h2>
<p>ACPI device (i.e. struct acpi_device) objects may be linked to other
objects in the Linux’ device hierarchy that represent “physical” devices
(for example, devices on the PCI bus).  If that happens, it means that
the ACPI device object is a “companion” of a device otherwise
represented in a different way and is used (1) to provide configuration
information on that device which cannot be obtained by other means and
(2) to do specific things to the device with the help of its ACPI
control methods.  One ACPI device object may be linked this way to
multiple “physical” devices.</p>
<p>If an ACPI device object is linked to a “physical” device, its sysfs
directory contains the “physical_node” symbolic link to the sysfs
directory of the target device object.  In turn, the target device’s
sysfs directory will then contain the “firmware_node” symbolic link to
the sysfs directory of the companion ACPI device object.
The linking mechanism relies on device identification provided by the
ACPI namespace.  For example, if there’s an ACPI namespace object
representing a PCI device (i.e. a device object under an ACPI namespace
object representing a PCI bridge) whose _ADR returns 0x00020000 and the
bus number of the parent PCI bridge is 0, the sysfs directory
representing the struct acpi_device object created for that ACPI
namespace object will contain the ‘physical_node’ symbolic link to the
/sys/devices/pci0000:00/0000:00:02:0/ sysfs directory of the
corresponding PCI device.</p>
<p>The linking mechanism is generally bus-specific.  The core of its
implementation is located in the drivers/acpi/glue.c file, but there are
complementary parts depending on the bus types in question located
elsewhere.  For example, the PCI-specific part of it is located in
drivers/pci/pci-acpi.c.</p>
</div>
<div class="section" id="example-linux-acpi-device-tree">
<h2>Example Linux ACPI Device Tree<a class="headerlink" href="#example-linux-acpi-device-tree" title="Permalink to this headline">¶</a></h2>
<p>The sysfs hierarchy of struct acpi_device objects corresponding to the
example ACPI namespace illustrated in Figure 2 with the addition of
fixed PWR_BUTTON/SLP_BUTTON devices is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+--------------+---+-----------------+
| LNXSYSTEM:00 | \ | acpi:LNXSYSTEM: |
+--------------+---+-----------------+
  |
  | +-------------+-----+----------------+
  +-| LNXPWRBN:00 | N/A | acpi:LNXPWRBN: |
  | +-------------+-----+----------------+
  |
  | +-------------+-----+----------------+
  +-| LNXSLPBN:00 | N/A | acpi:LNXSLPBN: |
  | +-------------+-----+----------------+
  |
  | +-----------+------------+--------------+
  +-| LNXCPU:00 | \_PR_.CPU0 | acpi:LNXCPU: |
  | +-----------+------------+--------------+
  |
  | +-------------+-------+----------------+
  +-| LNXSYBUS:00 | \_SB_ | acpi:LNXSYBUS: |
  | +-------------+-------+----------------+
  |   |
  |   | +- - - - - - - +- - - - - - +- - - - - - - -+
  |   +-| PNP0C0D:00 | \_SB_.LID0 | acpi:PNP0C0D: |
  |   | +- - - - - - - +- - - - - - +- - - - - - - -+
  |   |
  |   | +------------+------------+-----------------------+
  |   +-| PNP0A08:00 | \_SB_.PCI0 | acpi:PNP0A08:PNP0A03: |
  |     +------------+------------+-----------------------+
  |       |
  |       | +-----------+-----------------+-----+
  |       +-| device:00 | \_SB_.PCI0.RP03 | N/A |
  |       | +-----------+-----------------+-----+
  |       |   |
  |       |   | +-------------+----------------------+----------------+
  |       |   +-| LNXPOWER:00 | \_SB_.PCI0.RP03.PXP3 | acpi:LNXPOWER: |
  |       |     +-------------+----------------------+----------------+
  |       |
  |       | +-------------+-----------------+----------------+
  |       +-| LNXVIDEO:00 | \_SB_.PCI0.GFX0 | acpi:LNXVIDEO: |
  |         +-------------+-----------------+----------------+
  |           |
  |           | +-----------+-----------------+-----+
  |           +-| device:01 | \_SB_.PCI0.DD01 | N/A |
  |             +-----------+-----------------+-----+
  |
  | +-------------+-------+----------------+
  +-| LNXSYBUS:01 | \_TZ_ | acpi:LNXSYBUS: |
    +-------------+-------+----------------+
      |
      | +-------------+------------+----------------+
      +-| LNXPOWER:0a | \_TZ_.FN00 | acpi:LNXPOWER: |
      | +-------------+------------+----------------+
      |
      | +------------+------------+---------------+
      +-| PNP0C0B:00 | \_TZ_.FAN0 | acpi:PNP0C0B: |
      | +------------+------------+---------------+
      |
      | +-------------+------------+----------------+
      +-| LNXTHERM:00 | \_TZ_.TZ00 | acpi:LNXTHERM: |
        +-------------+------------+----------------+

               Figure 3. Example Linux ACPI Device Tree
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Each node is represented as “object/path/modalias”, where:</p>
<ol class="last arabic simple">
<li>‘object’ is the name of the object’s directory in sysfs.</li>
<li>‘path’ is the ACPI namespace path of the corresponding
ACPI namespace object, as returned by the object’s ‘path’
sysfs attribute.</li>
<li>‘modalias’ is the value of the object’s ‘modalias’ sysfs
attribute (as described earlier in this document).</li>
</ol>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">N/A indicates the device object does not have the ‘path’ or the
‘modalias’ attribute.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>